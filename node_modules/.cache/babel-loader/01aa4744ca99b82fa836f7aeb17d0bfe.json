{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport isEmpty from 'lodash.isempty';\nimport uniqBy from 'lodash.uniqby';\nimport FileRejectionReason from '../../../constants/src/FileRejectionReason';\nimport hasValue from '../../../lib/has-value';\nimport { getAcceptedTypesMessage, getFileSizeMessage, getMaxFilesMessage } from './messages';\n/**\n * @typedef {object} FileRejection\n * @property {File} file\n * @property {string} message Informative message to display to the user for why the file was rejected\n * @property {string} reason Error code/enum to denote why the file was rejected\n */\n\n/**\n * Returns a list of objects containing rejected files and why they were rejected based on the provided options\n * @param {File[]} files\n * @param {import('./split-files').SplitFilesOptions | undefined} options\n * @returns {FileRejection[]}\n */\n\nvar getFileRejections = function getFileRejections(files, options) {\n  if (options == null || isEmpty(files)) {\n    return [];\n  }\n\n  var acceptedMimeTypes = options.acceptedMimeTypes,\n      currentCount = options.currentFileCount,\n      maxFiles = options.maxFiles,\n      maxSizeInBytes = options.maxSizeInBytes;\n  var typeRejections = files.map(function (file) {\n    if (isEmpty(acceptedMimeTypes) || acceptedMimeTypes !== null && acceptedMimeTypes !== void 0 && acceptedMimeTypes.some(function (type) {\n      return file.type === type;\n    })) {\n      return;\n    }\n\n    return {\n      file: file,\n      reason: FileRejectionReason.InvalidFileType,\n      message: \"This file is not an accepted format. \".concat(getAcceptedTypesMessage(acceptedMimeTypes))\n    };\n  });\n  var sizeRejections = files.map(function (file) {\n    if (maxSizeInBytes == null || maxSizeInBytes === 0 || file.size <= maxSizeInBytes) {\n      return;\n    }\n\n    return {\n      file: file,\n      reason: FileRejectionReason.FileTooLarge,\n      message: \"This file is too big. \".concat(getFileSizeMessage(maxSizeInBytes))\n    };\n  });\n  var countRejections = files.map(function (file, index) {\n    if (maxFiles == null) {\n      return;\n    }\n\n    var fileNumber = index + 1;\n\n    if ((currentCount !== null && currentCount !== void 0 ? currentCount : 0) + fileNumber <= maxFiles) {\n      return;\n    }\n\n    return {\n      file: file,\n      reason: FileRejectionReason.OverFileLimit,\n      message: getMaxFilesMessage(maxFiles)\n    };\n  }); // Type rejections are arguably more important than size rejections, so those will take priority\n\n  var fileRejections = [].concat(_toConsumableArray(typeRejections), _toConsumableArray(sizeRejections), _toConsumableArray(countRejections)).filter(hasValue);\n  return uniqBy(fileRejections, function (rejection) {\n    return rejection.file;\n  });\n};\n\nexport default getFileRejections;","map":{"version":3,"names":["_toConsumableArray","isEmpty","uniqBy","FileRejectionReason","hasValue","getAcceptedTypesMessage","getFileSizeMessage","getMaxFilesMessage","getFileRejections","files","options","acceptedMimeTypes","currentCount","currentFileCount","maxFiles","maxSizeInBytes","typeRejections","map","file","some","type","reason","InvalidFileType","message","concat","sizeRejections","size","FileTooLarge","countRejections","index","fileNumber","OverFileLimit","fileRejections","filter","rejection"],"sources":["C:/Users/anish/auth-final/node_modules/evergreen-ui/esm/file-uploader/src/utils/get-file-rejections.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport isEmpty from 'lodash.isempty';\nimport uniqBy from 'lodash.uniqby';\nimport FileRejectionReason from '../../../constants/src/FileRejectionReason';\nimport hasValue from '../../../lib/has-value';\nimport { getAcceptedTypesMessage, getFileSizeMessage, getMaxFilesMessage } from './messages';\n/**\n * @typedef {object} FileRejection\n * @property {File} file\n * @property {string} message Informative message to display to the user for why the file was rejected\n * @property {string} reason Error code/enum to denote why the file was rejected\n */\n\n/**\n * Returns a list of objects containing rejected files and why they were rejected based on the provided options\n * @param {File[]} files\n * @param {import('./split-files').SplitFilesOptions | undefined} options\n * @returns {FileRejection[]}\n */\n\nvar getFileRejections = function getFileRejections(files, options) {\n  if (options == null || isEmpty(files)) {\n    return [];\n  }\n\n  var acceptedMimeTypes = options.acceptedMimeTypes,\n      currentCount = options.currentFileCount,\n      maxFiles = options.maxFiles,\n      maxSizeInBytes = options.maxSizeInBytes;\n  var typeRejections = files.map(function (file) {\n    if (isEmpty(acceptedMimeTypes) || acceptedMimeTypes !== null && acceptedMimeTypes !== void 0 && acceptedMimeTypes.some(function (type) {\n      return file.type === type;\n    })) {\n      return;\n    }\n\n    return {\n      file: file,\n      reason: FileRejectionReason.InvalidFileType,\n      message: \"This file is not an accepted format. \".concat(getAcceptedTypesMessage(acceptedMimeTypes))\n    };\n  });\n  var sizeRejections = files.map(function (file) {\n    if (maxSizeInBytes == null || maxSizeInBytes === 0 || file.size <= maxSizeInBytes) {\n      return;\n    }\n\n    return {\n      file: file,\n      reason: FileRejectionReason.FileTooLarge,\n      message: \"This file is too big. \".concat(getFileSizeMessage(maxSizeInBytes))\n    };\n  });\n  var countRejections = files.map(function (file, index) {\n    if (maxFiles == null) {\n      return;\n    }\n\n    var fileNumber = index + 1;\n\n    if ((currentCount !== null && currentCount !== void 0 ? currentCount : 0) + fileNumber <= maxFiles) {\n      return;\n    }\n\n    return {\n      file: file,\n      reason: FileRejectionReason.OverFileLimit,\n      message: getMaxFilesMessage(maxFiles)\n    };\n  }); // Type rejections are arguably more important than size rejections, so those will take priority\n\n  var fileRejections = [].concat(_toConsumableArray(typeRejections), _toConsumableArray(sizeRejections), _toConsumableArray(countRejections)).filter(hasValue);\n  return uniqBy(fileRejections, function (rejection) {\n    return rejection.file;\n  });\n};\n\nexport default getFileRejections;"],"mappings":"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"},"metadata":{},"sourceType":"module"}