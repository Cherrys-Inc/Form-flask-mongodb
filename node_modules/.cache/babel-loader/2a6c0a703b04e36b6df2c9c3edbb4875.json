{"ast":null,"code":"import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport { cloneElement, Component, useRef, useEffect, useCallback, useReducer, useMemo } from 'react';\nimport { isForwardRef } from 'react-is';\nimport computeScrollIntoView from 'compute-scroll-into-view';\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\n\nfunction noop() {}\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\n\n\nfunction scrollIntoView(node, menuNode) {\n  if (!node) {\n    return;\n  }\n\n  var actions = computeScrollIntoView(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\n\nfunction isOrContainsNode(parent, child) {\n  return parent === child || parent.contains && parent.contains(child);\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\n\nfunction debounce(fn, time) {\n  var timeoutId;\n\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\n\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\n\nfunction handleRefs() {\n  for (var _len4 = arguments.length, refs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    refs[_key4] = arguments[_key4];\n  }\n\n  return function (node) {\n    refs.forEach(function (ref) {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\n\nfunction getA11yStatusMessage(_ref2) {\n  var isOpen = _ref2.isOpen,\n      resultCount = _ref2.resultCount,\n      previousResultCount = _ref2.previousResultCount;\n\n  if (!isOpen) {\n    return '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n\n  return '';\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ?\n  /* istanbul ignore next (preact) */\n  arg[0] : arg;\n\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\n\nfunction isDOMElement(element) {\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\n\nfunction getElementProps(element) {\n  return element.props;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\n\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\n\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * This will perform a shallow merge of the given state object\n * with the state coming from props\n * (for the controlled component scenario)\n * This is used in state updater functions so they're referencing\n * the right state regardless of where it comes from.\n *\n * @param {Object} state The state of the component/hook.\n * @param {Object} props The props that may contain controlled values.\n * @returns {Object} The merged controlled state.\n */\n\n\nfunction getState(state, props) {\n  return Object.keys(state).reduce(function (prevState, key) {\n    prevState[key] = isControlledProp(props, key) ? props[key] : state[key];\n    return prevState;\n  }, {});\n}\n/**\n * This determines whether a prop is a \"controlled prop\" meaning it is\n * state which is controlled by the outside of this component rather\n * than within this component.\n *\n * @param {Object} props The props that may contain controlled values.\n * @param {String} key the key to check\n * @return {Boolean} whether it is a controlled controlled prop\n */\n\n\nfunction isControlledProp(props, key) {\n  return props[key] !== undefined;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\n\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n/**\n * Returns the new index in the list, in a circular way. If next value is out of bonds from the total,\n * it will wrap to either 0 or itemCount - 1.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index after the move.\n */\n\n\nfunction getNextWrappingIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  if (circular === void 0) {\n    circular = true;\n  }\n\n  if (itemCount === 0) {\n    return -1;\n  }\n\n  var itemsLastIndex = itemCount - 1;\n\n  if (typeof baseIndex !== 'number' || baseIndex < 0 || baseIndex >= itemCount) {\n    baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n  }\n\n  var newIndex = baseIndex + moveAmount;\n\n  if (newIndex < 0) {\n    newIndex = circular ? itemsLastIndex : 0;\n  } else if (newIndex > itemsLastIndex) {\n    newIndex = circular ? 0 : itemsLastIndex;\n  }\n\n  var nonDisabledNewIndex = getNextNonDisabledIndex(moveAmount, newIndex, itemCount, getItemNodeFromIndex, circular);\n\n  if (nonDisabledNewIndex === -1) {\n    return baseIndex >= itemCount ? -1 : baseIndex;\n  }\n\n  return nonDisabledNewIndex;\n}\n/**\n * Returns the next index in the list of an item that is not disabled.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index. Returns baseIndex if item is not disabled. Returns next non-disabled item otherwise. If no non-disabled found it will return -1.\n */\n\n\nfunction getNextNonDisabledIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  var currentElementNode = getItemNodeFromIndex(baseIndex);\n\n  if (!currentElementNode || !currentElementNode.hasAttribute('disabled')) {\n    return baseIndex;\n  }\n\n  if (moveAmount > 0) {\n    for (var index = baseIndex + 1; index < itemCount; index++) {\n      if (!getItemNodeFromIndex(index).hasAttribute('disabled')) {\n        return index;\n      }\n    }\n  } else {\n    for (var _index = baseIndex - 1; _index >= 0; _index--) {\n      if (!getItemNodeFromIndex(_index).hasAttribute('disabled')) {\n        return _index;\n      }\n    }\n  }\n\n  if (circular) {\n    return moveAmount > 0 ? getNextNonDisabledIndex(1, 0, itemCount, getItemNodeFromIndex, false) : getNextNonDisabledIndex(-1, itemCount - 1, itemCount, getItemNodeFromIndex, false);\n  }\n\n  return -1;\n}\n/**\n * Checks if event target is within the downshift elements.\n *\n * @param {EventTarget} target Target to check.\n * @param {HTMLElement[]} downshiftElements The elements that form downshift (list, toggle button etc).\n * @param {Document} document The document.\n * @param {boolean} checkActiveElement Whether to also check activeElement.\n *\n * @returns {boolean} Whether or not the target is within downshift elements.\n */\n\n\nfunction targetWithinDownshift(target, downshiftElements, document, checkActiveElement) {\n  if (checkActiveElement === void 0) {\n    checkActiveElement = true;\n  }\n\n  return downshiftElements.some(function (contextNode) {\n    return contextNode && (isOrContainsNode(contextNode, target) || checkActiveElement && isOrContainsNode(contextNode, document.activeElement));\n  });\n}\n\nfunction validateControlledUnchanged(state, prevProps, nextProps) {\n  if (process.env.NODE_ENV === 'production') {\n    return;\n  }\n\n  var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n  Object.keys(state).forEach(function (propKey) {\n    if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n    } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n    }\n  });\n}\n\nvar cleanupStatus = debounce(function () {\n  getStatusDiv().textContent = '';\n}, 500);\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\n\nfunction setStatus(status, documentProp) {\n  var div = getStatusDiv(documentProp);\n\n  if (!status) {\n    return;\n  }\n\n  div.textContent = status;\n  cleanupStatus();\n}\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\n\n\nfunction getStatusDiv(documentProp) {\n  if (documentProp === void 0) {\n    documentProp = document;\n  }\n\n  var statusDiv = documentProp.getElementById('a11y-status-message');\n\n  if (statusDiv) {\n    return statusDiv;\n  }\n\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\n\nvar Downshift = /*#__PURE__*/function () {\n  var Downshift = /*#__PURE__*/function (_Component) {\n    _inheritsLoose(Downshift, _Component);\n\n    function Downshift(_props) {\n      var _this = _Component.call(this, _props) || this;\n\n      _this.id = _this.props.id || \"downshift-\" + generateId();\n      _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n      _this.labelId = _this.props.labelId || _this.id + \"-label\";\n      _this.inputId = _this.props.inputId || _this.id + \"-input\";\n\n      _this.getItemId = _this.props.getItemId || function (index) {\n        return _this.id + \"-item-\" + index;\n      };\n\n      _this.input = null;\n      _this.items = [];\n      _this.itemCount = null;\n      _this.previousResultCount = 0;\n      _this.timeoutIds = [];\n\n      _this.internalSetTimeout = function (fn, time) {\n        var id = setTimeout(function () {\n          _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n            return i !== id;\n          });\n          fn();\n        }, time);\n\n        _this.timeoutIds.push(id);\n      };\n\n      _this.setItemCount = function (count) {\n        _this.itemCount = count;\n      };\n\n      _this.unsetItemCount = function () {\n        _this.itemCount = null;\n      };\n\n      _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n        if (highlightedIndex === void 0) {\n          highlightedIndex = _this.props.defaultHighlightedIndex;\n        }\n\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(_extends({\n          highlightedIndex: highlightedIndex\n        }, otherStateToSet));\n      };\n\n      _this.clearSelection = function (cb) {\n        _this.internalSetState({\n          selectedItem: null,\n          inputValue: '',\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          isOpen: _this.props.defaultIsOpen\n        }, cb);\n      };\n\n      _this.selectItem = function (item, otherStateToSet, cb) {\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(_extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          selectedItem: item,\n          inputValue: _this.props.itemToString(item)\n        }, otherStateToSet), cb);\n      };\n\n      _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n        var item = _this.items[itemIndex];\n\n        if (item == null) {\n          return;\n        }\n\n        _this.selectItem(item, otherStateToSet, cb);\n      };\n\n      _this.selectHighlightedItem = function (otherStateToSet, cb) {\n        return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n      };\n\n      _this.internalSetState = function (stateToSet, cb) {\n        var isItemSelected, onChangeArg;\n        var onStateChangeArg = {};\n        var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n        // so someone controlling the `inputValue` state gets notified of\n        // the input change as soon as possible. This avoids issues with\n        // preserving the cursor position.\n        // See https://github.com/downshift-js/downshift/issues/217 for more info.\n\n        if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), stateToSet));\n        }\n\n        return _this.setState(function (state) {\n          state = _this.getState(state);\n          var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n          newStateToSet = _this.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n          // what was selected before\n          // used to determine if onSelect and onChange callbacks should be called\n\n          isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n          var nextState = {}; // this is just used to tell whether the state changed\n\n          var nextFullState = {}; // we need to call on change if the outside world is controlling any of our state\n          // and we're trying to update that state. OR if the selection has changed and we're\n          // trying to update the selection\n\n          if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n            onChangeArg = newStateToSet.selectedItem;\n          }\n\n          newStateToSet.type = newStateToSet.type || unknown;\n          Object.keys(newStateToSet).forEach(function (key) {\n            // onStateChangeArg should only have the state that is\n            // actually changing\n            if (state[key] !== newStateToSet[key]) {\n              onStateChangeArg[key] = newStateToSet[key];\n            } // the type is useful for the onStateChangeArg\n            // but we don't actually want to set it in internal state.\n            // this is an undocumented feature for now... Not all internalSetState\n            // calls support it and I'm not certain we want them to yet.\n            // But it enables users controlling the isOpen state to know when\n            // the isOpen state changes due to mouseup events which is quite handy.\n\n\n            if (key === 'type') {\n              return;\n            }\n\n            nextFullState[key] = newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n            if (!isControlledProp(_this.props, key)) {\n              nextState[key] = newStateToSet[key];\n            }\n          }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n          // earlier, so we'll call it now that we know what the inputValue state will be.\n\n          if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n            _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), newStateToSet));\n          }\n\n          return nextState;\n        }, function () {\n          // call the provided callback if it's a function\n          cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n          // we have relevant information to pass them.\n\n          var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n\n          if (hasMoreStateThanType) {\n            _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n          }\n\n          if (isItemSelected) {\n            _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n          }\n\n          if (onChangeArg !== undefined) {\n            _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n          } // this is currently undocumented and therefore subject to change\n          // We'll try to not break it, but just be warned.\n\n\n          _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n        });\n      };\n\n      _this.rootRef = function (node) {\n        return _this._rootNode = node;\n      };\n\n      _this.getRootProps = function (_temp, _temp2) {\n        var _extends2;\n\n        var _ref = _temp === void 0 ? {} : _temp,\n            _ref$refKey = _ref.refKey,\n            refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n            ref = _ref.ref,\n            rest = _objectWithoutPropertiesLoose(_ref, [\"refKey\", \"ref\"]);\n\n        var _ref2 = _temp2 === void 0 ? {} : _temp2,\n            _ref2$suppressRefErro = _ref2.suppressRefError,\n            suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro; // this is used in the render to know whether the user has called getRootProps.\n        // It uses that to know whether to apply the props automatically\n\n\n        _this.getRootProps.called = true;\n        _this.getRootProps.refKey = refKey;\n        _this.getRootProps.suppressRefError = suppressRefError;\n\n        var _this$getState = _this.getState(),\n            isOpen = _this$getState.isOpen;\n\n        return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : null, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n      };\n\n      _this.keyDownHandlers = {\n        ArrowDown: function ArrowDown(event) {\n          var _this2 = this;\n\n          event.preventDefault();\n\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? 5 : 1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowDown\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowDown\n            }, function () {\n              var itemCount = _this2.getItemCount();\n\n              if (itemCount > 0) {\n                var _this2$getState = _this2.getState(),\n                    highlightedIndex = _this2$getState.highlightedIndex;\n\n                var nextHighlightedIndex = getNextWrappingIndex(1, highlightedIndex, itemCount, function (index) {\n                  return _this2.getItemNodeFromIndex(index);\n                });\n\n                _this2.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowDown\n                });\n              }\n            });\n          }\n        },\n        ArrowUp: function ArrowUp(event) {\n          var _this3 = this;\n\n          event.preventDefault();\n\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? -5 : -1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowUp\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowUp\n            }, function () {\n              var itemCount = _this3.getItemCount();\n\n              if (itemCount > 0) {\n                var _this3$getState = _this3.getState(),\n                    highlightedIndex = _this3$getState.highlightedIndex;\n\n                var nextHighlightedIndex = getNextWrappingIndex(-1, highlightedIndex, itemCount, function (index) {\n                  return _this3.getItemNodeFromIndex(index);\n                });\n\n                _this3.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowUp\n                });\n              }\n            });\n          }\n        },\n        Enter: function Enter(event) {\n          if (event.which === 229) {\n            return;\n          }\n\n          var _this$getState2 = this.getState(),\n              isOpen = _this$getState2.isOpen,\n              highlightedIndex = _this$getState2.highlightedIndex;\n\n          if (isOpen && highlightedIndex != null) {\n            event.preventDefault();\n            var item = this.items[highlightedIndex];\n            var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n\n            if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n              return;\n            }\n\n            this.selectHighlightedItem({\n              type: keyDownEnter\n            });\n          }\n        },\n        Escape: function Escape(event) {\n          event.preventDefault();\n          this.reset({\n            type: keyDownEscape,\n            selectedItem: null,\n            inputValue: ''\n          });\n        }\n      };\n      _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        ' ': function _(event) {\n          event.preventDefault();\n          this.toggleMenu({\n            type: keyDownSpaceButton\n          });\n        }\n      });\n      _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        Home: function Home(event) {\n          var _this4 = this;\n\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n\n          var _this$getState3 = this.getState(),\n              isOpen = _this$getState3.isOpen;\n\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting downwards from 0 if that's disabled.\n\n\n          var newHighlightedIndex = getNextNonDisabledIndex(1, 0, itemCount, function (index) {\n            return _this4.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownHome\n          });\n        },\n        End: function End(event) {\n          var _this5 = this;\n\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n\n          var _this$getState4 = this.getState(),\n              isOpen = _this$getState4.isOpen;\n\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting upwards from last index if that's disabled.\n\n\n          var newHighlightedIndex = getNextNonDisabledIndex(-1, itemCount - 1, itemCount, function (index) {\n            return _this5.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownEnd\n          });\n        }\n      });\n\n      _this.getToggleButtonProps = function (_temp3) {\n        var _ref3 = _temp3 === void 0 ? {} : _temp3,\n            onClick = _ref3.onClick,\n            onPress = _ref3.onPress,\n            onKeyDown = _ref3.onKeyDown,\n            onKeyUp = _ref3.onKeyUp,\n            onBlur = _ref3.onBlur,\n            rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"]);\n\n        var _this$getState5 = _this.getState(),\n            isOpen = _this$getState5.isOpen;\n\n        var enabledEventHandlers = {\n          onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n          onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n          onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n          onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n        };\n        var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n        return _extends({\n          type: 'button',\n          role: 'button',\n          'aria-label': isOpen ? 'close menu' : 'open menu',\n          'aria-haspopup': true,\n          'data-toggle': true\n        }, eventHandlers, rest);\n      };\n\n      _this.buttonHandleKeyUp = function (event) {\n        // Prevent click event from emitting in Firefox\n        event.preventDefault();\n      };\n\n      _this.buttonHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n\n        if (_this.buttonKeyDownHandlers[key]) {\n          _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n\n      _this.buttonHandleClick = function (event) {\n        event.preventDefault(); // handle odd case for Safari and Firefox which\n        // don't give the button the focus properly.\n\n        /* istanbul ignore if (can't reasonably test this) */\n\n        if (_this.props.environment.document.activeElement === _this.props.environment.document.body) {\n          event.target.focus();\n        } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n        // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n        // when building for production and should therefore have no impact on production code.\n\n\n        if (process.env.NODE_ENV === 'test') {\n          _this.toggleMenu({\n            type: clickButton\n          });\n        } else {\n          // Ensure that toggle of menu occurs after the potential blur event in iOS\n          _this.internalSetTimeout(function () {\n            return _this.toggleMenu({\n              type: clickButton\n            });\n          });\n        }\n      };\n\n      _this.buttonHandleBlur = function (event) {\n        var blurTarget = event.target; // Save blur target for comparison with activeElement later\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n        _this.internalSetTimeout(function () {\n          if (!_this.isMouseDown && (_this.props.environment.document.activeElement == null || _this.props.environment.document.activeElement.id !== _this.inputId) && _this.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n          ) {\n            _this.reset({\n              type: blurButton\n            });\n          }\n        });\n      };\n\n      _this.getLabelProps = function (props) {\n        return _extends({\n          htmlFor: _this.inputId,\n          id: _this.labelId\n        }, props);\n      };\n\n      _this.getInputProps = function (_temp4) {\n        var _ref4 = _temp4 === void 0 ? {} : _temp4,\n            onKeyDown = _ref4.onKeyDown,\n            onBlur = _ref4.onBlur,\n            onChange = _ref4.onChange,\n            onInput = _ref4.onInput,\n            onChangeText = _ref4.onChangeText,\n            rest = _objectWithoutPropertiesLoose(_ref4, [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"]);\n\n        var onChangeKey;\n        var eventHandlers = {};\n        /* istanbul ignore next (preact) */\n\n        onChangeKey = 'onChange';\n\n        var _this$getState6 = _this.getState(),\n            inputValue = _this$getState6.inputValue,\n            isOpen = _this$getState6.isOpen,\n            highlightedIndex = _this$getState6.highlightedIndex;\n\n        if (!rest.disabled) {\n          var _eventHandlers;\n\n          eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n        }\n        /* istanbul ignore if (react-native) */\n\n\n        return _extends({\n          'aria-autocomplete': 'list',\n          'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : null,\n          'aria-controls': isOpen ? _this.menuId : null,\n          'aria-labelledby': _this.labelId,\n          // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n          // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n          autoComplete: 'off',\n          value: inputValue,\n          id: _this.inputId\n        }, eventHandlers, rest);\n      };\n\n      _this.inputHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n\n        if (key && _this.inputKeyDownHandlers[key]) {\n          _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n\n      _this.inputHandleChange = function (event) {\n        _this.internalSetState({\n          type: changeInput,\n          isOpen: true,\n          inputValue: event.target.value,\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        });\n      };\n\n      _this.inputHandleBlur = function () {\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n        _this.internalSetTimeout(function () {\n          var downshiftButtonIsActive = _this.props.environment.document && !!_this.props.environment.document.activeElement && !!_this.props.environment.document.activeElement.dataset && _this.props.environment.document.activeElement.dataset.toggle && _this._rootNode && _this._rootNode.contains(_this.props.environment.document.activeElement);\n\n          if (!_this.isMouseDown && !downshiftButtonIsActive) {\n            _this.reset({\n              type: blurInput\n            });\n          }\n        });\n      };\n\n      _this.menuRef = function (node) {\n        _this._menuNode = node;\n      };\n\n      _this.getMenuProps = function (_temp5, _temp6) {\n        var _extends3;\n\n        var _ref5 = _temp5 === void 0 ? {} : _temp5,\n            _ref5$refKey = _ref5.refKey,\n            refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n            ref = _ref5.ref,\n            props = _objectWithoutPropertiesLoose(_ref5, [\"refKey\", \"ref\"]);\n\n        var _ref6 = _temp6 === void 0 ? {} : _temp6,\n            _ref6$suppressRefErro = _ref6.suppressRefError,\n            suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n\n        _this.getMenuProps.called = true;\n        _this.getMenuProps.refKey = refKey;\n        _this.getMenuProps.suppressRefError = suppressRefError;\n        return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? null : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n      };\n\n      _this.getItemProps = function (_temp7) {\n        var _enabledEventHandlers;\n\n        var _ref7 = _temp7 === void 0 ? {} : _temp7,\n            onMouseMove = _ref7.onMouseMove,\n            onMouseDown = _ref7.onMouseDown,\n            onClick = _ref7.onClick,\n            onPress = _ref7.onPress,\n            index = _ref7.index,\n            _ref7$item = _ref7.item,\n            item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ?\n        /* istanbul ignore next */\n        undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n            rest = _objectWithoutPropertiesLoose(_ref7, [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"]);\n\n        if (index === undefined) {\n          _this.items.push(item);\n\n          index = _this.items.indexOf(item);\n        } else {\n          _this.items[index] = item;\n        }\n\n        var onSelectKey = 'onClick';\n        var customClickHandler = onClick;\n        var enabledEventHandlers = (_enabledEventHandlers = {\n          // onMouseMove is used over onMouseEnter here. onMouseMove\n          // is only triggered on actual mouse movement while onMouseEnter\n          // can fire on DOM changes, interrupting keyboard navigation\n          onMouseMove: callAllEventHandlers(onMouseMove, function () {\n            if (index === _this.getState().highlightedIndex) {\n              return;\n            }\n\n            _this.setHighlightedIndex(index, {\n              type: itemMouseEnter\n            }); // We never want to manually scroll when changing state based\n            // on `onMouseMove` because we will be moving the element out\n            // from under the user which is currently scrolling/moving the\n            // cursor\n\n\n            _this.avoidScrolling = true;\n\n            _this.internalSetTimeout(function () {\n              return _this.avoidScrolling = false;\n            }, 250);\n          }),\n          onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n            // This prevents the activeElement from being changed\n            // to the item so it can remain with the current activeElement\n            // which is a more common use case.\n            event.preventDefault();\n          })\n        }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n          _this.selectItemAtIndex(index, {\n            type: clickItem\n          });\n        }), _enabledEventHandlers); // Passing down the onMouseDown handler to prevent redirect\n        // of the activeElement if clicking on disabled items\n\n        var eventHandlers = rest.disabled ? {\n          onMouseDown: enabledEventHandlers.onMouseDown\n        } : enabledEventHandlers;\n        return _extends({\n          id: _this.getItemId(index),\n          role: 'option',\n          'aria-selected': _this.getState().highlightedIndex === index\n        }, eventHandlers, rest);\n      };\n\n      _this.clearItems = function () {\n        _this.items = [];\n      };\n\n      _this.reset = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(function (_ref8) {\n          var selectedItem = _ref8.selectedItem;\n          return _extends({\n            isOpen: _this.props.defaultIsOpen,\n            highlightedIndex: _this.props.defaultHighlightedIndex,\n            inputValue: _this.props.itemToString(selectedItem)\n          }, otherStateToSet);\n        }, cb);\n      };\n\n      _this.toggleMenu = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(function (_ref9) {\n          var isOpen = _ref9.isOpen;\n          return _extends({\n            isOpen: !isOpen\n          }, isOpen && {\n            highlightedIndex: _this.props.defaultHighlightedIndex\n          }, otherStateToSet);\n        }, function () {\n          var _this$getState7 = _this.getState(),\n              isOpen = _this$getState7.isOpen,\n              highlightedIndex = _this$getState7.highlightedIndex;\n\n          if (isOpen) {\n            if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n              _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n            }\n          }\n\n          cbToCb(cb)();\n        });\n      };\n\n      _this.openMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: true\n        }, cb);\n      };\n\n      _this.closeMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: false\n        }, cb);\n      };\n\n      _this.updateStatus = debounce(function () {\n        var state = _this.getState();\n\n        var item = _this.items[state.highlightedIndex];\n\n        var resultCount = _this.getItemCount();\n\n        var status = _this.props.getA11yStatusMessage(_extends({\n          itemToString: _this.props.itemToString,\n          previousResultCount: _this.previousResultCount,\n          resultCount: resultCount,\n          highlightedItem: item\n        }, state));\n\n        _this.previousResultCount = resultCount;\n        setStatus(status, _this.props.environment.document);\n      }, 200); // fancy destructuring + defaults + aliases\n      // this basically says each value of state should either be set to\n      // the initial value or the default value if the initial value is not provided\n\n      var _this$props = _this.props,\n          defaultHighlightedIndex = _this$props.defaultHighlightedIndex,\n          _this$props$initialHi = _this$props.initialHighlightedIndex,\n          _highlightedIndex = _this$props$initialHi === void 0 ? defaultHighlightedIndex : _this$props$initialHi,\n          defaultIsOpen = _this$props.defaultIsOpen,\n          _this$props$initialIs = _this$props.initialIsOpen,\n          _isOpen = _this$props$initialIs === void 0 ? defaultIsOpen : _this$props$initialIs,\n          _this$props$initialIn = _this$props.initialInputValue,\n          _inputValue = _this$props$initialIn === void 0 ? '' : _this$props$initialIn,\n          _this$props$initialSe = _this$props.initialSelectedItem,\n          _selectedItem = _this$props$initialSe === void 0 ? null : _this$props$initialSe;\n\n      var _state = _this.getState({\n        highlightedIndex: _highlightedIndex,\n        isOpen: _isOpen,\n        inputValue: _inputValue,\n        selectedItem: _selectedItem\n      });\n\n      if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n        _state.inputValue = _this.props.itemToString(_state.selectedItem);\n      }\n\n      _this.state = _state;\n      return _this;\n    }\n\n    var _proto = Downshift.prototype;\n    /**\n     * Clear all running timeouts\n     */\n\n    _proto.internalClearTimeouts = function internalClearTimeouts() {\n      this.timeoutIds.forEach(function (id) {\n        clearTimeout(id);\n      });\n      this.timeoutIds = [];\n    }\n    /**\n     * Gets the state based on internal state or props\n     * If a state value is passed via props, then that\n     * is the value given, otherwise it's retrieved from\n     * stateToMerge\n     *\n     * @param {Object} stateToMerge defaults to this.state\n     * @return {Object} the state\n     */\n    ;\n\n    _proto.getState = function getState$1(stateToMerge) {\n      if (stateToMerge === void 0) {\n        stateToMerge = this.state;\n      }\n\n      return getState(stateToMerge, this.props);\n    };\n\n    _proto.getItemCount = function getItemCount() {\n      // things read better this way. They're in priority order:\n      // 1. `this.itemCount`\n      // 2. `this.props.itemCount`\n      // 3. `this.items.length`\n      var itemCount = this.items.length;\n\n      if (this.itemCount != null) {\n        itemCount = this.itemCount;\n      } else if (this.props.itemCount !== undefined) {\n        itemCount = this.props.itemCount;\n      }\n\n      return itemCount;\n    };\n\n    _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n      return this.props.environment.document.getElementById(this.getItemId(index));\n    };\n\n    _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n      /* istanbul ignore else (react-native) */\n      {\n        var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n        this.props.scrollIntoView(node, this._menuNode);\n      }\n    };\n\n    _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n      var _this6 = this;\n\n      var itemCount = this.getItemCount();\n\n      var _this$getState8 = this.getState(),\n          highlightedIndex = _this$getState8.highlightedIndex;\n\n      if (itemCount > 0) {\n        var nextHighlightedIndex = getNextWrappingIndex(amount, highlightedIndex, itemCount, function (index) {\n          return _this6.getItemNodeFromIndex(index);\n        });\n        this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n      }\n    };\n\n    _proto.getStateAndHelpers = function getStateAndHelpers() {\n      var _this$getState9 = this.getState(),\n          highlightedIndex = _this$getState9.highlightedIndex,\n          inputValue = _this$getState9.inputValue,\n          selectedItem = _this$getState9.selectedItem,\n          isOpen = _this$getState9.isOpen;\n\n      var itemToString = this.props.itemToString;\n      var id = this.id;\n      var getRootProps = this.getRootProps,\n          getToggleButtonProps = this.getToggleButtonProps,\n          getLabelProps = this.getLabelProps,\n          getMenuProps = this.getMenuProps,\n          getInputProps = this.getInputProps,\n          getItemProps = this.getItemProps,\n          openMenu = this.openMenu,\n          closeMenu = this.closeMenu,\n          toggleMenu = this.toggleMenu,\n          selectItem = this.selectItem,\n          selectItemAtIndex = this.selectItemAtIndex,\n          selectHighlightedItem = this.selectHighlightedItem,\n          setHighlightedIndex = this.setHighlightedIndex,\n          clearSelection = this.clearSelection,\n          clearItems = this.clearItems,\n          reset = this.reset,\n          setItemCount = this.setItemCount,\n          unsetItemCount = this.unsetItemCount,\n          setState = this.internalSetState;\n      return {\n        // prop getters\n        getRootProps: getRootProps,\n        getToggleButtonProps: getToggleButtonProps,\n        getLabelProps: getLabelProps,\n        getMenuProps: getMenuProps,\n        getInputProps: getInputProps,\n        getItemProps: getItemProps,\n        // actions\n        reset: reset,\n        openMenu: openMenu,\n        closeMenu: closeMenu,\n        toggleMenu: toggleMenu,\n        selectItem: selectItem,\n        selectItemAtIndex: selectItemAtIndex,\n        selectHighlightedItem: selectHighlightedItem,\n        setHighlightedIndex: setHighlightedIndex,\n        clearSelection: clearSelection,\n        clearItems: clearItems,\n        setItemCount: setItemCount,\n        unsetItemCount: unsetItemCount,\n        setState: setState,\n        // props\n        itemToString: itemToString,\n        // derived\n        id: id,\n        // state\n        highlightedIndex: highlightedIndex,\n        inputValue: inputValue,\n        isOpen: isOpen,\n        selectedItem: selectedItem\n      };\n    } //////////////////////////// ROOT\n    ;\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this7 = this;\n      /* istanbul ignore if (react-native) */\n\n\n      if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n      /* istanbul ignore if (react-native) */\n\n\n      {\n        // this.isMouseDown helps us track whether the mouse is currently held down.\n        // This is useful when the user clicks on an item in the list, but holds the mouse\n        // down long enough for the list to disappear (because the blur event fires on the input)\n        // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n        // trigger hiding the menu.\n        var onMouseDown = function () {\n          _this7.isMouseDown = true;\n        };\n\n        var onMouseUp = function (event) {\n          _this7.isMouseDown = false; // if the target element or the activeElement is within a downshift node\n          // then we don't want to reset downshift\n\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment.document);\n\n          if (!contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: mouseUp\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        }; // Touching an element in iOS gives focus and hover states, but touching out of\n        // the element will remove hover, and persist the focus state, resulting in the\n        // blur event not being triggered.\n        // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n        // If the user taps outside of Downshift, the component should be reset,\n        // but not if the user is swiping\n\n\n        var onTouchStart = function () {\n          _this7.isTouchMove = false;\n        };\n\n        var onTouchMove = function () {\n          _this7.isTouchMove = true;\n        };\n\n        var onTouchEnd = function (event) {\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment.document, false);\n\n          if (!_this7.isTouchMove && !contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: touchEnd\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        };\n\n        var environment = this.props.environment;\n        environment.addEventListener('mousedown', onMouseDown);\n        environment.addEventListener('mouseup', onMouseUp);\n        environment.addEventListener('touchstart', onTouchStart);\n        environment.addEventListener('touchmove', onTouchMove);\n        environment.addEventListener('touchend', onTouchEnd);\n\n        this.cleanup = function () {\n          _this7.internalClearTimeouts();\n\n          _this7.updateStatus.cancel();\n\n          environment.removeEventListener('mousedown', onMouseDown);\n          environment.removeEventListener('mouseup', onMouseUp);\n          environment.removeEventListener('touchstart', onTouchStart);\n          environment.removeEventListener('touchmove', onTouchMove);\n          environment.removeEventListener('touchend', onTouchEnd);\n        };\n      }\n    };\n\n    _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n      var _ref10 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n          currentHighlightedIndex = _ref10.highlightedIndex;\n\n      var _ref11 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n          prevHighlightedIndex = _ref11.highlightedIndex;\n\n      var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n      return scrollWhenOpen || currentHighlightedIndex !== prevHighlightedIndex;\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateControlledUnchanged(this.state, prevProps, this.props);\n        /* istanbul ignore if (react-native) */\n\n        if (this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n          validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n        }\n      }\n\n      if (isControlledProp(this.props, 'selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n        this.internalSetState({\n          type: controlledPropUpdatedSelectedItem,\n          inputValue: this.props.itemToString(this.props.selectedItem)\n        });\n      }\n\n      if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n        this.scrollHighlightedItemIntoView();\n      }\n      /* istanbul ignore else (react-native) */\n\n\n      this.updateStatus();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.cleanup(); // avoids memory leak\n    };\n\n    _proto.render = function render() {\n      var children = unwrapArray(this.props.children, noop); // because the items are rerendered every time we call the children\n      // we clear this out each render and it will be populated again as\n      // getItemProps is called.\n\n      this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n      // this render. If they do then we don't need to do anything,\n      // if they don't then we need to clone the element they return and\n      // apply the props for them.\n\n      this.getRootProps.called = false;\n      this.getRootProps.refKey = undefined;\n      this.getRootProps.suppressRefError = undefined; // we do something similar for getMenuProps\n\n      this.getMenuProps.called = false;\n      this.getMenuProps.refKey = undefined;\n      this.getMenuProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n      this.getLabelProps.called = false; // and something similar for getInputProps\n\n      this.getInputProps.called = false;\n      var element = unwrapArray(children(this.getStateAndHelpers()));\n\n      if (!element) {\n        return null;\n      }\n\n      if (this.getRootProps.called || this.props.suppressRefError) {\n        if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n          validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n        }\n\n        return element;\n      } else if (isDOMElement(element)) {\n        // they didn't apply the root props, but we can clone\n        // this and apply the props ourselves\n        return cloneElement(element, this.getRootProps(getElementProps(element)));\n      }\n      /* istanbul ignore else */\n\n\n      if (process.env.NODE_ENV !== 'production') {\n        // they didn't apply the root props, but they need to\n        // otherwise we can't query around the autocomplete\n        throw new Error('downshift: If you return a non-DOM element, you must apply the getRootProps function');\n      }\n      /* istanbul ignore next */\n\n\n      return undefined;\n    };\n\n    return Downshift;\n  }(Component);\n\n  Downshift.defaultProps = {\n    defaultHighlightedIndex: null,\n    defaultIsOpen: false,\n    getA11yStatusMessage: getA11yStatusMessage,\n    itemToString: function itemToString(i) {\n      if (i == null) {\n        return '';\n      }\n\n      if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n        // eslint-disable-next-line no-console\n        console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n      }\n\n      return String(i);\n    },\n    onStateChange: noop,\n    onInputValueChange: noop,\n    onUserAction: noop,\n    onChange: noop,\n    onSelect: noop,\n    onOuterClick: noop,\n    selectedItemChanged: function selectedItemChanged(prevItem, item) {\n      return prevItem !== item;\n    },\n    environment: typeof window === 'undefined'\n    /* istanbul ignore next (ssr) */\n    ? {} : window,\n    stateReducer: function stateReducer(state, stateToSet) {\n      return stateToSet;\n    },\n    suppressRefError: false,\n    scrollIntoView: scrollIntoView\n  };\n  Downshift.stateChangeTypes = stateChangeTypes;\n  return Downshift;\n}();\n\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n\n} : void 0;\n\nfunction validateGetMenuPropsCalledCorrectly(node, _ref12) {\n  var refKey = _ref12.refKey;\n\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref13) {\n  var refKey = _ref13.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nvar dropdownDefaultStateValues = {\n  highlightedIndex: -1,\n  isOpen: false,\n  selectedItem: null,\n  inputValue: ''\n};\n\nfunction callOnChangeProps(action, state, newState) {\n  var props = action.props,\n      type = action.type;\n  var changes = {};\n  Object.keys(state).forEach(function (key) {\n    invokeOnChangeHandler(key, props, state, newState);\n\n    if (newState[key] !== state[key]) {\n      changes[key] = newState[key];\n    }\n  });\n\n  if (props.onStateChange && Object.keys(changes).length) {\n    props.onStateChange(_extends({\n      type: type\n    }, changes));\n  }\n}\n\nfunction invokeOnChangeHandler(key, props, state, newState) {\n  var handler = \"on\" + capitalizeString(key) + \"Change\";\n\n  if (props[handler] && newState[key] !== undefined && newState[key] !== state[key]) {\n    props[handler](newState);\n  }\n}\n/**\n * Default state reducer that returns the changes.\n *\n * @param {Object} s state.\n * @param {Object} a action with changes.\n * @returns {Object} changes.\n */\n\n\nfunction stateReducer(s, a) {\n  return a.changes;\n}\n/**\n * Returns a message to be added to aria-live region when item is selected.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\n\n\nfunction getA11ySelectionMessage(selectionParameters) {\n  var selectedItem = selectionParameters.selectedItem,\n      itemToStringLocal = selectionParameters.itemToString;\n  return selectedItem ? itemToStringLocal(selectedItem) + \" has been selected.\" : '';\n}\n/**\n * Debounced call for updating the a11y message.\n */\n\n\nvar updateA11yStatus = debounce(function (getA11yMessage, document) {\n  setStatus(getA11yMessage(), document);\n}, 200);\n\nfunction getElementIds(_ref) {\n  var id = _ref.id,\n      labelId = _ref.labelId,\n      menuId = _ref.menuId,\n      getItemId = _ref.getItemId,\n      toggleButtonId = _ref.toggleButtonId;\n  var uniqueId = id === undefined ? \"downshift-\" + generateId() : id;\n  return {\n    labelId: labelId || uniqueId + \"-label\",\n    menuId: menuId || uniqueId + \"-menu\",\n    getItemId: getItemId || function (index) {\n      return uniqueId + \"-item-\" + index;\n    },\n    toggleButtonId: toggleButtonId || uniqueId + \"-toggle-button\"\n  };\n}\n\nfunction getItemIndex(index, item, items) {\n  if (index !== undefined) {\n    return index;\n  }\n\n  if (items.length === 0) {\n    return -1;\n  }\n\n  return items.indexOf(item);\n}\n\nfunction itemToString(item) {\n  return item ? String(item) : '';\n}\n\nfunction getPropTypesValidator(caller, propTypes) {\n  // istanbul ignore next\n  return function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    Object.keys(propTypes).forEach(function (key) {\n      PropTypes.checkPropTypes(propTypes, options, key, caller.name);\n    });\n  };\n}\n\nfunction isAcceptedCharacterKey(key) {\n  return /^\\S{1}$/.test(key);\n}\n\nfunction capitalizeString(string) {\n  return \"\" + string.slice(0, 1).toUpperCase() + string.slice(1);\n}\n\nfunction useLatestRef(val) {\n  var ref = useRef(val); // technically this is not \"concurrent mode safe\" because we're manipulating\n  // the value during render (so it's not idempotent). However, the places this\n  // hook is used is to support memoizing callbacks which will be called\n  // *during* render, so we need the latest values *during* render.\n  // If not for this, then we'd probably want to use useLayoutEffect instead.\n\n  ref.current = val;\n  return ref;\n}\n/**\n * Computes the controlled state using a the previous state, props,\n * two reducers, one from downshift and an optional one from the user.\n * Also calls the onChange handlers for state values that have changed.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\n\nfunction useEnhancedReducer(reducer, initialState, props) {\n  var prevStateRef = useRef();\n  var actionRef = useRef();\n  var enhancedReducer = useCallback(function (state, action) {\n    actionRef.current = action;\n    state = getState(state, action.props);\n    var changes = reducer(state, action);\n    var newState = action.props.stateReducer(state, _extends({}, action, {\n      changes: changes\n    }));\n    return newState;\n  }, [reducer]);\n\n  var _useReducer = useReducer(enhancedReducer, initialState),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  var propsRef = useLatestRef(props);\n  var dispatchWithProps = useCallback(function (action) {\n    return dispatch(_extends({\n      props: propsRef.current\n    }, action));\n  }, [propsRef]);\n  var action = actionRef.current;\n  useEffect(function () {\n    if (action && prevStateRef.current && prevStateRef.current !== state) {\n      callOnChangeProps(action, getState(prevStateRef.current, action.props), state);\n    }\n\n    prevStateRef.current = state;\n  }, [state, props, action]);\n  return [state, dispatchWithProps];\n}\n/**\n * Wraps the useEnhancedReducer and applies the controlled prop values before\n * returning the new state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\n\nfunction useControlledReducer(reducer, initialState, props) {\n  var _useEnhancedReducer = useEnhancedReducer(reducer, initialState, props),\n      state = _useEnhancedReducer[0],\n      dispatch = _useEnhancedReducer[1];\n\n  return [getState(state, props), dispatch];\n}\n\nvar defaultProps = {\n  itemToString: itemToString,\n  stateReducer: stateReducer,\n  getA11ySelectionMessage: getA11ySelectionMessage,\n  scrollIntoView: scrollIntoView,\n  circularNavigation: false,\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window\n};\n\nfunction getDefaultValue(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n\n  var defaultPropKey = \"default\" + capitalizeString(propKey);\n\n  if (defaultPropKey in props) {\n    return props[defaultPropKey];\n  }\n\n  return defaultStateValues[propKey];\n}\n\nfunction getInitialValue(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n\n  if (propKey in props) {\n    return props[propKey];\n  }\n\n  var initialPropKey = \"initial\" + capitalizeString(propKey);\n\n  if (initialPropKey in props) {\n    return props[initialPropKey];\n  }\n\n  return getDefaultValue(props, propKey, defaultStateValues);\n}\n\nfunction getInitialState(props) {\n  var selectedItem = getInitialValue(props, 'selectedItem');\n  var isOpen = getInitialValue(props, 'isOpen');\n  var highlightedIndex = getInitialValue(props, 'highlightedIndex');\n  var inputValue = getInitialValue(props, 'inputValue');\n  return {\n    highlightedIndex: highlightedIndex < 0 && selectedItem && isOpen ? props.items.indexOf(selectedItem) : highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nfunction getHighlightedIndexOnOpen(props, state, offset, getItemNodeFromIndex) {\n  var items = props.items,\n      initialHighlightedIndex = props.initialHighlightedIndex,\n      defaultHighlightedIndex = props.defaultHighlightedIndex;\n  var selectedItem = state.selectedItem,\n      highlightedIndex = state.highlightedIndex;\n\n  if (items.length === 0) {\n    return -1;\n  } // initialHighlightedIndex will give value to highlightedIndex on initial state only.\n\n\n  if (initialHighlightedIndex !== undefined && highlightedIndex === initialHighlightedIndex) {\n    return initialHighlightedIndex;\n  }\n\n  if (defaultHighlightedIndex !== undefined) {\n    return defaultHighlightedIndex;\n  }\n\n  if (selectedItem) {\n    if (offset === 0) {\n      return items.indexOf(selectedItem);\n    }\n\n    return getNextWrappingIndex(offset, items.indexOf(selectedItem), items.length, getItemNodeFromIndex, false);\n  }\n\n  if (offset === 0) {\n    return -1;\n  }\n\n  return offset < 0 ? items.length - 1 : 0;\n}\n/**\n * Reuse the movement tracking of mouse and touch events.\n *\n * @param {boolean} isOpen Whether the dropdown is open or not.\n * @param {Array<Object>} downshiftElementRefs Downshift element refs to track movement (toggleButton, menu etc.)\n * @param {Object} environment Environment where component/hook exists.\n * @param {Function} handleBlur Handler on blur from mouse or touch.\n * @returns {Object} Ref containing whether mouseDown or touchMove event is happening\n */\n\n\nfunction useMouseAndTouchTracker(isOpen, downshiftElementRefs, environment, handleBlur) {\n  var mouseAndTouchTrackersRef = useRef({\n    isMouseDown: false,\n    isTouchMove: false\n  });\n  useEffect(function () {\n    // The same strategy for checking if a click occurred inside or outside downsift\n    // as in downshift.js.\n    var onMouseDown = function () {\n      mouseAndTouchTrackersRef.current.isMouseDown = true;\n    };\n\n    var onMouseUp = function (event) {\n      mouseAndTouchTrackersRef.current.isMouseDown = false;\n\n      if (isOpen && !targetWithinDownshift(event.target, downshiftElementRefs.map(function (ref) {\n        return ref.current;\n      }), environment.document)) {\n        handleBlur();\n      }\n    };\n\n    var onTouchStart = function () {\n      mouseAndTouchTrackersRef.current.isTouchMove = false;\n    };\n\n    var onTouchMove = function () {\n      mouseAndTouchTrackersRef.current.isTouchMove = true;\n    };\n\n    var onTouchEnd = function (event) {\n      if (isOpen && !mouseAndTouchTrackersRef.current.isTouchMove && !targetWithinDownshift(event.target, downshiftElementRefs.map(function (ref) {\n        return ref.current;\n      }), environment.document, false)) {\n        handleBlur();\n      }\n    };\n\n    environment.addEventListener('mousedown', onMouseDown);\n    environment.addEventListener('mouseup', onMouseUp);\n    environment.addEventListener('touchstart', onTouchStart);\n    environment.addEventListener('touchmove', onTouchMove);\n    environment.addEventListener('touchend', onTouchEnd);\n    return function () {\n      environment.removeEventListener('mousedown', onMouseDown);\n      environment.removeEventListener('mouseup', onMouseUp);\n      environment.removeEventListener('touchstart', onTouchStart);\n      environment.removeEventListener('touchmove', onTouchMove);\n      environment.removeEventListener('touchend', onTouchEnd);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, environment]);\n  return mouseAndTouchTrackersRef;\n}\n/**\n * Custom hook that checks if getter props are called correctly.\n *\n * @param  {...any} propKeys Getter prop names to be handled.\n * @returns {Function} Setter function called inside getter props to set call information.\n */\n\n\nfunction useGetterPropsCalledChecker() {\n  var isNotProduction = process.env.NODE_ENV !== 'production';\n  var isInitialMountRef = useRef(true);\n\n  for (var _len = arguments.length, propKeys = new Array(_len), _key = 0; _key < _len; _key++) {\n    propKeys[_key] = arguments[_key];\n  }\n\n  var getterPropsCalledRef = useRef(propKeys.reduce(function (acc, propKey) {\n    acc[propKey] = {};\n    return acc;\n  }, {}));\n  useEffect(function () {\n    if (!isNotProduction) {\n      return;\n    }\n\n    Object.keys(getterPropsCalledRef.current).forEach(function (propKey) {\n      var propCallInfo = getterPropsCalledRef.current[propKey];\n\n      if (isInitialMountRef.current) {\n        if (!Object.keys(propCallInfo).length) {\n          // eslint-disable-next-line no-console\n          console.error(\"downshift: You forgot to call the \" + propKey + \" getter function on your component / element.\");\n          return;\n        }\n      }\n\n      var suppressRefError = propCallInfo.suppressRefError,\n          refKey = propCallInfo.refKey,\n          elementRef = propCallInfo.elementRef;\n\n      if ((!elementRef || !elementRef.current) && !suppressRefError) {\n        // eslint-disable-next-line no-console\n        console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from \" + propKey + \" was not applied correctly on your element.\");\n      }\n    });\n    isInitialMountRef.current = false;\n  });\n  var setGetterPropCallInfo = useCallback(function (propKey, suppressRefError, refKey, elementRef) {\n    if (process.env.NODE_ENV !== 'production') {\n      getterPropsCalledRef.current[propKey] = {\n        suppressRefError: suppressRefError,\n        refKey: refKey,\n        elementRef: elementRef\n      };\n    }\n  }, []);\n  return setGetterPropCallInfo;\n}\n\nfunction getItemIndexByCharacterKey(keysSoFar, highlightedIndex, items, itemToStringParam, getItemNodeFromIndex) {\n  var lowerCasedItemStrings = items.map(function (item) {\n    return itemToStringParam(item).toLowerCase();\n  });\n  var lowerCasedKeysSoFar = keysSoFar.toLowerCase();\n\n  var isValid = function (itemString, index) {\n    var element = getItemNodeFromIndex(index);\n    return itemString.startsWith(lowerCasedKeysSoFar) && !(element && element.hasAttribute('disabled'));\n  };\n\n  for (var index = highlightedIndex + 1; index < lowerCasedItemStrings.length; index++) {\n    var itemString = lowerCasedItemStrings[index];\n\n    if (isValid(itemString, index)) {\n      return index;\n    }\n  }\n\n  for (var _index = 0; _index < highlightedIndex; _index++) {\n    var _itemString = lowerCasedItemStrings[_index];\n\n    if (isValid(_itemString, _index)) {\n      return _index;\n    }\n  }\n\n  return highlightedIndex;\n}\n\nvar propTypes = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\nfunction getA11yStatusMessage$1(_ref) {\n  var isOpen = _ref.isOpen,\n      resultCount = _ref.resultCount,\n      previousResultCount = _ref.previousResultCount;\n\n  if (!isOpen) {\n    return '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.\";\n  }\n\n  return '';\n}\n\nvar defaultProps$1 = _extends({}, defaultProps, {\n  getA11yStatusMessage: getA11yStatusMessage$1\n});\n\nvar MenuKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_down__' : 0;\nvar MenuKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_up__' : 1;\nvar MenuKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_escape__' : 2;\nvar MenuKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_home__' : 3;\nvar MenuKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_end__' : 4;\nvar MenuKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_enter__' : 5;\nvar MenuKeyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_space_button__' : 6;\nvar MenuKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_character__' : 7;\nvar MenuBlur = process.env.NODE_ENV !== \"production\" ? '__menu_blur__' : 8;\nvar MenuMouseLeave = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 9;\nvar ItemMouseMove = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 10;\nvar ItemClick = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 11;\nvar ToggleButtonClick = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 12;\nvar ToggleButtonKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_down__' : 13;\nvar ToggleButtonKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_up__' : 14;\nvar ToggleButtonKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_character__' : 15;\nvar FunctionToggleMenu = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 16;\nvar FunctionOpenMenu = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 17;\nvar FunctionCloseMenu = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 18;\nvar FunctionSetHighlightedIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 19;\nvar FunctionSelectItem = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 20;\nvar FunctionSetInputValue = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 21;\nvar FunctionReset = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 22;\nvar stateChangeTypes$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  MenuKeyDownArrowDown: MenuKeyDownArrowDown,\n  MenuKeyDownArrowUp: MenuKeyDownArrowUp,\n  MenuKeyDownEscape: MenuKeyDownEscape,\n  MenuKeyDownHome: MenuKeyDownHome,\n  MenuKeyDownEnd: MenuKeyDownEnd,\n  MenuKeyDownEnter: MenuKeyDownEnter,\n  MenuKeyDownSpaceButton: MenuKeyDownSpaceButton,\n  MenuKeyDownCharacter: MenuKeyDownCharacter,\n  MenuBlur: MenuBlur,\n  MenuMouseLeave: MenuMouseLeave,\n  ItemMouseMove: ItemMouseMove,\n  ItemClick: ItemClick,\n  ToggleButtonClick: ToggleButtonClick,\n  ToggleButtonKeyDownArrowDown: ToggleButtonKeyDownArrowDown,\n  ToggleButtonKeyDownArrowUp: ToggleButtonKeyDownArrowUp,\n  ToggleButtonKeyDownCharacter: ToggleButtonKeyDownCharacter,\n  FunctionToggleMenu: FunctionToggleMenu,\n  FunctionOpenMenu: FunctionOpenMenu,\n  FunctionCloseMenu: FunctionCloseMenu,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex,\n  FunctionSelectItem: FunctionSelectItem,\n  FunctionSetInputValue: FunctionSetInputValue,\n  FunctionReset: FunctionReset\n});\n/* eslint-disable complexity */\n\nfunction downshiftSelectReducer(state, action) {\n  var type = action.type,\n      props = action.props,\n      shiftKey = action.shiftKey;\n  var changes;\n\n  switch (type) {\n    case ItemMouseMove:\n      changes = {\n        highlightedIndex: action.index\n      };\n      break;\n\n    case ItemClick:\n      changes = {\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index]\n      };\n      break;\n\n    case ToggleButtonKeyDownCharacter:\n      {\n        var lowercasedKey = action.key;\n        var inputValue = \"\" + state.inputValue + lowercasedKey;\n        var itemIndex = getItemIndexByCharacterKey(inputValue, state.selectedItem ? props.items.indexOf(state.selectedItem) : -1, props.items, props.itemToString, action.getItemNodeFromIndex);\n        changes = _extends({\n          inputValue: inputValue\n        }, itemIndex >= 0 && {\n          selectedItem: props.items[itemIndex]\n        });\n      }\n      break;\n\n    case ToggleButtonKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n        isOpen: true\n      };\n      break;\n\n    case ToggleButtonKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n        isOpen: true\n      };\n      break;\n\n    case MenuKeyDownEnter:\n    case MenuKeyDownSpaceButton:\n      changes = _extends({\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex')\n      }, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex]\n      });\n      break;\n\n    case MenuKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case MenuKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case MenuKeyDownEscape:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuBlur:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuKeyDownCharacter:\n      {\n        var _lowercasedKey = action.key;\n\n        var _inputValue = \"\" + state.inputValue + _lowercasedKey;\n\n        var highlightedIndex = getItemIndexByCharacterKey(_inputValue, state.highlightedIndex, props.items, props.itemToString, action.getItemNodeFromIndex);\n        changes = _extends({\n          inputValue: _inputValue\n        }, highlightedIndex >= 0 && {\n          highlightedIndex: highlightedIndex\n        });\n      }\n      break;\n\n    case MenuKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n      };\n      break;\n\n    case MenuKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n      };\n      break;\n\n    case MenuMouseLeave:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n\n    case ToggleButtonClick:\n    case FunctionToggleMenu:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionOpenMenu:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionCloseMenu:\n      changes = {\n        isOpen: false\n      };\n      break;\n\n    case FunctionSetHighlightedIndex:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n\n    case FunctionSelectItem:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n\n    case FunctionSetInputValue:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n\n    case FunctionReset:\n      changes = {\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        isOpen: getDefaultValue(props, 'isOpen'),\n        selectedItem: getDefaultValue(props, 'selectedItem'),\n        inputValue: getDefaultValue(props, 'inputValue')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\n\nvar validatePropTypes = process.env.NODE_ENV === 'production' ?\n/* istanbul ignore next */\nnull : getPropTypesValidator(useSelect, propTypes);\nuseSelect.stateChangeTypes = stateChangeTypes$1;\n\nfunction useSelect(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n  /* istanbul ignore else */\n\n\n  if (process.env.NODE_ENV !== 'production') {\n    validatePropTypes(userProps);\n  } // Props defaults and destructuring.\n\n\n  var props = _extends({}, defaultProps$1, userProps);\n\n  var items = props.items,\n      scrollIntoView = props.scrollIntoView,\n      environment = props.environment,\n      initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen,\n      itemToString = props.itemToString,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      getA11yStatusMessage = props.getA11yStatusMessage; // Initial state depending on controlled props.\n\n  var initialState = getInitialState(props);\n\n  var _useControlledReducer = useControlledReducer(downshiftSelectReducer, initialState, props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var isOpen = state.isOpen,\n      highlightedIndex = state.highlightedIndex,\n      selectedItem = state.selectedItem,\n      inputValue = state.inputValue; // Element efs.\n\n  var toggleButtonRef = useRef(null);\n  var menuRef = useRef(null);\n  var itemRefs = useRef();\n  itemRefs.current = {}; // used not to scroll when highlight by mouse.\n\n  var shouldScrollRef = useRef(true); // used not to trigger menu blur action in some scenarios.\n\n  var shouldBlurRef = useRef(true); // used to keep the inputValue clearTimeout object between renders.\n\n  var clearTimeoutRef = useRef(null); // prevent id re-generation between renders.\n\n  var elementIdsRef = useRef(getElementIds(props)); // used to keep track of how many items we had on previous cycle.\n\n  var previousResultCountRef = useRef();\n  var isInitialMountRef = useRef(true); // used for checking when props are moving from controlled to uncontrolled.\n\n  var prevPropsRef = useRef(props); // utility callback to get item element.\n\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  }); // Some utils.\n\n  var getItemNodeFromIndex = function (index) {\n    return itemRefs.current[elementIdsRef.current.getItemId(index)];\n  }; // Effects.\n  // Sets a11y status message on changes in state.\n\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    var previousResultCount = previousResultCountRef.current;\n    updateA11yStatus(function () {\n      return getA11yStatusMessage({\n        isOpen: isOpen,\n        highlightedIndex: highlightedIndex,\n        selectedItem: selectedItem,\n        inputValue: inputValue,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length,\n        itemToString: itemToString,\n        previousResultCount: previousResultCount\n      });\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, highlightedIndex, inputValue, items]); // Sets a11y status message on changes in selectedItem.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    var previousResultCount = previousResultCountRef.current;\n    updateA11yStatus(function () {\n      return getA11ySelectionMessage({\n        isOpen: isOpen,\n        highlightedIndex: highlightedIndex,\n        selectedItem: selectedItem,\n        inputValue: inputValue,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length,\n        itemToString: itemToString,\n        previousResultCount: previousResultCount\n      });\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItem]); // Sets cleanup for the keysSoFar after 500ms.\n\n  useEffect(function () {\n    // init the clean function here as we need access to dispatch.\n    if (isInitialMountRef.current) {\n      clearTimeoutRef.current = debounce(function (outerDispatch) {\n        outerDispatch({\n          type: FunctionSetInputValue,\n          inputValue: ''\n        });\n      }, 500);\n    }\n\n    if (!inputValue) {\n      return;\n    }\n\n    clearTimeoutRef.current(dispatch); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [inputValue]);\n  /* Controls the focus on the menu or the toggle button. */\n\n  useEffect(function () {\n    // Don't focus menu on first render.\n    if (isInitialMountRef.current) {\n      // Unless it was initialised as open.\n      if ((initialIsOpen || defaultIsOpen || isOpen) && menuRef.current) {\n        menuRef.current.focus();\n      }\n\n      return;\n    } // Focus menu on open.\n\n\n    if (isOpen) {\n      // istanbul ignore else\n      if (menuRef.current) {\n        menuRef.current.focus();\n      }\n\n      return;\n    } // Focus toggleButton on close, but not if it was closed with (Shift+)Tab.\n\n\n    if (environment.document.activeElement === menuRef.current) {\n      // istanbul ignore else\n      if (toggleButtonRef.current) {\n        shouldBlurRef.current = false;\n        toggleButtonRef.current.focus();\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [isOpen]); // Scroll on highlighted item if change comes from keyboard.\n\n  useEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !Object.keys(itemRefs.current).length) {\n      return;\n    }\n\n    if (shouldScrollRef.current === false) {\n      shouldScrollRef.current = true;\n    } else {\n      scrollIntoView(getItemNodeFromIndex(highlightedIndex), menuRef.current);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [highlightedIndex]);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    previousResultCountRef.current = items.length;\n  });\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    validateControlledUnchanged(state, prevPropsRef.current, props);\n    prevPropsRef.current = props;\n  }, [state, props]); // Add mouse/touch events to document.\n\n  var mouseAndTouchTrackersRef = useMouseAndTouchTracker(isOpen, [menuRef, toggleButtonRef], environment, function () {\n    dispatch({\n      type: MenuBlur\n    });\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getMenuProps', 'getToggleButtonProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []); // Event handler functions.\n\n  var toggleButtonKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowDown,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowUp,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      }\n    };\n  }, [dispatch]);\n  var menuKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownArrowDown,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownArrowUp,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      Home: function Home(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownHome,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      End: function End(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownEnd,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Escape: function Escape() {\n        dispatch({\n          type: MenuKeyDownEscape\n        });\n      },\n      Enter: function Enter(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownEnter\n        });\n      },\n      ' ': function _(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownSpaceButton\n        });\n      }\n    };\n  }, [dispatch]); // Action functions.\n\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue,\n      inputValue: newInputValue\n    });\n  }, [dispatch]); // Getter functions.\n\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIdsRef.current.labelId,\n      htmlFor: elementIdsRef.current.toggleButtonId\n    }, labelProps);\n  }, []);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n\n    var _ref = _temp === void 0 ? {} : _temp,\n        onMouseLeave = _ref.onMouseLeave,\n        _ref$refKey = _ref.refKey,\n        refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n        onKeyDown = _ref.onKeyDown,\n        onBlur = _ref.onBlur,\n        ref = _ref.ref,\n        rest = _objectWithoutPropertiesLoose(_ref, [\"onMouseLeave\", \"refKey\", \"onKeyDown\", \"onBlur\", \"ref\"]);\n\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n        _ref2$suppressRefErro = _ref2.suppressRefError,\n        suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n    var latestState = latest.current.state;\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIdsRef.current.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = elementIdsRef.current.labelId, _extends2.tabIndex = -1, _extends2), latestState.isOpen && latestState.highlightedIndex > -1 && {\n      'aria-activedescendant': elementIdsRef.current.getItemId(latestState.highlightedIndex)\n    }, {\n      onMouseLeave: callAllEventHandlers(onMouseLeave, function menuHandleMouseLeave() {\n        dispatch({\n          type: MenuMouseLeave\n        });\n      }),\n      onKeyDown: callAllEventHandlers(onKeyDown, function menuHandleKeyDown(event) {\n        var key = normalizeArrowKey(event);\n\n        if (key && menuKeyDownHandlers[key]) {\n          menuKeyDownHandlers[key](event);\n        } else if (isAcceptedCharacterKey(key)) {\n          dispatch({\n            type: MenuKeyDownCharacter,\n            key: key,\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        }\n      }),\n      onBlur: callAllEventHandlers(onBlur, function menuHandleBlur() {\n        // if the blur was a result of selection, we don't trigger this action.\n        if (shouldBlurRef.current === false) {\n          shouldBlurRef.current = true;\n          return;\n        }\n\n        var shouldBlur = !mouseAndTouchTrackersRef.current.isMouseDown;\n        /* istanbul ignore else */\n\n        if (shouldBlur) {\n          dispatch({\n            type: MenuBlur\n          });\n        }\n      })\n    }, rest);\n  }, [dispatch, latest, menuKeyDownHandlers, mouseAndTouchTrackersRef, setGetterPropCallInfo]);\n  var getToggleButtonProps = useCallback(function (_temp3, _temp4) {\n    var _extends3;\n\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n        onClick = _ref3.onClick,\n        onKeyDown = _ref3.onKeyDown,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onKeyDown\", \"refKey\", \"ref\"]);\n\n    var _ref4 = _temp4 === void 0 ? {} : _temp4,\n        _ref4$suppressRefErro = _ref4.suppressRefError,\n        suppressRefError = _ref4$suppressRefErro === void 0 ? false : _ref4$suppressRefErro;\n\n    var toggleButtonHandleClick = function () {\n      dispatch({\n        type: ToggleButtonClick\n      });\n    };\n\n    var toggleButtonHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && toggleButtonKeyDownHandlers[key]) {\n        toggleButtonKeyDownHandlers[key](event);\n      } else if (isAcceptedCharacterKey(key)) {\n        dispatch({\n          type: ToggleButtonKeyDownCharacter,\n          key: key,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      }\n    };\n\n    var toggleProps = _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends3.id = elementIdsRef.current.toggleButtonId, _extends3['aria-haspopup'] = 'listbox', _extends3['aria-expanded'] = latest.current.state.isOpen, _extends3['aria-labelledby'] = elementIdsRef.current.labelId + \" \" + elementIdsRef.current.toggleButtonId, _extends3), rest);\n\n    if (!rest.disabled) {\n      toggleProps.onClick = callAllEventHandlers(onClick, toggleButtonHandleClick);\n      toggleProps.onKeyDown = callAllEventHandlers(onKeyDown, toggleButtonHandleKeyDown);\n    }\n\n    setGetterPropCallInfo('getToggleButtonProps', suppressRefError, refKey, toggleButtonRef);\n    return toggleProps;\n  }, [dispatch, latest, toggleButtonKeyDownHandlers, setGetterPropCallInfo]);\n  var getItemProps = useCallback(function (_temp5) {\n    var _extends4;\n\n    var _ref5 = _temp5 === void 0 ? {} : _temp5,\n        item = _ref5.item,\n        index = _ref5.index,\n        onMouseMove = _ref5.onMouseMove,\n        onClick = _ref5.onClick,\n        _ref5$refKey = _ref5.refKey,\n        refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n        ref = _ref5.ref,\n        rest = _objectWithoutPropertiesLoose(_ref5, [\"item\", \"index\", \"onMouseMove\", \"onClick\", \"refKey\", \"ref\"]);\n\n    var _latest$current = latest.current,\n        latestState = _latest$current.state,\n        latestProps = _latest$current.props;\n\n    var itemHandleMouseMove = function () {\n      if (index === latestState.highlightedIndex) {\n        return;\n      }\n\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove,\n        index: index\n      });\n    };\n\n    var itemHandleClick = function () {\n      dispatch({\n        type: ItemClick,\n        index: index\n      });\n    };\n\n    var itemIndex = getItemIndex(index, item, latestProps.items);\n\n    if (itemIndex < 0) {\n      throw new Error('Pass either item or item index in getItemProps!');\n    }\n\n    var itemProps = _extends((_extends4 = {\n      role: 'option',\n      'aria-selected': \"\" + (itemIndex === latestState.highlightedIndex),\n      id: elementIdsRef.current.getItemId(itemIndex)\n    }, _extends4[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIdsRef.current.getItemId(itemIndex)] = itemNode;\n      }\n    }), _extends4), rest);\n\n    if (!rest.disabled) {\n      itemProps.onMouseMove = callAllEventHandlers(onMouseMove, itemHandleMouseMove);\n      itemProps.onClick = callAllEventHandlers(onClick, itemHandleClick);\n    }\n\n    return itemProps;\n  }, [dispatch, latest]);\n  return {\n    // prop getters.\n    getToggleButtonProps: getToggleButtonProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getItemProps: getItemProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    selectItem: selectItem,\n    reset: reset,\n    setInputValue: setInputValue,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar InputKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_down__' : 0;\nvar InputKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_up__' : 1;\nvar InputKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__input_keydown_escape__' : 2;\nvar InputKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__input_keydown_home__' : 3;\nvar InputKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__input_keydown_end__' : 4;\nvar InputKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__input_keydown_enter__' : 5;\nvar InputChange = process.env.NODE_ENV !== \"production\" ? '__input_change__' : 6;\nvar InputBlur = process.env.NODE_ENV !== \"production\" ? '__input_blur__' : 7;\nvar MenuMouseLeave$1 = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 8;\nvar ItemMouseMove$1 = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 9;\nvar ItemClick$1 = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 10;\nvar ToggleButtonClick$1 = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 11;\nvar FunctionToggleMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 12;\nvar FunctionOpenMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 13;\nvar FunctionCloseMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 14;\nvar FunctionSetHighlightedIndex$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 15;\nvar FunctionSelectItem$1 = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 16;\nvar FunctionSetInputValue$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 17;\nvar FunctionReset$1 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 18;\nvar ControlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__controlled_prop_updated_selected_item__' : 19;\nvar stateChangeTypes$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  InputKeyDownArrowDown: InputKeyDownArrowDown,\n  InputKeyDownArrowUp: InputKeyDownArrowUp,\n  InputKeyDownEscape: InputKeyDownEscape,\n  InputKeyDownHome: InputKeyDownHome,\n  InputKeyDownEnd: InputKeyDownEnd,\n  InputKeyDownEnter: InputKeyDownEnter,\n  InputChange: InputChange,\n  InputBlur: InputBlur,\n  MenuMouseLeave: MenuMouseLeave$1,\n  ItemMouseMove: ItemMouseMove$1,\n  ItemClick: ItemClick$1,\n  ToggleButtonClick: ToggleButtonClick$1,\n  FunctionToggleMenu: FunctionToggleMenu$1,\n  FunctionOpenMenu: FunctionOpenMenu$1,\n  FunctionCloseMenu: FunctionCloseMenu$1,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex$1,\n  FunctionSelectItem: FunctionSelectItem$1,\n  FunctionSetInputValue: FunctionSetInputValue$1,\n  FunctionReset: FunctionReset$1,\n  ControlledPropUpdatedSelectedItem: ControlledPropUpdatedSelectedItem\n});\n\nfunction getElementIds$1(_ref) {\n  var id = _ref.id,\n      inputId = _ref.inputId,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"id\", \"inputId\"]);\n\n  var uniqueId = id === undefined ? \"downshift-\" + generateId() : id;\n  return _extends({\n    inputId: inputId || uniqueId + \"-input\"\n  }, getElementIds(_extends({\n    id: id\n  }, rest)));\n}\n\nfunction getInitialState$1(props) {\n  var initialState = getInitialState(props);\n  var selectedItem = initialState.selectedItem;\n  var inputValue = initialState.inputValue;\n\n  if (inputValue === '' && selectedItem && props.defaultInputValue === undefined && props.initialInputValue === undefined && props.inputValue === undefined) {\n    inputValue = props.itemToString(selectedItem);\n  }\n\n  return _extends({}, initialState, {\n    inputValue: inputValue\n  });\n}\n\nvar propTypes$1 = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  inputValue: PropTypes.string,\n  defaultInputValue: PropTypes.string,\n  initialInputValue: PropTypes.string,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  inputId: PropTypes.string,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n/**\n * The useCombobox version of useControlledReducer, which also\n * checks if the controlled prop selectedItem changed between\n * renders. If so, it will also update inputValue with its\n * string equivalent. It uses the common useEnhancedReducer to\n * compute the rest of the state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\nfunction useControlledReducer$1(reducer, initialState, props) {\n  var previousSelectedItemRef = useRef();\n\n  var _useEnhancedReducer = useEnhancedReducer(reducer, initialState, props),\n      state = _useEnhancedReducer[0],\n      dispatch = _useEnhancedReducer[1]; // ToDo: if needed, make same approach as selectedItemChanged from Downshift.\n\n\n  useEffect(function () {\n    if (isControlledProp(props, 'selectedItem')) {\n      if (previousSelectedItemRef.current !== props.selectedItem) {\n        dispatch({\n          type: ControlledPropUpdatedSelectedItem,\n          inputValue: props.itemToString(props.selectedItem)\n        });\n      }\n\n      previousSelectedItemRef.current = state.selectedItem === previousSelectedItemRef.current ? props.selectedItem : state.selectedItem;\n    }\n  });\n  return [getState(state, props), dispatch];\n}\n\nvar defaultProps$2 = _extends({}, defaultProps, {\n  getA11yStatusMessage: getA11yStatusMessage,\n  circularNavigation: true\n});\n/* eslint-disable complexity */\n\n\nfunction downshiftUseComboboxReducer(state, action) {\n  var type = action.type,\n      props = action.props,\n      shiftKey = action.shiftKey;\n  var changes;\n\n  switch (type) {\n    case ItemMouseMove$1:\n      changes = {\n        highlightedIndex: action.index\n      };\n      break;\n\n    case ItemClick$1:\n      changes = {\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index],\n        inputValue: props.itemToString(props.items[action.index])\n      };\n      break;\n\n    case InputKeyDownArrowDown:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n        };\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n          isOpen: true\n        };\n      }\n\n      break;\n\n    case InputKeyDownArrowUp:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n        };\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n          isOpen: true\n        };\n      }\n\n      break;\n\n    case InputKeyDownEnter:\n      changes = _extends({}, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex],\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        inputValue: props.itemToString(props.items[state.highlightedIndex])\n      });\n      break;\n\n    case InputKeyDownEscape:\n      changes = {\n        isOpen: false,\n        selectedItem: null,\n        highlightedIndex: -1,\n        inputValue: ''\n      };\n      break;\n\n    case InputKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputBlur:\n      changes = _extends({\n        isOpen: false\n      }, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex],\n        inputValue: props.itemToString(props.items[state.highlightedIndex]),\n        highlightedIndex: -1\n      });\n      break;\n\n    case InputChange:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        inputValue: action.inputValue\n      };\n      break;\n\n    case MenuMouseLeave$1:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n\n    case ToggleButtonClick$1:\n    case FunctionToggleMenu$1:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionOpenMenu$1:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionCloseMenu$1:\n      changes = {\n        isOpen: false\n      };\n      break;\n\n    case FunctionSetHighlightedIndex$1:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n\n    case FunctionSelectItem$1:\n      changes = {\n        selectedItem: action.selectedItem,\n        inputValue: props.itemToString(action.selectedItem)\n      };\n      break;\n\n    case ControlledPropUpdatedSelectedItem:\n    case FunctionSetInputValue$1:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n\n    case FunctionReset$1:\n      changes = {\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        isOpen: getDefaultValue(props, 'isOpen'),\n        selectedItem: getDefaultValue(props, 'selectedItem'),\n        inputValue: getDefaultValue(props, 'inputValue')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\n\nvar validatePropTypes$1 = process.env.NODE_ENV === 'production' ?\n/* istanbul ignore next */\nnull : getPropTypesValidator(useCombobox, propTypes$1);\nuseCombobox.stateChangeTypes = stateChangeTypes$2;\n\nfunction useCombobox(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n  /* istanbul ignore else */\n\n\n  if (process.env.NODE_ENV !== 'production') {\n    validatePropTypes$1(userProps);\n  } // Props defaults and destructuring.\n\n\n  var props = _extends({}, defaultProps$2, userProps);\n\n  var initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen,\n      items = props.items,\n      scrollIntoView = props.scrollIntoView,\n      environment = props.environment,\n      getA11yStatusMessage = props.getA11yStatusMessage,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      itemToString = props.itemToString; // Initial state depending on controlled props.\n\n  var initialState = getInitialState$1(props);\n\n  var _useControlledReducer = useControlledReducer$1(downshiftUseComboboxReducer, initialState, props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var isOpen = state.isOpen,\n      highlightedIndex = state.highlightedIndex,\n      selectedItem = state.selectedItem,\n      inputValue = state.inputValue; // Element refs.\n\n  var menuRef = useRef(null);\n  var itemRefs = useRef();\n  var inputRef = useRef(null);\n  var toggleButtonRef = useRef(null);\n  var comboboxRef = useRef(null);\n  itemRefs.current = {}; // used not to scroll on highlight by mouse.\n\n  var shouldScrollRef = useRef(true);\n  var isInitialMountRef = useRef(true); // prevent id re-generation between renders.\n\n  var elementIdsRef = useRef(getElementIds$1(props)); // used to keep track of how many items we had on previous cycle.\n\n  var previousResultCountRef = useRef(); // used for checking when props are moving from controlled to uncontrolled.\n\n  var prevPropsRef = useRef(props); // utility callback to get item element.\n\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n\n  var getItemNodeFromIndex = function (index) {\n    return itemRefs.current[elementIdsRef.current.getItemId(index)];\n  }; // Effects.\n  // Sets a11y status message on changes in state.\n\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    var previousResultCount = previousResultCountRef.current;\n    updateA11yStatus(function () {\n      return getA11yStatusMessage({\n        isOpen: isOpen,\n        highlightedIndex: highlightedIndex,\n        selectedItem: selectedItem,\n        inputValue: inputValue,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length,\n        itemToString: itemToString,\n        previousResultCount: previousResultCount\n      });\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, highlightedIndex, inputValue, items]); // Sets a11y status message on changes in selectedItem.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    var previousResultCount = previousResultCountRef.current;\n    updateA11yStatus(function () {\n      return getA11ySelectionMessage({\n        isOpen: isOpen,\n        highlightedIndex: highlightedIndex,\n        selectedItem: selectedItem,\n        inputValue: inputValue,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length,\n        itemToString: itemToString,\n        previousResultCount: previousResultCount\n      });\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItem]); // Scroll on highlighted item if change comes from keyboard.\n\n  useEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !Object.keys(itemRefs.current).length) {\n      return;\n    }\n\n    if (shouldScrollRef.current === false) {\n      shouldScrollRef.current = true;\n    } else {\n      scrollIntoView(getItemNodeFromIndex(highlightedIndex), menuRef.current);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [highlightedIndex]); // Controls the focus on the menu or the toggle button.\n\n  useEffect(function () {\n    // Don't focus menu on first render.\n    if (isInitialMountRef.current) {\n      // Unless it was initialised as open.\n      if (initialIsOpen || defaultIsOpen || isOpen) {\n        if (inputRef.current) {\n          inputRef.current.focus();\n        }\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [isOpen]);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    previousResultCountRef.current = items.length;\n  });\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    validateControlledUnchanged(state, prevPropsRef.current, props);\n    prevPropsRef.current = props;\n  }, [state, props]); // Add mouse/touch events to document.\n\n  var mouseAndTouchTrackersRef = useMouseAndTouchTracker(isOpen, [comboboxRef, menuRef, toggleButtonRef], environment, function () {\n    dispatch({\n      type: InputBlur\n    });\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getInputProps', 'getComboboxProps', 'getMenuProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []);\n  /* Event handler functions */\n\n  var inputKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowDown,\n          shiftKey: event.shiftKey,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowUp,\n          shiftKey: event.shiftKey,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Home: function Home(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownHome,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      End: function End(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnd,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Escape: function Escape() {\n        dispatch({\n          type: InputKeyDownEscape\n        });\n      },\n      Enter: function Enter(event) {\n        // if IME composing, wait for next Enter keydown event.\n        if (event.which === 229) {\n          return;\n        }\n\n        var latestState = latest.current.state;\n\n        if (latestState.isOpen && latestState.highlightedIndex > -1) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownEnter,\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        }\n      }\n    };\n  }, [dispatch, latest]); // Getter props.\n\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIdsRef.current.labelId,\n      htmlFor: elementIdsRef.current.inputId\n    }, labelProps);\n  }, []);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n\n    var _ref = _temp === void 0 ? {} : _temp,\n        onMouseLeave = _ref.onMouseLeave,\n        _ref$refKey = _ref.refKey,\n        refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n        ref = _ref.ref,\n        rest = _objectWithoutPropertiesLoose(_ref, [\"onMouseLeave\", \"refKey\", \"ref\"]);\n\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n        _ref2$suppressRefErro = _ref2.suppressRefError,\n        suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIdsRef.current.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = elementIdsRef.current.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, function () {\n      dispatch({\n        type: MenuMouseLeave$1\n      });\n    }), _extends2), rest);\n  }, [dispatch, setGetterPropCallInfo]);\n  var getItemProps = useCallback(function (_temp3) {\n    var _extends3, _ref4;\n\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n        item = _ref3.item,\n        index = _ref3.index,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        onMouseMove = _ref3.onMouseMove,\n        onClick = _ref3.onClick,\n        onPress = _ref3.onPress,\n        rest = _objectWithoutPropertiesLoose(_ref3, [\"item\", \"index\", \"refKey\", \"ref\", \"onMouseMove\", \"onClick\", \"onPress\"]);\n\n    var _latest$current = latest.current,\n        latestProps = _latest$current.props,\n        latestState = _latest$current.state;\n    var itemIndex = getItemIndex(index, item, latestProps.items);\n\n    if (itemIndex < 0) {\n      throw new Error('Pass either item or item index in getItemProps!');\n    }\n\n    var onSelectKey = 'onClick';\n    var customClickHandler = onClick;\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIdsRef.current.getItemId(itemIndex)] = itemNode;\n      }\n    }), _extends3.role = 'option', _extends3['aria-selected'] = \"\" + (itemIndex === latestState.highlightedIndex), _extends3.id = elementIdsRef.current.getItemId(itemIndex), _extends3), !rest.disabled && (_ref4 = {\n      onMouseMove: callAllEventHandlers(onMouseMove, function itemHandleMouseMove() {\n        if (index === latestState.highlightedIndex) {\n          return;\n        }\n\n        shouldScrollRef.current = false;\n        dispatch({\n          type: ItemMouseMove$1,\n          index: index\n        });\n      })\n    }, _ref4[onSelectKey] = callAllEventHandlers(customClickHandler, function itemHandleClick() {\n      dispatch({\n        type: ItemClick$1,\n        index: index\n      });\n\n      if (inputRef.current) {\n        inputRef.current.focus();\n      }\n    }), _ref4), rest);\n  }, [dispatch, latest]);\n  var getToggleButtonProps = useCallback(function (_temp4) {\n    var _extends4;\n\n    var _ref5 = _temp4 === void 0 ? {} : _temp4,\n        onClick = _ref5.onClick,\n        onPress = _ref5.onPress,\n        _ref5$refKey = _ref5.refKey,\n        refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n        ref = _ref5.ref,\n        rest = _objectWithoutPropertiesLoose(_ref5, [\"onClick\", \"onPress\", \"refKey\", \"ref\"]);\n\n    var toggleButtonHandleClick = function () {\n      dispatch({\n        type: ToggleButtonClick$1\n      });\n\n      if (!latest.current.state.isOpen && inputRef.current) {\n        inputRef.current.focus();\n      }\n    };\n\n    return _extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends4.id = elementIdsRef.current.toggleButtonId, _extends4.tabIndex = -1, _extends4), !rest.disabled && _extends({}, {\n      onClick: callAllEventHandlers(onClick, toggleButtonHandleClick)\n    }), rest);\n  }, [dispatch, latest]);\n  var getInputProps = useCallback(function (_temp5, _temp6) {\n    var _extends5;\n\n    var _ref6 = _temp5 === void 0 ? {} : _temp5,\n        onKeyDown = _ref6.onKeyDown,\n        onChange = _ref6.onChange,\n        onInput = _ref6.onInput,\n        onBlur = _ref6.onBlur,\n        onChangeText = _ref6.onChangeText,\n        _ref6$refKey = _ref6.refKey,\n        refKey = _ref6$refKey === void 0 ? 'ref' : _ref6$refKey,\n        ref = _ref6.ref,\n        rest = _objectWithoutPropertiesLoose(_ref6, [\"onKeyDown\", \"onChange\", \"onInput\", \"onBlur\", \"onChangeText\", \"refKey\", \"ref\"]);\n\n    var _ref7 = _temp6 === void 0 ? {} : _temp6,\n        _ref7$suppressRefErro = _ref7.suppressRefError,\n        suppressRefError = _ref7$suppressRefErro === void 0 ? false : _ref7$suppressRefErro;\n\n    setGetterPropCallInfo('getInputProps', suppressRefError, refKey, inputRef);\n    var latestState = latest.current.state;\n\n    var inputHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && inputKeyDownHandlers[key]) {\n        inputKeyDownHandlers[key](event);\n      }\n    };\n\n    var inputHandleChange = function (event) {\n      dispatch({\n        type: InputChange,\n        inputValue: event.target.value\n      });\n    };\n\n    var inputHandleBlur = function () {\n      /* istanbul ignore else */\n      if (!mouseAndTouchTrackersRef.current.isMouseDown) {\n        dispatch({\n          type: InputBlur\n        });\n      }\n    };\n    /* istanbul ignore next (preact) */\n\n\n    var onChangeKey = 'onChange';\n    var eventHandlers = {};\n\n    if (!rest.disabled) {\n      var _eventHandlers;\n\n      eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, inputHandleBlur), _eventHandlers);\n    }\n    /* istanbul ignore if (react-native) */\n\n\n    return _extends((_extends5 = {}, _extends5[refKey] = handleRefs(ref, function (inputNode) {\n      inputRef.current = inputNode;\n    }), _extends5.id = elementIdsRef.current.inputId, _extends5['aria-autocomplete'] = 'list', _extends5['aria-controls'] = elementIdsRef.current.menuId, _extends5), latestState.isOpen && latestState.highlightedIndex > -1 && {\n      'aria-activedescendant': elementIdsRef.current.getItemId(latestState.highlightedIndex)\n    }, {\n      'aria-labelledby': elementIdsRef.current.labelId,\n      // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n      // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n      autoComplete: 'off',\n      value: latestState.inputValue\n    }, eventHandlers, rest);\n  }, [dispatch, inputKeyDownHandlers, latest, mouseAndTouchTrackersRef, setGetterPropCallInfo]);\n  var getComboboxProps = useCallback(function (_temp7, _temp8) {\n    var _extends6;\n\n    var _ref8 = _temp7 === void 0 ? {} : _temp7,\n        _ref8$refKey = _ref8.refKey,\n        refKey = _ref8$refKey === void 0 ? 'ref' : _ref8$refKey,\n        ref = _ref8.ref,\n        rest = _objectWithoutPropertiesLoose(_ref8, [\"refKey\", \"ref\"]);\n\n    var _ref9 = _temp8 === void 0 ? {} : _temp8,\n        _ref9$suppressRefErro = _ref9.suppressRefError,\n        suppressRefError = _ref9$suppressRefErro === void 0 ? false : _ref9$suppressRefErro;\n\n    setGetterPropCallInfo('getComboboxProps', suppressRefError, refKey, comboboxRef);\n    return _extends((_extends6 = {}, _extends6[refKey] = handleRefs(ref, function (comboboxNode) {\n      comboboxRef.current = comboboxNode;\n    }), _extends6.role = 'combobox', _extends6['aria-haspopup'] = 'listbox', _extends6['aria-owns'] = elementIdsRef.current.menuId, _extends6['aria-expanded'] = latest.current.state.isOpen, _extends6), rest);\n  }, [latest, setGetterPropCallInfo]); // returns\n\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu$1\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu$1\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu$1\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex$1,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem$1,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue$1,\n      inputValue: newInputValue\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$1\n    });\n  }, [dispatch]);\n  return {\n    // prop getters.\n    getItemProps: getItemProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getInputProps: getInputProps,\n    getComboboxProps: getComboboxProps,\n    getToggleButtonProps: getToggleButtonProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    setInputValue: setInputValue,\n    selectItem: selectItem,\n    reset: reset,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar defaultStateValues = {\n  activeIndex: -1,\n  selectedItems: []\n};\n/**\n * Returns the initial value for a state key in the following order:\n * 1. controlled prop, 2. initial prop, 3. default prop, 4. default\n * value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\n\nfunction getInitialValue$1(props, propKey) {\n  return getInitialValue(props, propKey, defaultStateValues);\n}\n/**\n * Returns the default value for a state key in the following order:\n * 1. controlled prop, 2. default prop, 3. default value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\n\n\nfunction getDefaultValue$1(props, propKey) {\n  return getDefaultValue(props, propKey, defaultStateValues);\n}\n/**\n * Gets the initial state based on the provided props. It uses initial, default\n * and controlled props related to state in order to compute the initial value.\n *\n * @param {Object} props Props passed to the hook.\n * @returns {Object} The initial state.\n */\n\n\nfunction getInitialState$2(props) {\n  var activeIndex = getInitialValue$1(props, 'activeIndex');\n  var selectedItems = getInitialValue$1(props, 'selectedItems');\n  return {\n    activeIndex: activeIndex,\n    selectedItems: selectedItems\n  };\n}\n/**\n * Returns true if dropdown keydown operation is permitted. Should not be\n * allowed on keydown with modifier keys (ctrl, alt, shift, meta), on\n * input element with text content that is either highlighted or selection\n * cursor is not at the starting position.\n *\n * @param {KeyboardEvent} event The event from keydown.\n * @returns {boolean} Whether the operation is allowed.\n */\n\n\nfunction isKeyDownOperationPermitted(event) {\n  if (event.shiftKey || event.metaKey || event.ctrlKey || event.altKey) {\n    return false;\n  }\n\n  var element = event.target;\n\n  if (element instanceof HTMLInputElement && // if element is a text input\n  element.value !== '' && ( // and we have text in it\n  // and cursor is either not at the start or is currently highlighting text.\n  element.selectionStart !== 0 || element.selectionEnd !== 0)) {\n    return false;\n  }\n\n  return true;\n}\n/**\n * Returns a message to be added to aria-live region when item is removed.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\n\n\nfunction getA11yRemovalMessage(selectionParameters) {\n  var removedSelectedItem = selectionParameters.removedSelectedItem,\n      itemToStringLocal = selectionParameters.itemToString;\n  return itemToStringLocal(removedSelectedItem) + \" has been removed.\";\n}\n\nvar propTypes$2 = {\n  selectedItems: PropTypes.array,\n  initialSelectedItems: PropTypes.array,\n  defaultSelectedItems: PropTypes.array,\n  itemToString: PropTypes.func,\n  getA11yRemovalMessage: PropTypes.func,\n  stateReducer: PropTypes.func,\n  activeIndex: PropTypes.number,\n  initialActiveIndex: PropTypes.number,\n  defaultActiveIndex: PropTypes.number,\n  onActiveIndexChange: PropTypes.func,\n  onSelectedItemsChange: PropTypes.func,\n  keyNavigationNext: PropTypes.string,\n  keyNavigationPrevious: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\nvar defaultProps$3 = {\n  itemToString: defaultProps.itemToString,\n  stateReducer: defaultProps.stateReducer,\n  environment: defaultProps.environment,\n  getA11yRemovalMessage: getA11yRemovalMessage,\n  keyNavigationNext: 'ArrowRight',\n  keyNavigationPrevious: 'ArrowLeft'\n};\nvar SelectedItemClick = process.env.NODE_ENV !== \"production\" ? '__selected_item_click__' : 0;\nvar SelectedItemKeyDownDelete = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_delete__' : 1;\nvar SelectedItemKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_backspace__' : 2;\nvar SelectedItemKeyDownNavigationNext = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_next__' : 3;\nvar SelectedItemKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_previous__' : 4;\nvar DropdownKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_navigation_previous__' : 5;\nvar DropdownKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_backspace__' : 6;\nvar DropdownClick = process.env.NODE_ENV !== \"production\" ? '__dropdown_click__' : 7;\nvar FunctionAddSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_add_selected_item__' : 8;\nvar FunctionRemoveSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_remove_selected_item__' : 9;\nvar FunctionSetSelectedItems = process.env.NODE_ENV !== \"production\" ? '__function_set_selected_items__' : 10;\nvar FunctionSetActiveIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_active_index__' : 11;\nvar FunctionReset$2 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 12;\nvar stateChangeTypes$3 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  SelectedItemClick: SelectedItemClick,\n  SelectedItemKeyDownDelete: SelectedItemKeyDownDelete,\n  SelectedItemKeyDownBackspace: SelectedItemKeyDownBackspace,\n  SelectedItemKeyDownNavigationNext: SelectedItemKeyDownNavigationNext,\n  SelectedItemKeyDownNavigationPrevious: SelectedItemKeyDownNavigationPrevious,\n  DropdownKeyDownNavigationPrevious: DropdownKeyDownNavigationPrevious,\n  DropdownKeyDownBackspace: DropdownKeyDownBackspace,\n  DropdownClick: DropdownClick,\n  FunctionAddSelectedItem: FunctionAddSelectedItem,\n  FunctionRemoveSelectedItem: FunctionRemoveSelectedItem,\n  FunctionSetSelectedItems: FunctionSetSelectedItems,\n  FunctionSetActiveIndex: FunctionSetActiveIndex,\n  FunctionReset: FunctionReset$2\n});\n/* eslint-disable complexity */\n\nfunction downshiftMultipleSelectionReducer(state, action) {\n  var type = action.type,\n      index = action.index,\n      props = action.props,\n      selectedItem = action.selectedItem;\n  var activeIndex = state.activeIndex,\n      selectedItems = state.selectedItems;\n  var changes;\n\n  switch (type) {\n    case SelectedItemClick:\n      changes = {\n        activeIndex: index\n      };\n      break;\n\n    case SelectedItemKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: activeIndex - 1 < 0 ? 0 : activeIndex - 1\n      };\n      break;\n\n    case SelectedItemKeyDownNavigationNext:\n      changes = {\n        activeIndex: activeIndex + 1 >= selectedItems.length ? -1 : activeIndex + 1\n      };\n      break;\n\n    case SelectedItemKeyDownBackspace:\n    case SelectedItemKeyDownDelete:\n      {\n        var newActiveIndex = activeIndex;\n\n        if (selectedItems.length === 1) {\n          newActiveIndex = -1;\n        } else if (activeIndex === selectedItems.length - 1) {\n          newActiveIndex = selectedItems.length - 2;\n        }\n\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, activeIndex), selectedItems.slice(activeIndex + 1))\n        }, {\n          activeIndex: newActiveIndex\n        });\n        break;\n      }\n\n    case DropdownKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: selectedItems.length - 1\n      };\n      break;\n\n    case DropdownKeyDownBackspace:\n      changes = {\n        selectedItems: selectedItems.slice(0, selectedItems.length - 1)\n      };\n      break;\n\n    case FunctionAddSelectedItem:\n      changes = {\n        selectedItems: [].concat(selectedItems, [selectedItem])\n      };\n      break;\n\n    case DropdownClick:\n      changes = {\n        activeIndex: -1\n      };\n      break;\n\n    case FunctionRemoveSelectedItem:\n      {\n        var _newActiveIndex = activeIndex;\n        var selectedItemIndex = selectedItems.indexOf(selectedItem);\n\n        if (selectedItems.length === 1) {\n          _newActiveIndex = -1;\n        } else if (selectedItemIndex === selectedItems.length - 1) {\n          _newActiveIndex = selectedItems.length - 2;\n        }\n\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, selectedItemIndex), selectedItems.slice(selectedItemIndex + 1))\n        }, {\n          activeIndex: _newActiveIndex\n        });\n        break;\n      }\n\n    case FunctionSetSelectedItems:\n      {\n        var newSelectedItems = action.selectedItems;\n        changes = {\n          selectedItems: newSelectedItems\n        };\n        break;\n      }\n\n    case FunctionSetActiveIndex:\n      {\n        var _newActiveIndex2 = action.activeIndex;\n        changes = {\n          activeIndex: _newActiveIndex2\n        };\n        break;\n      }\n\n    case FunctionReset$2:\n      changes = {\n        activeIndex: getDefaultValue$1(props, 'activeIndex'),\n        selectedItems: getDefaultValue$1(props, 'selectedItems')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, changes);\n}\n\nuseMultipleSelection.stateChangeTypes = stateChangeTypes$3;\n\nfunction useMultipleSelection(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  } // Props defaults and destructuring.\n\n\n  var props = _extends({}, defaultProps$3, userProps);\n\n  var getA11yRemovalMessage = props.getA11yRemovalMessage,\n      itemToString = props.itemToString,\n      environment = props.environment,\n      keyNavigationNext = props.keyNavigationNext,\n      keyNavigationPrevious = props.keyNavigationPrevious; // Reducer init.\n\n  var _useControlledReducer = useControlledReducer(downshiftMultipleSelectionReducer, getInitialState$2(props), props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var activeIndex = state.activeIndex,\n      selectedItems = state.selectedItems; // Refs.\n\n  var isInitialMountRef = useRef(true);\n  var dropdownRef = useRef(null);\n  var previousSelectedItemsRef = useRef(selectedItems);\n  var selectedItemRefs = useRef();\n  selectedItemRefs.current = []; // used for checking when props are moving from controlled to uncontrolled.\n\n  var prevPropsRef = useRef(props);\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  }); // Effects.\n\n  /* Sets a11y status message on changes in selectedItem. */\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    if (selectedItems.length < previousSelectedItemsRef.current.length) {\n      var removedSelectedItem = previousSelectedItemsRef.current.find(function (item) {\n        return selectedItems.indexOf(item) < 0;\n      });\n      setStatus(getA11yRemovalMessage({\n        itemToString: itemToString,\n        resultCount: selectedItems.length,\n        removedSelectedItem: removedSelectedItem,\n        activeIndex: activeIndex,\n        activeSelectedItem: selectedItems[activeIndex]\n      }), environment.document);\n    }\n\n    previousSelectedItemsRef.current = selectedItems; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItems.length]); // Sets focus on active item.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    if (activeIndex === -1 && dropdownRef.current) {\n      dropdownRef.current.focus();\n    } else if (selectedItemRefs.current[activeIndex]) {\n      selectedItemRefs.current[activeIndex].focus();\n    }\n  }, [activeIndex]);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    validateControlledUnchanged(state, prevPropsRef.current, props);\n    prevPropsRef.current = props;\n  }, [state, props]);\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getDropdownProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []); // Event handler functions.\n\n  var selectedItemKeyDownHandlers = useMemo(function () {\n    var _ref;\n\n    return _ref = {}, _ref[keyNavigationPrevious] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationPrevious\n      });\n    }, _ref[keyNavigationNext] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationNext\n      });\n    }, _ref.Delete = function Delete() {\n      dispatch({\n        type: SelectedItemKeyDownDelete\n      });\n    }, _ref.Backspace = function Backspace() {\n      dispatch({\n        type: SelectedItemKeyDownBackspace\n      });\n    }, _ref;\n  }, [dispatch, keyNavigationNext, keyNavigationPrevious]);\n  var dropdownKeyDownHandlers = useMemo(function () {\n    var _ref2;\n\n    return _ref2 = {}, _ref2[keyNavigationPrevious] = function (event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownNavigationPrevious\n        });\n      }\n    }, _ref2.Backspace = function Backspace(event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownBackspace\n        });\n      }\n    }, _ref2;\n  }, [dispatch, keyNavigationPrevious]); // Getter props.\n\n  var getSelectedItemProps = useCallback(function (_temp) {\n    var _extends2;\n\n    var _ref3 = _temp === void 0 ? {} : _temp,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        onClick = _ref3.onClick,\n        onKeyDown = _ref3.onKeyDown,\n        selectedItem = _ref3.selectedItem,\n        index = _ref3.index,\n        rest = _objectWithoutPropertiesLoose(_ref3, [\"refKey\", \"ref\", \"onClick\", \"onKeyDown\", \"selectedItem\", \"index\"]);\n\n    var latestState = latest.current.state;\n    var itemIndex = getItemIndex(index, selectedItem, latestState.selectedItems);\n\n    if (itemIndex < 0) {\n      throw new Error('Pass either selectedItem or index in getSelectedItemProps!');\n    }\n\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (selectedItemNode) {\n      if (selectedItemNode) {\n        selectedItemRefs.current.push(selectedItemNode);\n      }\n    }), _extends2.tabIndex = index === latestState.activeIndex ? 0 : -1, _extends2.onClick = callAllEventHandlers(onClick, function selectedItemHandleClick() {\n      dispatch({\n        type: SelectedItemClick,\n        index: index\n      });\n    }), _extends2.onKeyDown = callAllEventHandlers(onKeyDown, function selectedItemHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && selectedItemKeyDownHandlers[key]) {\n        selectedItemKeyDownHandlers[key](event);\n      }\n    }), _extends2), rest);\n  }, [dispatch, latest, selectedItemKeyDownHandlers]);\n  var getDropdownProps = useCallback(function (_temp2, _temp3) {\n    var _extends3;\n\n    var _ref4 = _temp2 === void 0 ? {} : _temp2,\n        _ref4$refKey = _ref4.refKey,\n        refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n        ref = _ref4.ref,\n        onKeyDown = _ref4.onKeyDown,\n        onClick = _ref4.onClick,\n        _ref4$preventKeyActio = _ref4.preventKeyAction,\n        preventKeyAction = _ref4$preventKeyActio === void 0 ? false : _ref4$preventKeyActio,\n        rest = _objectWithoutPropertiesLoose(_ref4, [\"refKey\", \"ref\", \"onKeyDown\", \"onClick\", \"preventKeyAction\"]);\n\n    var _ref5 = _temp3 === void 0 ? {} : _temp3,\n        _ref5$suppressRefErro = _ref5.suppressRefError,\n        suppressRefError = _ref5$suppressRefErro === void 0 ? false : _ref5$suppressRefErro;\n\n    setGetterPropCallInfo('getDropdownProps', suppressRefError, refKey, dropdownRef);\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (dropdownNode) {\n      if (dropdownNode) {\n        dropdownRef.current = dropdownNode;\n      }\n    }), _extends3), !preventKeyAction && {\n      onKeyDown: callAllEventHandlers(onKeyDown, function dropdownHandleKeyDown(event) {\n        var key = normalizeArrowKey(event);\n\n        if (key && dropdownKeyDownHandlers[key]) {\n          dropdownKeyDownHandlers[key](event);\n        }\n      }),\n      onClick: callAllEventHandlers(onClick, function dropdownHandleClick() {\n        dispatch({\n          type: DropdownClick\n        });\n      })\n    }, rest);\n  }, [dispatch, dropdownKeyDownHandlers, setGetterPropCallInfo]); // returns\n\n  var addSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionAddSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var removeSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionRemoveSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var setSelectedItems = useCallback(function (newSelectedItems) {\n    dispatch({\n      type: FunctionSetSelectedItems,\n      selectedItems: newSelectedItems\n    });\n  }, [dispatch]);\n  var setActiveIndex = useCallback(function (newActiveIndex) {\n    dispatch({\n      type: FunctionSetActiveIndex,\n      activeIndex: newActiveIndex\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$2\n    });\n  }, [dispatch]);\n  return {\n    getSelectedItemProps: getSelectedItemProps,\n    getDropdownProps: getDropdownProps,\n    addSelectedItem: addSelectedItem,\n    removeSelectedItem: removeSelectedItem,\n    setSelectedItems: setSelectedItems,\n    setActiveIndex: setActiveIndex,\n    reset: reset,\n    selectedItems: selectedItems,\n    activeIndex: activeIndex\n  };\n}\n\nexport default Downshift;\nexport { resetIdCounter, useCombobox, useMultipleSelection, useSelect };","map":{"version":3,"names":["_objectWithoutPropertiesLoose","_extends","_assertThisInitialized","_inheritsLoose","PropTypes","cloneElement","Component","useRef","useEffect","useCallback","useReducer","useMemo","isForwardRef","computeScrollIntoView","idCounter","cbToCb","cb","noop","scrollIntoView","node","menuNode","actions","boundary","block","scrollMode","forEach","_ref","el","top","left","scrollTop","scrollLeft","isOrContainsNode","parent","child","contains","debounce","fn","time","timeoutId","cancel","clearTimeout","wrapper","_len","arguments","length","args","Array","_key","setTimeout","apply","callAllEventHandlers","_len2","fns","_key2","event","_len3","_key3","some","concat","preventDownshiftDefault","hasOwnProperty","nativeEvent","handleRefs","_len4","refs","_key4","ref","current","generateId","String","resetIdCounter","getA11yStatusMessage","_ref2","isOpen","resultCount","previousResultCount","unwrapArray","arg","defaultValue","isArray","isDOMElement","element","type","getElementProps","props","requiredProp","fnName","propName","console","error","stateKeys","pickState","state","result","k","getState","Object","keys","reduce","prevState","key","isControlledProp","undefined","normalizeArrowKey","keyCode","indexOf","isPlainObject","obj","prototype","toString","call","getNextWrappingIndex","moveAmount","baseIndex","itemCount","getItemNodeFromIndex","circular","itemsLastIndex","newIndex","nonDisabledNewIndex","getNextNonDisabledIndex","currentElementNode","hasAttribute","index","_index","targetWithinDownshift","target","downshiftElements","document","checkActiveElement","contextNode","activeElement","validateControlledUnchanged","prevProps","nextProps","process","env","NODE_ENV","warningDescription","propKey","cleanupStatus","getStatusDiv","textContent","setStatus","status","documentProp","div","statusDiv","getElementById","createElement","setAttribute","assign","style","border","clip","height","margin","overflow","padding","position","width","body","appendChild","unknown","mouseUp","itemMouseEnter","keyDownArrowUp","keyDownArrowDown","keyDownEscape","keyDownEnter","keyDownHome","keyDownEnd","clickItem","blurInput","changeInput","keyDownSpaceButton","clickButton","blurButton","controlledPropUpdatedSelectedItem","touchEnd","stateChangeTypes","freeze","__proto__","Downshift","_Component","_props","_this","id","menuId","labelId","inputId","getItemId","input","items","timeoutIds","internalSetTimeout","filter","i","push","setItemCount","count","unsetItemCount","setHighlightedIndex","highlightedIndex","otherStateToSet","defaultHighlightedIndex","internalSetState","clearSelection","selectedItem","inputValue","defaultIsOpen","selectItem","item","itemToString","selectItemAtIndex","itemIndex","selectHighlightedItem","stateToSet","isItemSelected","onChangeArg","onStateChangeArg","isStateToSetFunction","onInputValueChange","getStateAndHelpers","setState","newStateToSet","stateReducer","nextState","nextFullState","hasMoreStateThanType","onStateChange","onSelect","onChange","onUserAction","rootRef","_rootNode","getRootProps","_temp","_temp2","_extends2","_ref$refKey","refKey","rest","_ref2$suppressRefErro","suppressRefError","called","_this$getState","role","keyDownHandlers","ArrowDown","_this2","preventDefault","amount","shiftKey","moveHighlightedIndex","getItemCount","_this2$getState","nextHighlightedIndex","ArrowUp","_this3","_this3$getState","Enter","which","_this$getState2","itemNode","Escape","reset","buttonKeyDownHandlers","_","toggleMenu","inputKeyDownHandlers","Home","_this4","_this$getState3","newHighlightedIndex","End","_this5","_this$getState4","getToggleButtonProps","_temp3","_ref3","onClick","onPress","onKeyDown","onKeyUp","onBlur","_this$getState5","enabledEventHandlers","buttonHandleClick","buttonHandleKeyDown","buttonHandleKeyUp","buttonHandleBlur","eventHandlers","disabled","environment","focus","blurTarget","isMouseDown","getLabelProps","htmlFor","getInputProps","_temp4","_ref4","onInput","onChangeText","onChangeKey","_this$getState6","_eventHandlers","inputHandleChange","inputHandleKeyDown","inputHandleBlur","autoComplete","value","downshiftButtonIsActive","dataset","toggle","menuRef","_menuNode","getMenuProps","_temp5","_temp6","_extends3","_ref5","_ref5$refKey","_ref6","_ref6$suppressRefErro","getItemProps","_temp7","_enabledEventHandlers","_ref7","onMouseMove","onMouseDown","_ref7$item","onSelectKey","customClickHandler","avoidScrolling","clearItems","_ref8","_ref9","_this$getState7","openMenu","closeMenu","updateStatus","highlightedItem","_this$props","_this$props$initialHi","initialHighlightedIndex","_highlightedIndex","_this$props$initialIs","initialIsOpen","_isOpen","_this$props$initialIn","initialInputValue","_inputValue","_this$props$initialSe","initialSelectedItem","_selectedItem","_state","_proto","internalClearTimeouts","getState$1","stateToMerge","scrollHighlightedItemIntoView","_this6","_this$getState8","_this$getState9","componentDidMount","_this7","validateGetMenuPropsCalledCorrectly","onMouseUp","contextWithinDownshift","onOuterClick","onTouchStart","isTouchMove","onTouchMove","onTouchEnd","addEventListener","cleanup","removeEventListener","shouldScroll","_ref10","currentHighlightedIndex","_ref11","prevHighlightedIndex","scrollWhenOpen","componentDidUpdate","selectedItemChanged","componentWillUnmount","render","children","validateGetRootPropsCalledCorrectly","Error","defaultProps","warn","prevItem","window","propTypes","func","number","bool","any","string","shape","_ref12","_ref13","refKeySpecified","isComposite","dropdownDefaultStateValues","callOnChangeProps","action","newState","changes","invokeOnChangeHandler","handler","capitalizeString","s","a","getA11ySelectionMessage","selectionParameters","itemToStringLocal","updateA11yStatus","getA11yMessage","getElementIds","toggleButtonId","uniqueId","getItemIndex","getPropTypesValidator","caller","options","checkPropTypes","name","isAcceptedCharacterKey","test","slice","toUpperCase","useLatestRef","val","useEnhancedReducer","reducer","initialState","prevStateRef","actionRef","enhancedReducer","_useReducer","dispatch","propsRef","dispatchWithProps","useControlledReducer","_useEnhancedReducer","circularNavigation","getDefaultValue","defaultStateValues","defaultPropKey","getInitialValue","initialPropKey","getInitialState","getHighlightedIndexOnOpen","offset","useMouseAndTouchTracker","downshiftElementRefs","handleBlur","mouseAndTouchTrackersRef","map","useGetterPropsCalledChecker","isNotProduction","isInitialMountRef","propKeys","getterPropsCalledRef","acc","propCallInfo","elementRef","setGetterPropCallInfo","getItemIndexByCharacterKey","keysSoFar","itemToStringParam","lowerCasedItemStrings","toLowerCase","lowerCasedKeysSoFar","isValid","itemString","startsWith","_itemString","array","isRequired","defaultSelectedItem","onSelectedItemChange","onHighlightedIndexChange","onIsOpenChange","getA11yStatusMessage$1","defaultProps$1","MenuKeyDownArrowDown","MenuKeyDownArrowUp","MenuKeyDownEscape","MenuKeyDownHome","MenuKeyDownEnd","MenuKeyDownEnter","MenuKeyDownSpaceButton","MenuKeyDownCharacter","MenuBlur","MenuMouseLeave","ItemMouseMove","ItemClick","ToggleButtonClick","ToggleButtonKeyDownArrowDown","ToggleButtonKeyDownArrowUp","ToggleButtonKeyDownCharacter","FunctionToggleMenu","FunctionOpenMenu","FunctionCloseMenu","FunctionSetHighlightedIndex","FunctionSelectItem","FunctionSetInputValue","FunctionReset","stateChangeTypes$1","downshiftSelectReducer","lowercasedKey","_lowercasedKey","validatePropTypes","useSelect","userProps","_useControlledReducer","toggleButtonRef","itemRefs","shouldScrollRef","shouldBlurRef","clearTimeoutRef","elementIdsRef","previousResultCountRef","prevPropsRef","latest","outerDispatch","toggleButtonKeyDownHandlers","menuKeyDownHandlers","newSelectedItem","setInputValue","newInputValue","labelProps","onMouseLeave","latestState","tabIndex","menuHandleMouseLeave","menuHandleKeyDown","menuHandleBlur","shouldBlur","_ref3$refKey","_ref4$suppressRefErro","toggleButtonHandleClick","toggleButtonHandleKeyDown","toggleProps","toggleButtonNode","_extends4","_latest$current","latestProps","itemHandleMouseMove","itemHandleClick","itemProps","InputKeyDownArrowDown","InputKeyDownArrowUp","InputKeyDownEscape","InputKeyDownHome","InputKeyDownEnd","InputKeyDownEnter","InputChange","InputBlur","MenuMouseLeave$1","ItemMouseMove$1","ItemClick$1","ToggleButtonClick$1","FunctionToggleMenu$1","FunctionOpenMenu$1","FunctionCloseMenu$1","FunctionSetHighlightedIndex$1","FunctionSelectItem$1","FunctionSetInputValue$1","FunctionReset$1","ControlledPropUpdatedSelectedItem","stateChangeTypes$2","getElementIds$1","getInitialState$1","defaultInputValue","propTypes$1","useControlledReducer$1","previousSelectedItemRef","defaultProps$2","downshiftUseComboboxReducer","validatePropTypes$1","useCombobox","inputRef","comboboxRef","_extends5","_ref6$refKey","_ref7$suppressRefErro","inputNode","getComboboxProps","_temp8","_extends6","_ref8$refKey","_ref9$suppressRefErro","comboboxNode","activeIndex","selectedItems","getInitialValue$1","getDefaultValue$1","getInitialState$2","isKeyDownOperationPermitted","metaKey","ctrlKey","altKey","HTMLInputElement","selectionStart","selectionEnd","getA11yRemovalMessage","removedSelectedItem","propTypes$2","initialSelectedItems","defaultSelectedItems","initialActiveIndex","defaultActiveIndex","onActiveIndexChange","onSelectedItemsChange","keyNavigationNext","keyNavigationPrevious","defaultProps$3","SelectedItemClick","SelectedItemKeyDownDelete","SelectedItemKeyDownBackspace","SelectedItemKeyDownNavigationNext","SelectedItemKeyDownNavigationPrevious","DropdownKeyDownNavigationPrevious","DropdownKeyDownBackspace","DropdownClick","FunctionAddSelectedItem","FunctionRemoveSelectedItem","FunctionSetSelectedItems","FunctionSetActiveIndex","FunctionReset$2","stateChangeTypes$3","downshiftMultipleSelectionReducer","newActiveIndex","_newActiveIndex","selectedItemIndex","newSelectedItems","_newActiveIndex2","useMultipleSelection","dropdownRef","previousSelectedItemsRef","selectedItemRefs","find","activeSelectedItem","selectedItemKeyDownHandlers","Delete","Backspace","dropdownKeyDownHandlers","getSelectedItemProps","selectedItemNode","selectedItemHandleClick","selectedItemHandleKeyDown","getDropdownProps","_ref4$refKey","_ref4$preventKeyActio","preventKeyAction","_ref5$suppressRefErro","dropdownNode","dropdownHandleKeyDown","dropdownHandleClick","addSelectedItem","removeSelectedItem","setSelectedItems","setActiveIndex"],"sources":["C:/Users/anish/auth-final/node_modules/downshift/dist/downshift.esm.js"],"sourcesContent":["import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport { cloneElement, Component, useRef, useEffect, useCallback, useReducer, useMemo } from 'react';\nimport { isForwardRef } from 'react-is';\nimport computeScrollIntoView from 'compute-scroll-into-view';\n\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\n\nfunction noop() {}\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\n\n\nfunction scrollIntoView(node, menuNode) {\n  if (!node) {\n    return;\n  }\n\n  var actions = computeScrollIntoView(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\n\nfunction isOrContainsNode(parent, child) {\n  return parent === child || parent.contains && parent.contains(child);\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\n\nfunction debounce(fn, time) {\n  var timeoutId;\n\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\n\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\n\nfunction handleRefs() {\n  for (var _len4 = arguments.length, refs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    refs[_key4] = arguments[_key4];\n  }\n\n  return function (node) {\n    refs.forEach(function (ref) {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\n\nfunction getA11yStatusMessage(_ref2) {\n  var isOpen = _ref2.isOpen,\n      resultCount = _ref2.resultCount,\n      previousResultCount = _ref2.previousResultCount;\n\n  if (!isOpen) {\n    return '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n\n  return '';\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ?\n  /* istanbul ignore next (preact) */\n  arg[0] : arg;\n\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\n\nfunction isDOMElement(element) {\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\n\nfunction getElementProps(element) {\n  return element.props;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\n\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\n\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * This will perform a shallow merge of the given state object\n * with the state coming from props\n * (for the controlled component scenario)\n * This is used in state updater functions so they're referencing\n * the right state regardless of where it comes from.\n *\n * @param {Object} state The state of the component/hook.\n * @param {Object} props The props that may contain controlled values.\n * @returns {Object} The merged controlled state.\n */\n\n\nfunction getState(state, props) {\n  return Object.keys(state).reduce(function (prevState, key) {\n    prevState[key] = isControlledProp(props, key) ? props[key] : state[key];\n    return prevState;\n  }, {});\n}\n/**\n * This determines whether a prop is a \"controlled prop\" meaning it is\n * state which is controlled by the outside of this component rather\n * than within this component.\n *\n * @param {Object} props The props that may contain controlled values.\n * @param {String} key the key to check\n * @return {Boolean} whether it is a controlled controlled prop\n */\n\n\nfunction isControlledProp(props, key) {\n  return props[key] !== undefined;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\n\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n/**\n * Returns the new index in the list, in a circular way. If next value is out of bonds from the total,\n * it will wrap to either 0 or itemCount - 1.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index after the move.\n */\n\n\nfunction getNextWrappingIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  if (circular === void 0) {\n    circular = true;\n  }\n\n  if (itemCount === 0) {\n    return -1;\n  }\n\n  var itemsLastIndex = itemCount - 1;\n\n  if (typeof baseIndex !== 'number' || baseIndex < 0 || baseIndex >= itemCount) {\n    baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n  }\n\n  var newIndex = baseIndex + moveAmount;\n\n  if (newIndex < 0) {\n    newIndex = circular ? itemsLastIndex : 0;\n  } else if (newIndex > itemsLastIndex) {\n    newIndex = circular ? 0 : itemsLastIndex;\n  }\n\n  var nonDisabledNewIndex = getNextNonDisabledIndex(moveAmount, newIndex, itemCount, getItemNodeFromIndex, circular);\n\n  if (nonDisabledNewIndex === -1) {\n    return baseIndex >= itemCount ? -1 : baseIndex;\n  }\n\n  return nonDisabledNewIndex;\n}\n/**\n * Returns the next index in the list of an item that is not disabled.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index. Returns baseIndex if item is not disabled. Returns next non-disabled item otherwise. If no non-disabled found it will return -1.\n */\n\n\nfunction getNextNonDisabledIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  var currentElementNode = getItemNodeFromIndex(baseIndex);\n\n  if (!currentElementNode || !currentElementNode.hasAttribute('disabled')) {\n    return baseIndex;\n  }\n\n  if (moveAmount > 0) {\n    for (var index = baseIndex + 1; index < itemCount; index++) {\n      if (!getItemNodeFromIndex(index).hasAttribute('disabled')) {\n        return index;\n      }\n    }\n  } else {\n    for (var _index = baseIndex - 1; _index >= 0; _index--) {\n      if (!getItemNodeFromIndex(_index).hasAttribute('disabled')) {\n        return _index;\n      }\n    }\n  }\n\n  if (circular) {\n    return moveAmount > 0 ? getNextNonDisabledIndex(1, 0, itemCount, getItemNodeFromIndex, false) : getNextNonDisabledIndex(-1, itemCount - 1, itemCount, getItemNodeFromIndex, false);\n  }\n\n  return -1;\n}\n/**\n * Checks if event target is within the downshift elements.\n *\n * @param {EventTarget} target Target to check.\n * @param {HTMLElement[]} downshiftElements The elements that form downshift (list, toggle button etc).\n * @param {Document} document The document.\n * @param {boolean} checkActiveElement Whether to also check activeElement.\n *\n * @returns {boolean} Whether or not the target is within downshift elements.\n */\n\n\nfunction targetWithinDownshift(target, downshiftElements, document, checkActiveElement) {\n  if (checkActiveElement === void 0) {\n    checkActiveElement = true;\n  }\n\n  return downshiftElements.some(function (contextNode) {\n    return contextNode && (isOrContainsNode(contextNode, target) || checkActiveElement && isOrContainsNode(contextNode, document.activeElement));\n  });\n}\n\nfunction validateControlledUnchanged(state, prevProps, nextProps) {\n  if (process.env.NODE_ENV === 'production') {\n    return;\n  }\n\n  var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n  Object.keys(state).forEach(function (propKey) {\n    if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n    } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n    }\n  });\n}\n\nvar cleanupStatus = debounce(function () {\n  getStatusDiv().textContent = '';\n}, 500);\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\n\nfunction setStatus(status, documentProp) {\n  var div = getStatusDiv(documentProp);\n\n  if (!status) {\n    return;\n  }\n\n  div.textContent = status;\n  cleanupStatus();\n}\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\n\n\nfunction getStatusDiv(documentProp) {\n  if (documentProp === void 0) {\n    documentProp = document;\n  }\n\n  var statusDiv = documentProp.getElementById('a11y-status-message');\n\n  if (statusDiv) {\n    return statusDiv;\n  }\n\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\n\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\n\nvar Downshift =\n/*#__PURE__*/\nfunction () {\n  var Downshift =\n  /*#__PURE__*/\n  function (_Component) {\n    _inheritsLoose(Downshift, _Component);\n\n    function Downshift(_props) {\n      var _this = _Component.call(this, _props) || this;\n\n      _this.id = _this.props.id || \"downshift-\" + generateId();\n      _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n      _this.labelId = _this.props.labelId || _this.id + \"-label\";\n      _this.inputId = _this.props.inputId || _this.id + \"-input\";\n\n      _this.getItemId = _this.props.getItemId || function (index) {\n        return _this.id + \"-item-\" + index;\n      };\n\n      _this.input = null;\n      _this.items = [];\n      _this.itemCount = null;\n      _this.previousResultCount = 0;\n      _this.timeoutIds = [];\n\n      _this.internalSetTimeout = function (fn, time) {\n        var id = setTimeout(function () {\n          _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n            return i !== id;\n          });\n          fn();\n        }, time);\n\n        _this.timeoutIds.push(id);\n      };\n\n      _this.setItemCount = function (count) {\n        _this.itemCount = count;\n      };\n\n      _this.unsetItemCount = function () {\n        _this.itemCount = null;\n      };\n\n      _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n        if (highlightedIndex === void 0) {\n          highlightedIndex = _this.props.defaultHighlightedIndex;\n        }\n\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(_extends({\n          highlightedIndex: highlightedIndex\n        }, otherStateToSet));\n      };\n\n      _this.clearSelection = function (cb) {\n        _this.internalSetState({\n          selectedItem: null,\n          inputValue: '',\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          isOpen: _this.props.defaultIsOpen\n        }, cb);\n      };\n\n      _this.selectItem = function (item, otherStateToSet, cb) {\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(_extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          selectedItem: item,\n          inputValue: _this.props.itemToString(item)\n        }, otherStateToSet), cb);\n      };\n\n      _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n        var item = _this.items[itemIndex];\n\n        if (item == null) {\n          return;\n        }\n\n        _this.selectItem(item, otherStateToSet, cb);\n      };\n\n      _this.selectHighlightedItem = function (otherStateToSet, cb) {\n        return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n      };\n\n      _this.internalSetState = function (stateToSet, cb) {\n        var isItemSelected, onChangeArg;\n        var onStateChangeArg = {};\n        var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n        // so someone controlling the `inputValue` state gets notified of\n        // the input change as soon as possible. This avoids issues with\n        // preserving the cursor position.\n        // See https://github.com/downshift-js/downshift/issues/217 for more info.\n\n        if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), stateToSet));\n        }\n\n        return _this.setState(function (state) {\n          state = _this.getState(state);\n          var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n          newStateToSet = _this.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n          // what was selected before\n          // used to determine if onSelect and onChange callbacks should be called\n\n          isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n          var nextState = {}; // this is just used to tell whether the state changed\n\n          var nextFullState = {}; // we need to call on change if the outside world is controlling any of our state\n          // and we're trying to update that state. OR if the selection has changed and we're\n          // trying to update the selection\n\n          if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n            onChangeArg = newStateToSet.selectedItem;\n          }\n\n          newStateToSet.type = newStateToSet.type || unknown;\n          Object.keys(newStateToSet).forEach(function (key) {\n            // onStateChangeArg should only have the state that is\n            // actually changing\n            if (state[key] !== newStateToSet[key]) {\n              onStateChangeArg[key] = newStateToSet[key];\n            } // the type is useful for the onStateChangeArg\n            // but we don't actually want to set it in internal state.\n            // this is an undocumented feature for now... Not all internalSetState\n            // calls support it and I'm not certain we want them to yet.\n            // But it enables users controlling the isOpen state to know when\n            // the isOpen state changes due to mouseup events which is quite handy.\n\n\n            if (key === 'type') {\n              return;\n            }\n\n            nextFullState[key] = newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n            if (!isControlledProp(_this.props, key)) {\n              nextState[key] = newStateToSet[key];\n            }\n          }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n          // earlier, so we'll call it now that we know what the inputValue state will be.\n\n          if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n            _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), newStateToSet));\n          }\n\n          return nextState;\n        }, function () {\n          // call the provided callback if it's a function\n          cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n          // we have relevant information to pass them.\n\n          var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n\n          if (hasMoreStateThanType) {\n            _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n          }\n\n          if (isItemSelected) {\n            _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n          }\n\n          if (onChangeArg !== undefined) {\n            _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n          } // this is currently undocumented and therefore subject to change\n          // We'll try to not break it, but just be warned.\n\n\n          _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n        });\n      };\n\n      _this.rootRef = function (node) {\n        return _this._rootNode = node;\n      };\n\n      _this.getRootProps = function (_temp, _temp2) {\n        var _extends2;\n\n        var _ref = _temp === void 0 ? {} : _temp,\n            _ref$refKey = _ref.refKey,\n            refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n            ref = _ref.ref,\n            rest = _objectWithoutPropertiesLoose(_ref, [\"refKey\", \"ref\"]);\n\n        var _ref2 = _temp2 === void 0 ? {} : _temp2,\n            _ref2$suppressRefErro = _ref2.suppressRefError,\n            suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n        // this is used in the render to know whether the user has called getRootProps.\n        // It uses that to know whether to apply the props automatically\n        _this.getRootProps.called = true;\n        _this.getRootProps.refKey = refKey;\n        _this.getRootProps.suppressRefError = suppressRefError;\n\n        var _this$getState = _this.getState(),\n            isOpen = _this$getState.isOpen;\n\n        return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : null, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n      };\n\n      _this.keyDownHandlers = {\n        ArrowDown: function ArrowDown(event) {\n          var _this2 = this;\n\n          event.preventDefault();\n\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? 5 : 1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowDown\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowDown\n            }, function () {\n              var itemCount = _this2.getItemCount();\n\n              if (itemCount > 0) {\n                var _this2$getState = _this2.getState(),\n                    highlightedIndex = _this2$getState.highlightedIndex;\n\n                var nextHighlightedIndex = getNextWrappingIndex(1, highlightedIndex, itemCount, function (index) {\n                  return _this2.getItemNodeFromIndex(index);\n                });\n\n                _this2.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowDown\n                });\n              }\n            });\n          }\n        },\n        ArrowUp: function ArrowUp(event) {\n          var _this3 = this;\n\n          event.preventDefault();\n\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? -5 : -1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowUp\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowUp\n            }, function () {\n              var itemCount = _this3.getItemCount();\n\n              if (itemCount > 0) {\n                var _this3$getState = _this3.getState(),\n                    highlightedIndex = _this3$getState.highlightedIndex;\n\n                var nextHighlightedIndex = getNextWrappingIndex(-1, highlightedIndex, itemCount, function (index) {\n                  return _this3.getItemNodeFromIndex(index);\n                });\n\n                _this3.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowUp\n                });\n              }\n            });\n          }\n        },\n        Enter: function Enter(event) {\n          if (event.which === 229) {\n            return;\n          }\n\n          var _this$getState2 = this.getState(),\n              isOpen = _this$getState2.isOpen,\n              highlightedIndex = _this$getState2.highlightedIndex;\n\n          if (isOpen && highlightedIndex != null) {\n            event.preventDefault();\n            var item = this.items[highlightedIndex];\n            var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n\n            if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n              return;\n            }\n\n            this.selectHighlightedItem({\n              type: keyDownEnter\n            });\n          }\n        },\n        Escape: function Escape(event) {\n          event.preventDefault();\n          this.reset({\n            type: keyDownEscape,\n            selectedItem: null,\n            inputValue: ''\n          });\n        }\n      };\n      _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        ' ': function _(event) {\n          event.preventDefault();\n          this.toggleMenu({\n            type: keyDownSpaceButton\n          });\n        }\n      });\n      _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        Home: function Home(event) {\n          var _this4 = this;\n\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n\n          var _this$getState3 = this.getState(),\n              isOpen = _this$getState3.isOpen;\n\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting downwards from 0 if that's disabled.\n\n\n          var newHighlightedIndex = getNextNonDisabledIndex(1, 0, itemCount, function (index) {\n            return _this4.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownHome\n          });\n        },\n        End: function End(event) {\n          var _this5 = this;\n\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n\n          var _this$getState4 = this.getState(),\n              isOpen = _this$getState4.isOpen;\n\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting upwards from last index if that's disabled.\n\n\n          var newHighlightedIndex = getNextNonDisabledIndex(-1, itemCount - 1, itemCount, function (index) {\n            return _this5.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownEnd\n          });\n        }\n      });\n\n      _this.getToggleButtonProps = function (_temp3) {\n        var _ref3 = _temp3 === void 0 ? {} : _temp3,\n            onClick = _ref3.onClick,\n            onPress = _ref3.onPress,\n            onKeyDown = _ref3.onKeyDown,\n            onKeyUp = _ref3.onKeyUp,\n            onBlur = _ref3.onBlur,\n            rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"]);\n\n        var _this$getState5 = _this.getState(),\n            isOpen = _this$getState5.isOpen;\n\n        var enabledEventHandlers = {\n          onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n          onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n          onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n          onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n        };\n        var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n        return _extends({\n          type: 'button',\n          role: 'button',\n          'aria-label': isOpen ? 'close menu' : 'open menu',\n          'aria-haspopup': true,\n          'data-toggle': true\n        }, eventHandlers, rest);\n      };\n\n      _this.buttonHandleKeyUp = function (event) {\n        // Prevent click event from emitting in Firefox\n        event.preventDefault();\n      };\n\n      _this.buttonHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n\n        if (_this.buttonKeyDownHandlers[key]) {\n          _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n\n      _this.buttonHandleClick = function (event) {\n        event.preventDefault(); // handle odd case for Safari and Firefox which\n        // don't give the button the focus properly.\n\n        /* istanbul ignore if (can't reasonably test this) */\n\n        if ( _this.props.environment.document.activeElement === _this.props.environment.document.body) {\n          event.target.focus();\n        } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n        // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n        // when building for production and should therefore have no impact on production code.\n\n\n        if (process.env.NODE_ENV === 'test') {\n          _this.toggleMenu({\n            type: clickButton\n          });\n        } else {\n          // Ensure that toggle of menu occurs after the potential blur event in iOS\n          _this.internalSetTimeout(function () {\n            return _this.toggleMenu({\n              type: clickButton\n            });\n          });\n        }\n      };\n\n      _this.buttonHandleBlur = function (event) {\n        var blurTarget = event.target; // Save blur target for comparison with activeElement later\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n        _this.internalSetTimeout(function () {\n          if (!_this.isMouseDown && (_this.props.environment.document.activeElement == null || _this.props.environment.document.activeElement.id !== _this.inputId) && _this.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n          ) {\n              _this.reset({\n                type: blurButton\n              });\n            }\n        });\n      };\n\n      _this.getLabelProps = function (props) {\n        return _extends({\n          htmlFor: _this.inputId,\n          id: _this.labelId\n        }, props);\n      };\n\n      _this.getInputProps = function (_temp4) {\n        var _ref4 = _temp4 === void 0 ? {} : _temp4,\n            onKeyDown = _ref4.onKeyDown,\n            onBlur = _ref4.onBlur,\n            onChange = _ref4.onChange,\n            onInput = _ref4.onInput,\n            onChangeText = _ref4.onChangeText,\n            rest = _objectWithoutPropertiesLoose(_ref4, [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"]);\n\n        var onChangeKey;\n        var eventHandlers = {};\n        /* istanbul ignore next (preact) */\n\n        onChangeKey = 'onChange';\n\n        var _this$getState6 = _this.getState(),\n            inputValue = _this$getState6.inputValue,\n            isOpen = _this$getState6.isOpen,\n            highlightedIndex = _this$getState6.highlightedIndex;\n\n        if (!rest.disabled) {\n          var _eventHandlers;\n\n          eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n        }\n        /* istanbul ignore if (react-native) */\n\n\n        return _extends({\n          'aria-autocomplete': 'list',\n          'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : null,\n          'aria-controls': isOpen ? _this.menuId : null,\n          'aria-labelledby': _this.labelId,\n          // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n          // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n          autoComplete: 'off',\n          value: inputValue,\n          id: _this.inputId\n        }, eventHandlers, rest);\n      };\n\n      _this.inputHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n\n        if (key && _this.inputKeyDownHandlers[key]) {\n          _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n\n      _this.inputHandleChange = function (event) {\n        _this.internalSetState({\n          type: changeInput,\n          isOpen: true,\n          inputValue: event.target.value,\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        });\n      };\n\n      _this.inputHandleBlur = function () {\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n        _this.internalSetTimeout(function () {\n          var downshiftButtonIsActive = _this.props.environment.document && !!_this.props.environment.document.activeElement && !!_this.props.environment.document.activeElement.dataset && _this.props.environment.document.activeElement.dataset.toggle && _this._rootNode && _this._rootNode.contains(_this.props.environment.document.activeElement);\n\n          if (!_this.isMouseDown && !downshiftButtonIsActive) {\n            _this.reset({\n              type: blurInput\n            });\n          }\n        });\n      };\n\n      _this.menuRef = function (node) {\n        _this._menuNode = node;\n      };\n\n      _this.getMenuProps = function (_temp5, _temp6) {\n        var _extends3;\n\n        var _ref5 = _temp5 === void 0 ? {} : _temp5,\n            _ref5$refKey = _ref5.refKey,\n            refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n            ref = _ref5.ref,\n            props = _objectWithoutPropertiesLoose(_ref5, [\"refKey\", \"ref\"]);\n\n        var _ref6 = _temp6 === void 0 ? {} : _temp6,\n            _ref6$suppressRefErro = _ref6.suppressRefError,\n            suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n\n        _this.getMenuProps.called = true;\n        _this.getMenuProps.refKey = refKey;\n        _this.getMenuProps.suppressRefError = suppressRefError;\n        return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? null : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n      };\n\n      _this.getItemProps = function (_temp7) {\n        var _enabledEventHandlers;\n\n        var _ref7 = _temp7 === void 0 ? {} : _temp7,\n            onMouseMove = _ref7.onMouseMove,\n            onMouseDown = _ref7.onMouseDown,\n            onClick = _ref7.onClick,\n            onPress = _ref7.onPress,\n            index = _ref7.index,\n            _ref7$item = _ref7.item,\n            item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ?\n        /* istanbul ignore next */\n        undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n            rest = _objectWithoutPropertiesLoose(_ref7, [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"]);\n\n        if (index === undefined) {\n          _this.items.push(item);\n\n          index = _this.items.indexOf(item);\n        } else {\n          _this.items[index] = item;\n        }\n\n        var onSelectKey = 'onClick';\n        var customClickHandler = onClick;\n        var enabledEventHandlers = (_enabledEventHandlers = {\n          // onMouseMove is used over onMouseEnter here. onMouseMove\n          // is only triggered on actual mouse movement while onMouseEnter\n          // can fire on DOM changes, interrupting keyboard navigation\n          onMouseMove: callAllEventHandlers(onMouseMove, function () {\n            if (index === _this.getState().highlightedIndex) {\n              return;\n            }\n\n            _this.setHighlightedIndex(index, {\n              type: itemMouseEnter\n            }); // We never want to manually scroll when changing state based\n            // on `onMouseMove` because we will be moving the element out\n            // from under the user which is currently scrolling/moving the\n            // cursor\n\n\n            _this.avoidScrolling = true;\n\n            _this.internalSetTimeout(function () {\n              return _this.avoidScrolling = false;\n            }, 250);\n          }),\n          onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n            // This prevents the activeElement from being changed\n            // to the item so it can remain with the current activeElement\n            // which is a more common use case.\n            event.preventDefault();\n          })\n        }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n          _this.selectItemAtIndex(index, {\n            type: clickItem\n          });\n        }), _enabledEventHandlers); // Passing down the onMouseDown handler to prevent redirect\n        // of the activeElement if clicking on disabled items\n\n        var eventHandlers = rest.disabled ? {\n          onMouseDown: enabledEventHandlers.onMouseDown\n        } : enabledEventHandlers;\n        return _extends({\n          id: _this.getItemId(index),\n          role: 'option',\n          'aria-selected': _this.getState().highlightedIndex === index\n        }, eventHandlers, rest);\n      };\n\n      _this.clearItems = function () {\n        _this.items = [];\n      };\n\n      _this.reset = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(function (_ref8) {\n          var selectedItem = _ref8.selectedItem;\n          return _extends({\n            isOpen: _this.props.defaultIsOpen,\n            highlightedIndex: _this.props.defaultHighlightedIndex,\n            inputValue: _this.props.itemToString(selectedItem)\n          }, otherStateToSet);\n        }, cb);\n      };\n\n      _this.toggleMenu = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(function (_ref9) {\n          var isOpen = _ref9.isOpen;\n          return _extends({\n            isOpen: !isOpen\n          }, isOpen && {\n            highlightedIndex: _this.props.defaultHighlightedIndex\n          }, otherStateToSet);\n        }, function () {\n          var _this$getState7 = _this.getState(),\n              isOpen = _this$getState7.isOpen,\n              highlightedIndex = _this$getState7.highlightedIndex;\n\n          if (isOpen) {\n            if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n              _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n            }\n          }\n\n          cbToCb(cb)();\n        });\n      };\n\n      _this.openMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: true\n        }, cb);\n      };\n\n      _this.closeMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: false\n        }, cb);\n      };\n\n      _this.updateStatus = debounce(function () {\n        var state = _this.getState();\n\n        var item = _this.items[state.highlightedIndex];\n\n        var resultCount = _this.getItemCount();\n\n        var status = _this.props.getA11yStatusMessage(_extends({\n          itemToString: _this.props.itemToString,\n          previousResultCount: _this.previousResultCount,\n          resultCount: resultCount,\n          highlightedItem: item\n        }, state));\n\n        _this.previousResultCount = resultCount;\n        setStatus(status, _this.props.environment.document);\n      }, 200);\n\n      // fancy destructuring + defaults + aliases\n      // this basically says each value of state should either be set to\n      // the initial value or the default value if the initial value is not provided\n      var _this$props = _this.props,\n          defaultHighlightedIndex = _this$props.defaultHighlightedIndex,\n          _this$props$initialHi = _this$props.initialHighlightedIndex,\n          _highlightedIndex = _this$props$initialHi === void 0 ? defaultHighlightedIndex : _this$props$initialHi,\n          defaultIsOpen = _this$props.defaultIsOpen,\n          _this$props$initialIs = _this$props.initialIsOpen,\n          _isOpen = _this$props$initialIs === void 0 ? defaultIsOpen : _this$props$initialIs,\n          _this$props$initialIn = _this$props.initialInputValue,\n          _inputValue = _this$props$initialIn === void 0 ? '' : _this$props$initialIn,\n          _this$props$initialSe = _this$props.initialSelectedItem,\n          _selectedItem = _this$props$initialSe === void 0 ? null : _this$props$initialSe;\n\n      var _state = _this.getState({\n        highlightedIndex: _highlightedIndex,\n        isOpen: _isOpen,\n        inputValue: _inputValue,\n        selectedItem: _selectedItem\n      });\n\n      if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n        _state.inputValue = _this.props.itemToString(_state.selectedItem);\n      }\n\n      _this.state = _state;\n      return _this;\n    }\n\n    var _proto = Downshift.prototype;\n\n    /**\n     * Clear all running timeouts\n     */\n    _proto.internalClearTimeouts = function internalClearTimeouts() {\n      this.timeoutIds.forEach(function (id) {\n        clearTimeout(id);\n      });\n      this.timeoutIds = [];\n    }\n    /**\n     * Gets the state based on internal state or props\n     * If a state value is passed via props, then that\n     * is the value given, otherwise it's retrieved from\n     * stateToMerge\n     *\n     * @param {Object} stateToMerge defaults to this.state\n     * @return {Object} the state\n     */\n    ;\n\n    _proto.getState = function getState$1(stateToMerge) {\n      if (stateToMerge === void 0) {\n        stateToMerge = this.state;\n      }\n\n      return getState(stateToMerge, this.props);\n    };\n\n    _proto.getItemCount = function getItemCount() {\n      // things read better this way. They're in priority order:\n      // 1. `this.itemCount`\n      // 2. `this.props.itemCount`\n      // 3. `this.items.length`\n      var itemCount = this.items.length;\n\n      if (this.itemCount != null) {\n        itemCount = this.itemCount;\n      } else if (this.props.itemCount !== undefined) {\n        itemCount = this.props.itemCount;\n      }\n\n      return itemCount;\n    };\n\n    _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n      return this.props.environment.document.getElementById(this.getItemId(index));\n    };\n\n    _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n      /* istanbul ignore else (react-native) */\n      {\n        var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n        this.props.scrollIntoView(node, this._menuNode);\n      }\n    };\n\n    _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n      var _this6 = this;\n\n      var itemCount = this.getItemCount();\n\n      var _this$getState8 = this.getState(),\n          highlightedIndex = _this$getState8.highlightedIndex;\n\n      if (itemCount > 0) {\n        var nextHighlightedIndex = getNextWrappingIndex(amount, highlightedIndex, itemCount, function (index) {\n          return _this6.getItemNodeFromIndex(index);\n        });\n        this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n      }\n    };\n\n    _proto.getStateAndHelpers = function getStateAndHelpers() {\n      var _this$getState9 = this.getState(),\n          highlightedIndex = _this$getState9.highlightedIndex,\n          inputValue = _this$getState9.inputValue,\n          selectedItem = _this$getState9.selectedItem,\n          isOpen = _this$getState9.isOpen;\n\n      var itemToString = this.props.itemToString;\n      var id = this.id;\n      var getRootProps = this.getRootProps,\n          getToggleButtonProps = this.getToggleButtonProps,\n          getLabelProps = this.getLabelProps,\n          getMenuProps = this.getMenuProps,\n          getInputProps = this.getInputProps,\n          getItemProps = this.getItemProps,\n          openMenu = this.openMenu,\n          closeMenu = this.closeMenu,\n          toggleMenu = this.toggleMenu,\n          selectItem = this.selectItem,\n          selectItemAtIndex = this.selectItemAtIndex,\n          selectHighlightedItem = this.selectHighlightedItem,\n          setHighlightedIndex = this.setHighlightedIndex,\n          clearSelection = this.clearSelection,\n          clearItems = this.clearItems,\n          reset = this.reset,\n          setItemCount = this.setItemCount,\n          unsetItemCount = this.unsetItemCount,\n          setState = this.internalSetState;\n      return {\n        // prop getters\n        getRootProps: getRootProps,\n        getToggleButtonProps: getToggleButtonProps,\n        getLabelProps: getLabelProps,\n        getMenuProps: getMenuProps,\n        getInputProps: getInputProps,\n        getItemProps: getItemProps,\n        // actions\n        reset: reset,\n        openMenu: openMenu,\n        closeMenu: closeMenu,\n        toggleMenu: toggleMenu,\n        selectItem: selectItem,\n        selectItemAtIndex: selectItemAtIndex,\n        selectHighlightedItem: selectHighlightedItem,\n        setHighlightedIndex: setHighlightedIndex,\n        clearSelection: clearSelection,\n        clearItems: clearItems,\n        setItemCount: setItemCount,\n        unsetItemCount: unsetItemCount,\n        setState: setState,\n        // props\n        itemToString: itemToString,\n        // derived\n        id: id,\n        // state\n        highlightedIndex: highlightedIndex,\n        inputValue: inputValue,\n        isOpen: isOpen,\n        selectedItem: selectedItem\n      };\n    } //////////////////////////// ROOT\n    ;\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this7 = this;\n\n      /* istanbul ignore if (react-native) */\n      if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n      /* istanbul ignore if (react-native) */\n\n\n      {\n        // this.isMouseDown helps us track whether the mouse is currently held down.\n        // This is useful when the user clicks on an item in the list, but holds the mouse\n        // down long enough for the list to disappear (because the blur event fires on the input)\n        // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n        // trigger hiding the menu.\n        var onMouseDown = function () {\n          _this7.isMouseDown = true;\n        };\n\n        var onMouseUp = function (event) {\n          _this7.isMouseDown = false; // if the target element or the activeElement is within a downshift node\n          // then we don't want to reset downshift\n\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment.document);\n\n          if (!contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: mouseUp\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        }; // Touching an element in iOS gives focus and hover states, but touching out of\n        // the element will remove hover, and persist the focus state, resulting in the\n        // blur event not being triggered.\n        // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n        // If the user taps outside of Downshift, the component should be reset,\n        // but not if the user is swiping\n\n\n        var onTouchStart = function () {\n          _this7.isTouchMove = false;\n        };\n\n        var onTouchMove = function () {\n          _this7.isTouchMove = true;\n        };\n\n        var onTouchEnd = function (event) {\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment.document, false);\n\n          if (!_this7.isTouchMove && !contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: touchEnd\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        };\n\n        var environment = this.props.environment;\n        environment.addEventListener('mousedown', onMouseDown);\n        environment.addEventListener('mouseup', onMouseUp);\n        environment.addEventListener('touchstart', onTouchStart);\n        environment.addEventListener('touchmove', onTouchMove);\n        environment.addEventListener('touchend', onTouchEnd);\n\n        this.cleanup = function () {\n          _this7.internalClearTimeouts();\n\n          _this7.updateStatus.cancel();\n\n          environment.removeEventListener('mousedown', onMouseDown);\n          environment.removeEventListener('mouseup', onMouseUp);\n          environment.removeEventListener('touchstart', onTouchStart);\n          environment.removeEventListener('touchmove', onTouchMove);\n          environment.removeEventListener('touchend', onTouchEnd);\n        };\n      }\n    };\n\n    _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n      var _ref10 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n          currentHighlightedIndex = _ref10.highlightedIndex;\n\n      var _ref11 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n          prevHighlightedIndex = _ref11.highlightedIndex;\n\n      var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n      return scrollWhenOpen || currentHighlightedIndex !== prevHighlightedIndex;\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateControlledUnchanged(this.state, prevProps, this.props);\n        /* istanbul ignore if (react-native) */\n\n        if ( this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n          validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n        }\n      }\n\n      if (isControlledProp(this.props, 'selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n        this.internalSetState({\n          type: controlledPropUpdatedSelectedItem,\n          inputValue: this.props.itemToString(this.props.selectedItem)\n        });\n      }\n\n      if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n        this.scrollHighlightedItemIntoView();\n      }\n      /* istanbul ignore else (react-native) */\n\n\n      this.updateStatus();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.cleanup(); // avoids memory leak\n    };\n\n    _proto.render = function render() {\n      var children = unwrapArray(this.props.children, noop); // because the items are rerendered every time we call the children\n      // we clear this out each render and it will be populated again as\n      // getItemProps is called.\n\n      this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n      // this render. If they do then we don't need to do anything,\n      // if they don't then we need to clone the element they return and\n      // apply the props for them.\n\n      this.getRootProps.called = false;\n      this.getRootProps.refKey = undefined;\n      this.getRootProps.suppressRefError = undefined; // we do something similar for getMenuProps\n\n      this.getMenuProps.called = false;\n      this.getMenuProps.refKey = undefined;\n      this.getMenuProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n      this.getLabelProps.called = false; // and something similar for getInputProps\n\n      this.getInputProps.called = false;\n      var element = unwrapArray(children(this.getStateAndHelpers()));\n\n      if (!element) {\n        return null;\n      }\n\n      if (this.getRootProps.called || this.props.suppressRefError) {\n        if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n          validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n        }\n\n        return element;\n      } else if (isDOMElement(element)) {\n        // they didn't apply the root props, but we can clone\n        // this and apply the props ourselves\n        return cloneElement(element, this.getRootProps(getElementProps(element)));\n      }\n      /* istanbul ignore else */\n\n\n      if (process.env.NODE_ENV !== 'production') {\n        // they didn't apply the root props, but they need to\n        // otherwise we can't query around the autocomplete\n        throw new Error('downshift: If you return a non-DOM element, you must apply the getRootProps function');\n      }\n      /* istanbul ignore next */\n\n\n      return undefined;\n    };\n\n    return Downshift;\n  }(Component);\n\n  Downshift.defaultProps = {\n    defaultHighlightedIndex: null,\n    defaultIsOpen: false,\n    getA11yStatusMessage: getA11yStatusMessage,\n    itemToString: function itemToString(i) {\n      if (i == null) {\n        return '';\n      }\n\n      if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n        // eslint-disable-next-line no-console\n        console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n      }\n\n      return String(i);\n    },\n    onStateChange: noop,\n    onInputValueChange: noop,\n    onUserAction: noop,\n    onChange: noop,\n    onSelect: noop,\n    onOuterClick: noop,\n    selectedItemChanged: function selectedItemChanged(prevItem, item) {\n      return prevItem !== item;\n    },\n    environment: typeof window === 'undefined'\n    /* istanbul ignore next (ssr) */\n    ? {} : window,\n    stateReducer: function stateReducer(state, stateToSet) {\n      return stateToSet;\n    },\n    suppressRefError: false,\n    scrollIntoView: scrollIntoView\n  };\n  Downshift.stateChangeTypes = stateChangeTypes;\n  return Downshift;\n}();\n\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n\n} : void 0;\n\nfunction validateGetMenuPropsCalledCorrectly(node, _ref12) {\n  var refKey = _ref12.refKey;\n\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref13) {\n  var refKey = _ref13.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nvar dropdownDefaultStateValues = {\n  highlightedIndex: -1,\n  isOpen: false,\n  selectedItem: null,\n  inputValue: ''\n};\n\nfunction callOnChangeProps(action, state, newState) {\n  var props = action.props,\n      type = action.type;\n  var changes = {};\n  Object.keys(state).forEach(function (key) {\n    invokeOnChangeHandler(key, props, state, newState);\n\n    if (newState[key] !== state[key]) {\n      changes[key] = newState[key];\n    }\n  });\n\n  if (props.onStateChange && Object.keys(changes).length) {\n    props.onStateChange(_extends({\n      type: type\n    }, changes));\n  }\n}\n\nfunction invokeOnChangeHandler(key, props, state, newState) {\n  var handler = \"on\" + capitalizeString(key) + \"Change\";\n\n  if (props[handler] && newState[key] !== undefined && newState[key] !== state[key]) {\n    props[handler](newState);\n  }\n}\n/**\n * Default state reducer that returns the changes.\n *\n * @param {Object} s state.\n * @param {Object} a action with changes.\n * @returns {Object} changes.\n */\n\n\nfunction stateReducer(s, a) {\n  return a.changes;\n}\n/**\n * Returns a message to be added to aria-live region when item is selected.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\n\n\nfunction getA11ySelectionMessage(selectionParameters) {\n  var selectedItem = selectionParameters.selectedItem,\n      itemToStringLocal = selectionParameters.itemToString;\n  return selectedItem ? itemToStringLocal(selectedItem) + \" has been selected.\" : '';\n}\n/**\n * Debounced call for updating the a11y message.\n */\n\n\nvar updateA11yStatus = debounce(function (getA11yMessage, document) {\n  setStatus(getA11yMessage(), document);\n}, 200);\nfunction getElementIds(_ref) {\n  var id = _ref.id,\n      labelId = _ref.labelId,\n      menuId = _ref.menuId,\n      getItemId = _ref.getItemId,\n      toggleButtonId = _ref.toggleButtonId;\n  var uniqueId = id === undefined ? \"downshift-\" + generateId() : id;\n  return {\n    labelId: labelId || uniqueId + \"-label\",\n    menuId: menuId || uniqueId + \"-menu\",\n    getItemId: getItemId || function (index) {\n      return uniqueId + \"-item-\" + index;\n    },\n    toggleButtonId: toggleButtonId || uniqueId + \"-toggle-button\"\n  };\n}\nfunction getItemIndex(index, item, items) {\n  if (index !== undefined) {\n    return index;\n  }\n\n  if (items.length === 0) {\n    return -1;\n  }\n\n  return items.indexOf(item);\n}\n\nfunction itemToString(item) {\n  return item ? String(item) : '';\n}\n\nfunction getPropTypesValidator(caller, propTypes) {\n  // istanbul ignore next\n  return function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    Object.keys(propTypes).forEach(function (key) {\n      PropTypes.checkPropTypes(propTypes, options, key, caller.name);\n    });\n  };\n}\nfunction isAcceptedCharacterKey(key) {\n  return /^\\S{1}$/.test(key);\n}\nfunction capitalizeString(string) {\n  return \"\" + string.slice(0, 1).toUpperCase() + string.slice(1);\n}\nfunction useLatestRef(val) {\n  var ref = useRef(val); // technically this is not \"concurrent mode safe\" because we're manipulating\n  // the value during render (so it's not idempotent). However, the places this\n  // hook is used is to support memoizing callbacks which will be called\n  // *during* render, so we need the latest values *during* render.\n  // If not for this, then we'd probably want to use useLayoutEffect instead.\n\n  ref.current = val;\n  return ref;\n}\n/**\n * Computes the controlled state using a the previous state, props,\n * two reducers, one from downshift and an optional one from the user.\n * Also calls the onChange handlers for state values that have changed.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\nfunction useEnhancedReducer(reducer, initialState, props) {\n  var prevStateRef = useRef();\n  var actionRef = useRef();\n  var enhancedReducer = useCallback(function (state, action) {\n    actionRef.current = action;\n    state = getState(state, action.props);\n    var changes = reducer(state, action);\n    var newState = action.props.stateReducer(state, _extends({}, action, {\n      changes: changes\n    }));\n    return newState;\n  }, [reducer]);\n\n  var _useReducer = useReducer(enhancedReducer, initialState),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  var propsRef = useLatestRef(props);\n  var dispatchWithProps = useCallback(function (action) {\n    return dispatch(_extends({\n      props: propsRef.current\n    }, action));\n  }, [propsRef]);\n  var action = actionRef.current;\n  useEffect(function () {\n    if (action && prevStateRef.current && prevStateRef.current !== state) {\n      callOnChangeProps(action, getState(prevStateRef.current, action.props), state);\n    }\n\n    prevStateRef.current = state;\n  }, [state, props, action]);\n  return [state, dispatchWithProps];\n}\n/**\n * Wraps the useEnhancedReducer and applies the controlled prop values before\n * returning the new state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\nfunction useControlledReducer(reducer, initialState, props) {\n  var _useEnhancedReducer = useEnhancedReducer(reducer, initialState, props),\n      state = _useEnhancedReducer[0],\n      dispatch = _useEnhancedReducer[1];\n\n  return [getState(state, props), dispatch];\n}\nvar defaultProps = {\n  itemToString: itemToString,\n  stateReducer: stateReducer,\n  getA11ySelectionMessage: getA11ySelectionMessage,\n  scrollIntoView: scrollIntoView,\n  circularNavigation: false,\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window\n};\nfunction getDefaultValue(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n\n  var defaultPropKey = \"default\" + capitalizeString(propKey);\n\n  if (defaultPropKey in props) {\n    return props[defaultPropKey];\n  }\n\n  return defaultStateValues[propKey];\n}\nfunction getInitialValue(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n\n  if (propKey in props) {\n    return props[propKey];\n  }\n\n  var initialPropKey = \"initial\" + capitalizeString(propKey);\n\n  if (initialPropKey in props) {\n    return props[initialPropKey];\n  }\n\n  return getDefaultValue(props, propKey, defaultStateValues);\n}\nfunction getInitialState(props) {\n  var selectedItem = getInitialValue(props, 'selectedItem');\n  var isOpen = getInitialValue(props, 'isOpen');\n  var highlightedIndex = getInitialValue(props, 'highlightedIndex');\n  var inputValue = getInitialValue(props, 'inputValue');\n  return {\n    highlightedIndex: highlightedIndex < 0 && selectedItem && isOpen ? props.items.indexOf(selectedItem) : highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\nfunction getHighlightedIndexOnOpen(props, state, offset, getItemNodeFromIndex) {\n  var items = props.items,\n      initialHighlightedIndex = props.initialHighlightedIndex,\n      defaultHighlightedIndex = props.defaultHighlightedIndex;\n  var selectedItem = state.selectedItem,\n      highlightedIndex = state.highlightedIndex;\n\n  if (items.length === 0) {\n    return -1;\n  } // initialHighlightedIndex will give value to highlightedIndex on initial state only.\n\n\n  if (initialHighlightedIndex !== undefined && highlightedIndex === initialHighlightedIndex) {\n    return initialHighlightedIndex;\n  }\n\n  if (defaultHighlightedIndex !== undefined) {\n    return defaultHighlightedIndex;\n  }\n\n  if (selectedItem) {\n    if (offset === 0) {\n      return items.indexOf(selectedItem);\n    }\n\n    return getNextWrappingIndex(offset, items.indexOf(selectedItem), items.length, getItemNodeFromIndex, false);\n  }\n\n  if (offset === 0) {\n    return -1;\n  }\n\n  return offset < 0 ? items.length - 1 : 0;\n}\n/**\n * Reuse the movement tracking of mouse and touch events.\n *\n * @param {boolean} isOpen Whether the dropdown is open or not.\n * @param {Array<Object>} downshiftElementRefs Downshift element refs to track movement (toggleButton, menu etc.)\n * @param {Object} environment Environment where component/hook exists.\n * @param {Function} handleBlur Handler on blur from mouse or touch.\n * @returns {Object} Ref containing whether mouseDown or touchMove event is happening\n */\n\nfunction useMouseAndTouchTracker(isOpen, downshiftElementRefs, environment, handleBlur) {\n  var mouseAndTouchTrackersRef = useRef({\n    isMouseDown: false,\n    isTouchMove: false\n  });\n  useEffect(function () {\n    // The same strategy for checking if a click occurred inside or outside downsift\n    // as in downshift.js.\n    var onMouseDown = function () {\n      mouseAndTouchTrackersRef.current.isMouseDown = true;\n    };\n\n    var onMouseUp = function (event) {\n      mouseAndTouchTrackersRef.current.isMouseDown = false;\n\n      if (isOpen && !targetWithinDownshift(event.target, downshiftElementRefs.map(function (ref) {\n        return ref.current;\n      }), environment.document)) {\n        handleBlur();\n      }\n    };\n\n    var onTouchStart = function () {\n      mouseAndTouchTrackersRef.current.isTouchMove = false;\n    };\n\n    var onTouchMove = function () {\n      mouseAndTouchTrackersRef.current.isTouchMove = true;\n    };\n\n    var onTouchEnd = function (event) {\n      if (isOpen && !mouseAndTouchTrackersRef.current.isTouchMove && !targetWithinDownshift(event.target, downshiftElementRefs.map(function (ref) {\n        return ref.current;\n      }), environment.document, false)) {\n        handleBlur();\n      }\n    };\n\n    environment.addEventListener('mousedown', onMouseDown);\n    environment.addEventListener('mouseup', onMouseUp);\n    environment.addEventListener('touchstart', onTouchStart);\n    environment.addEventListener('touchmove', onTouchMove);\n    environment.addEventListener('touchend', onTouchEnd);\n    return function () {\n      environment.removeEventListener('mousedown', onMouseDown);\n      environment.removeEventListener('mouseup', onMouseUp);\n      environment.removeEventListener('touchstart', onTouchStart);\n      environment.removeEventListener('touchmove', onTouchMove);\n      environment.removeEventListener('touchend', onTouchEnd);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, environment]);\n  return mouseAndTouchTrackersRef;\n}\n/**\n * Custom hook that checks if getter props are called correctly.\n *\n * @param  {...any} propKeys Getter prop names to be handled.\n * @returns {Function} Setter function called inside getter props to set call information.\n */\n\nfunction useGetterPropsCalledChecker() {\n  var isNotProduction = process.env.NODE_ENV !== 'production';\n  var isInitialMountRef = useRef(true);\n\n  for (var _len = arguments.length, propKeys = new Array(_len), _key = 0; _key < _len; _key++) {\n    propKeys[_key] = arguments[_key];\n  }\n\n  var getterPropsCalledRef = useRef(propKeys.reduce(function (acc, propKey) {\n    acc[propKey] = {};\n    return acc;\n  }, {}));\n  useEffect(function () {\n    if (!isNotProduction) {\n      return;\n    }\n\n    Object.keys(getterPropsCalledRef.current).forEach(function (propKey) {\n      var propCallInfo = getterPropsCalledRef.current[propKey];\n\n      if (isInitialMountRef.current) {\n        if (!Object.keys(propCallInfo).length) {\n          // eslint-disable-next-line no-console\n          console.error(\"downshift: You forgot to call the \" + propKey + \" getter function on your component / element.\");\n          return;\n        }\n      }\n\n      var suppressRefError = propCallInfo.suppressRefError,\n          refKey = propCallInfo.refKey,\n          elementRef = propCallInfo.elementRef;\n\n      if ((!elementRef || !elementRef.current) && !suppressRefError) {\n        // eslint-disable-next-line no-console\n        console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from \" + propKey + \" was not applied correctly on your element.\");\n      }\n    });\n    isInitialMountRef.current = false;\n  });\n  var setGetterPropCallInfo = useCallback(function (propKey, suppressRefError, refKey, elementRef) {\n    if (process.env.NODE_ENV !== 'production') {\n      getterPropsCalledRef.current[propKey] = {\n        suppressRefError: suppressRefError,\n        refKey: refKey,\n        elementRef: elementRef\n      };\n    }\n  }, []);\n  return setGetterPropCallInfo;\n}\n\nfunction getItemIndexByCharacterKey(keysSoFar, highlightedIndex, items, itemToStringParam, getItemNodeFromIndex) {\n  var lowerCasedItemStrings = items.map(function (item) {\n    return itemToStringParam(item).toLowerCase();\n  });\n  var lowerCasedKeysSoFar = keysSoFar.toLowerCase();\n\n  var isValid = function (itemString, index) {\n    var element = getItemNodeFromIndex(index);\n    return itemString.startsWith(lowerCasedKeysSoFar) && !(element && element.hasAttribute('disabled'));\n  };\n\n  for (var index = highlightedIndex + 1; index < lowerCasedItemStrings.length; index++) {\n    var itemString = lowerCasedItemStrings[index];\n\n    if (isValid(itemString, index)) {\n      return index;\n    }\n  }\n\n  for (var _index = 0; _index < highlightedIndex; _index++) {\n    var _itemString = lowerCasedItemStrings[_index];\n\n    if (isValid(_itemString, _index)) {\n      return _index;\n    }\n  }\n\n  return highlightedIndex;\n}\n\nvar propTypes = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\nfunction getA11yStatusMessage$1(_ref) {\n  var isOpen = _ref.isOpen,\n      resultCount = _ref.resultCount,\n      previousResultCount = _ref.previousResultCount;\n\n  if (!isOpen) {\n    return '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.\";\n  }\n\n  return '';\n}\n\nvar defaultProps$1 = _extends({}, defaultProps, {\n  getA11yStatusMessage: getA11yStatusMessage$1\n});\n\nvar MenuKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_down__' : 0;\nvar MenuKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_up__' : 1;\nvar MenuKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_escape__' : 2;\nvar MenuKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_home__' : 3;\nvar MenuKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_end__' : 4;\nvar MenuKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_enter__' : 5;\nvar MenuKeyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_space_button__' : 6;\nvar MenuKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_character__' : 7;\nvar MenuBlur = process.env.NODE_ENV !== \"production\" ? '__menu_blur__' : 8;\nvar MenuMouseLeave = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 9;\nvar ItemMouseMove = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 10;\nvar ItemClick = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 11;\nvar ToggleButtonClick = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 12;\nvar ToggleButtonKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_down__' : 13;\nvar ToggleButtonKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_up__' : 14;\nvar ToggleButtonKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_character__' : 15;\nvar FunctionToggleMenu = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 16;\nvar FunctionOpenMenu = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 17;\nvar FunctionCloseMenu = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 18;\nvar FunctionSetHighlightedIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 19;\nvar FunctionSelectItem = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 20;\nvar FunctionSetInputValue = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 21;\nvar FunctionReset = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 22;\n\nvar stateChangeTypes$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  MenuKeyDownArrowDown: MenuKeyDownArrowDown,\n  MenuKeyDownArrowUp: MenuKeyDownArrowUp,\n  MenuKeyDownEscape: MenuKeyDownEscape,\n  MenuKeyDownHome: MenuKeyDownHome,\n  MenuKeyDownEnd: MenuKeyDownEnd,\n  MenuKeyDownEnter: MenuKeyDownEnter,\n  MenuKeyDownSpaceButton: MenuKeyDownSpaceButton,\n  MenuKeyDownCharacter: MenuKeyDownCharacter,\n  MenuBlur: MenuBlur,\n  MenuMouseLeave: MenuMouseLeave,\n  ItemMouseMove: ItemMouseMove,\n  ItemClick: ItemClick,\n  ToggleButtonClick: ToggleButtonClick,\n  ToggleButtonKeyDownArrowDown: ToggleButtonKeyDownArrowDown,\n  ToggleButtonKeyDownArrowUp: ToggleButtonKeyDownArrowUp,\n  ToggleButtonKeyDownCharacter: ToggleButtonKeyDownCharacter,\n  FunctionToggleMenu: FunctionToggleMenu,\n  FunctionOpenMenu: FunctionOpenMenu,\n  FunctionCloseMenu: FunctionCloseMenu,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex,\n  FunctionSelectItem: FunctionSelectItem,\n  FunctionSetInputValue: FunctionSetInputValue,\n  FunctionReset: FunctionReset\n});\n\n/* eslint-disable complexity */\n\nfunction downshiftSelectReducer(state, action) {\n  var type = action.type,\n      props = action.props,\n      shiftKey = action.shiftKey;\n  var changes;\n\n  switch (type) {\n    case ItemMouseMove:\n      changes = {\n        highlightedIndex: action.index\n      };\n      break;\n\n    case ItemClick:\n      changes = {\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index]\n      };\n      break;\n\n    case ToggleButtonKeyDownCharacter:\n      {\n        var lowercasedKey = action.key;\n        var inputValue = \"\" + state.inputValue + lowercasedKey;\n        var itemIndex = getItemIndexByCharacterKey(inputValue, state.selectedItem ? props.items.indexOf(state.selectedItem) : -1, props.items, props.itemToString, action.getItemNodeFromIndex);\n        changes = _extends({\n          inputValue: inputValue\n        }, itemIndex >= 0 && {\n          selectedItem: props.items[itemIndex]\n        });\n      }\n      break;\n\n    case ToggleButtonKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n        isOpen: true\n      };\n      break;\n\n    case ToggleButtonKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n        isOpen: true\n      };\n      break;\n\n    case MenuKeyDownEnter:\n    case MenuKeyDownSpaceButton:\n      changes = _extends({\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex')\n      }, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex]\n      });\n      break;\n\n    case MenuKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case MenuKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case MenuKeyDownEscape:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuBlur:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuKeyDownCharacter:\n      {\n        var _lowercasedKey = action.key;\n\n        var _inputValue = \"\" + state.inputValue + _lowercasedKey;\n\n        var highlightedIndex = getItemIndexByCharacterKey(_inputValue, state.highlightedIndex, props.items, props.itemToString, action.getItemNodeFromIndex);\n        changes = _extends({\n          inputValue: _inputValue\n        }, highlightedIndex >= 0 && {\n          highlightedIndex: highlightedIndex\n        });\n      }\n      break;\n\n    case MenuKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n      };\n      break;\n\n    case MenuKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n      };\n      break;\n\n    case MenuMouseLeave:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n\n    case ToggleButtonClick:\n    case FunctionToggleMenu:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionOpenMenu:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionCloseMenu:\n      changes = {\n        isOpen: false\n      };\n      break;\n\n    case FunctionSetHighlightedIndex:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n\n    case FunctionSelectItem:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n\n    case FunctionSetInputValue:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n\n    case FunctionReset:\n      changes = {\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        isOpen: getDefaultValue(props, 'isOpen'),\n        selectedItem: getDefaultValue(props, 'selectedItem'),\n        inputValue: getDefaultValue(props, 'inputValue')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nvar validatePropTypes = process.env.NODE_ENV === 'production' ?\n/* istanbul ignore next */\nnull : getPropTypesValidator(useSelect, propTypes);\nuseSelect.stateChangeTypes = stateChangeTypes$1;\n\nfunction useSelect(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    validatePropTypes(userProps);\n  } // Props defaults and destructuring.\n\n\n  var props = _extends({}, defaultProps$1, userProps);\n\n  var items = props.items,\n      scrollIntoView = props.scrollIntoView,\n      environment = props.environment,\n      initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen,\n      itemToString = props.itemToString,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      getA11yStatusMessage = props.getA11yStatusMessage; // Initial state depending on controlled props.\n\n  var initialState = getInitialState(props);\n\n  var _useControlledReducer = useControlledReducer(downshiftSelectReducer, initialState, props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var isOpen = state.isOpen,\n      highlightedIndex = state.highlightedIndex,\n      selectedItem = state.selectedItem,\n      inputValue = state.inputValue; // Element efs.\n\n  var toggleButtonRef = useRef(null);\n  var menuRef = useRef(null);\n  var itemRefs = useRef();\n  itemRefs.current = {}; // used not to scroll when highlight by mouse.\n\n  var shouldScrollRef = useRef(true); // used not to trigger menu blur action in some scenarios.\n\n  var shouldBlurRef = useRef(true); // used to keep the inputValue clearTimeout object between renders.\n\n  var clearTimeoutRef = useRef(null); // prevent id re-generation between renders.\n\n  var elementIdsRef = useRef(getElementIds(props)); // used to keep track of how many items we had on previous cycle.\n\n  var previousResultCountRef = useRef();\n  var isInitialMountRef = useRef(true); // used for checking when props are moving from controlled to uncontrolled.\n\n  var prevPropsRef = useRef(props); // utility callback to get item element.\n\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  }); // Some utils.\n\n  var getItemNodeFromIndex = function (index) {\n    return itemRefs.current[elementIdsRef.current.getItemId(index)];\n  }; // Effects.\n  // Sets a11y status message on changes in state.\n\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    var previousResultCount = previousResultCountRef.current;\n    updateA11yStatus(function () {\n      return getA11yStatusMessage({\n        isOpen: isOpen,\n        highlightedIndex: highlightedIndex,\n        selectedItem: selectedItem,\n        inputValue: inputValue,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length,\n        itemToString: itemToString,\n        previousResultCount: previousResultCount\n      });\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, highlightedIndex, inputValue, items]); // Sets a11y status message on changes in selectedItem.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    var previousResultCount = previousResultCountRef.current;\n    updateA11yStatus(function () {\n      return getA11ySelectionMessage({\n        isOpen: isOpen,\n        highlightedIndex: highlightedIndex,\n        selectedItem: selectedItem,\n        inputValue: inputValue,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length,\n        itemToString: itemToString,\n        previousResultCount: previousResultCount\n      });\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItem]); // Sets cleanup for the keysSoFar after 500ms.\n\n  useEffect(function () {\n    // init the clean function here as we need access to dispatch.\n    if (isInitialMountRef.current) {\n      clearTimeoutRef.current = debounce(function (outerDispatch) {\n        outerDispatch({\n          type: FunctionSetInputValue,\n          inputValue: ''\n        });\n      }, 500);\n    }\n\n    if (!inputValue) {\n      return;\n    }\n\n    clearTimeoutRef.current(dispatch); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [inputValue]);\n  /* Controls the focus on the menu or the toggle button. */\n\n  useEffect(function () {\n    // Don't focus menu on first render.\n    if (isInitialMountRef.current) {\n      // Unless it was initialised as open.\n      if ((initialIsOpen || defaultIsOpen || isOpen) && menuRef.current) {\n        menuRef.current.focus();\n      }\n\n      return;\n    } // Focus menu on open.\n\n\n    if (isOpen) {\n      // istanbul ignore else\n      if (menuRef.current) {\n        menuRef.current.focus();\n      }\n\n      return;\n    } // Focus toggleButton on close, but not if it was closed with (Shift+)Tab.\n\n\n    if (environment.document.activeElement === menuRef.current) {\n      // istanbul ignore else\n      if (toggleButtonRef.current) {\n        shouldBlurRef.current = false;\n        toggleButtonRef.current.focus();\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [isOpen]); // Scroll on highlighted item if change comes from keyboard.\n\n  useEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !Object.keys(itemRefs.current).length) {\n      return;\n    }\n\n    if (shouldScrollRef.current === false) {\n      shouldScrollRef.current = true;\n    } else {\n      scrollIntoView(getItemNodeFromIndex(highlightedIndex), menuRef.current);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [highlightedIndex]);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    previousResultCountRef.current = items.length;\n  });\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    validateControlledUnchanged(state, prevPropsRef.current, props);\n    prevPropsRef.current = props;\n  }, [state, props]); // Add mouse/touch events to document.\n\n  var mouseAndTouchTrackersRef = useMouseAndTouchTracker(isOpen, [menuRef, toggleButtonRef], environment, function () {\n    dispatch({\n      type: MenuBlur\n    });\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getMenuProps', 'getToggleButtonProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []); // Event handler functions.\n\n  var toggleButtonKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowDown,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowUp,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      }\n    };\n  }, [dispatch]);\n  var menuKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownArrowDown,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownArrowUp,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      Home: function Home(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownHome,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      End: function End(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownEnd,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Escape: function Escape() {\n        dispatch({\n          type: MenuKeyDownEscape\n        });\n      },\n      Enter: function Enter(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownEnter\n        });\n      },\n      ' ': function _(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownSpaceButton\n        });\n      }\n    };\n  }, [dispatch]); // Action functions.\n\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue,\n      inputValue: newInputValue\n    });\n  }, [dispatch]); // Getter functions.\n\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIdsRef.current.labelId,\n      htmlFor: elementIdsRef.current.toggleButtonId\n    }, labelProps);\n  }, []);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n\n    var _ref = _temp === void 0 ? {} : _temp,\n        onMouseLeave = _ref.onMouseLeave,\n        _ref$refKey = _ref.refKey,\n        refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n        onKeyDown = _ref.onKeyDown,\n        onBlur = _ref.onBlur,\n        ref = _ref.ref,\n        rest = _objectWithoutPropertiesLoose(_ref, [\"onMouseLeave\", \"refKey\", \"onKeyDown\", \"onBlur\", \"ref\"]);\n\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n        _ref2$suppressRefErro = _ref2.suppressRefError,\n        suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n    var latestState = latest.current.state;\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIdsRef.current.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = elementIdsRef.current.labelId, _extends2.tabIndex = -1, _extends2), latestState.isOpen && latestState.highlightedIndex > -1 && {\n      'aria-activedescendant': elementIdsRef.current.getItemId(latestState.highlightedIndex)\n    }, {\n      onMouseLeave: callAllEventHandlers(onMouseLeave, function menuHandleMouseLeave() {\n        dispatch({\n          type: MenuMouseLeave\n        });\n      }),\n      onKeyDown: callAllEventHandlers(onKeyDown, function menuHandleKeyDown(event) {\n        var key = normalizeArrowKey(event);\n\n        if (key && menuKeyDownHandlers[key]) {\n          menuKeyDownHandlers[key](event);\n        } else if (isAcceptedCharacterKey(key)) {\n          dispatch({\n            type: MenuKeyDownCharacter,\n            key: key,\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        }\n      }),\n      onBlur: callAllEventHandlers(onBlur, function menuHandleBlur() {\n        // if the blur was a result of selection, we don't trigger this action.\n        if (shouldBlurRef.current === false) {\n          shouldBlurRef.current = true;\n          return;\n        }\n\n        var shouldBlur = !mouseAndTouchTrackersRef.current.isMouseDown;\n        /* istanbul ignore else */\n\n        if (shouldBlur) {\n          dispatch({\n            type: MenuBlur\n          });\n        }\n      })\n    }, rest);\n  }, [dispatch, latest, menuKeyDownHandlers, mouseAndTouchTrackersRef, setGetterPropCallInfo]);\n  var getToggleButtonProps = useCallback(function (_temp3, _temp4) {\n    var _extends3;\n\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n        onClick = _ref3.onClick,\n        onKeyDown = _ref3.onKeyDown,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onKeyDown\", \"refKey\", \"ref\"]);\n\n    var _ref4 = _temp4 === void 0 ? {} : _temp4,\n        _ref4$suppressRefErro = _ref4.suppressRefError,\n        suppressRefError = _ref4$suppressRefErro === void 0 ? false : _ref4$suppressRefErro;\n\n    var toggleButtonHandleClick = function () {\n      dispatch({\n        type: ToggleButtonClick\n      });\n    };\n\n    var toggleButtonHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && toggleButtonKeyDownHandlers[key]) {\n        toggleButtonKeyDownHandlers[key](event);\n      } else if (isAcceptedCharacterKey(key)) {\n        dispatch({\n          type: ToggleButtonKeyDownCharacter,\n          key: key,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      }\n    };\n\n    var toggleProps = _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends3.id = elementIdsRef.current.toggleButtonId, _extends3['aria-haspopup'] = 'listbox', _extends3['aria-expanded'] = latest.current.state.isOpen, _extends3['aria-labelledby'] = elementIdsRef.current.labelId + \" \" + elementIdsRef.current.toggleButtonId, _extends3), rest);\n\n    if (!rest.disabled) {\n      toggleProps.onClick = callAllEventHandlers(onClick, toggleButtonHandleClick);\n      toggleProps.onKeyDown = callAllEventHandlers(onKeyDown, toggleButtonHandleKeyDown);\n    }\n\n    setGetterPropCallInfo('getToggleButtonProps', suppressRefError, refKey, toggleButtonRef);\n    return toggleProps;\n  }, [dispatch, latest, toggleButtonKeyDownHandlers, setGetterPropCallInfo]);\n  var getItemProps = useCallback(function (_temp5) {\n    var _extends4;\n\n    var _ref5 = _temp5 === void 0 ? {} : _temp5,\n        item = _ref5.item,\n        index = _ref5.index,\n        onMouseMove = _ref5.onMouseMove,\n        onClick = _ref5.onClick,\n        _ref5$refKey = _ref5.refKey,\n        refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n        ref = _ref5.ref,\n        rest = _objectWithoutPropertiesLoose(_ref5, [\"item\", \"index\", \"onMouseMove\", \"onClick\", \"refKey\", \"ref\"]);\n\n    var _latest$current = latest.current,\n        latestState = _latest$current.state,\n        latestProps = _latest$current.props;\n\n    var itemHandleMouseMove = function () {\n      if (index === latestState.highlightedIndex) {\n        return;\n      }\n\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove,\n        index: index\n      });\n    };\n\n    var itemHandleClick = function () {\n      dispatch({\n        type: ItemClick,\n        index: index\n      });\n    };\n\n    var itemIndex = getItemIndex(index, item, latestProps.items);\n\n    if (itemIndex < 0) {\n      throw new Error('Pass either item or item index in getItemProps!');\n    }\n\n    var itemProps = _extends((_extends4 = {\n      role: 'option',\n      'aria-selected': \"\" + (itemIndex === latestState.highlightedIndex),\n      id: elementIdsRef.current.getItemId(itemIndex)\n    }, _extends4[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIdsRef.current.getItemId(itemIndex)] = itemNode;\n      }\n    }), _extends4), rest);\n\n    if (!rest.disabled) {\n      itemProps.onMouseMove = callAllEventHandlers(onMouseMove, itemHandleMouseMove);\n      itemProps.onClick = callAllEventHandlers(onClick, itemHandleClick);\n    }\n\n    return itemProps;\n  }, [dispatch, latest]);\n  return {\n    // prop getters.\n    getToggleButtonProps: getToggleButtonProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getItemProps: getItemProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    selectItem: selectItem,\n    reset: reset,\n    setInputValue: setInputValue,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar InputKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_down__' : 0;\nvar InputKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_up__' : 1;\nvar InputKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__input_keydown_escape__' : 2;\nvar InputKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__input_keydown_home__' : 3;\nvar InputKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__input_keydown_end__' : 4;\nvar InputKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__input_keydown_enter__' : 5;\nvar InputChange = process.env.NODE_ENV !== \"production\" ? '__input_change__' : 6;\nvar InputBlur = process.env.NODE_ENV !== \"production\" ? '__input_blur__' : 7;\nvar MenuMouseLeave$1 = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 8;\nvar ItemMouseMove$1 = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 9;\nvar ItemClick$1 = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 10;\nvar ToggleButtonClick$1 = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 11;\nvar FunctionToggleMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 12;\nvar FunctionOpenMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 13;\nvar FunctionCloseMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 14;\nvar FunctionSetHighlightedIndex$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 15;\nvar FunctionSelectItem$1 = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 16;\nvar FunctionSetInputValue$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 17;\nvar FunctionReset$1 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 18;\nvar ControlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__controlled_prop_updated_selected_item__' : 19;\n\nvar stateChangeTypes$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  InputKeyDownArrowDown: InputKeyDownArrowDown,\n  InputKeyDownArrowUp: InputKeyDownArrowUp,\n  InputKeyDownEscape: InputKeyDownEscape,\n  InputKeyDownHome: InputKeyDownHome,\n  InputKeyDownEnd: InputKeyDownEnd,\n  InputKeyDownEnter: InputKeyDownEnter,\n  InputChange: InputChange,\n  InputBlur: InputBlur,\n  MenuMouseLeave: MenuMouseLeave$1,\n  ItemMouseMove: ItemMouseMove$1,\n  ItemClick: ItemClick$1,\n  ToggleButtonClick: ToggleButtonClick$1,\n  FunctionToggleMenu: FunctionToggleMenu$1,\n  FunctionOpenMenu: FunctionOpenMenu$1,\n  FunctionCloseMenu: FunctionCloseMenu$1,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex$1,\n  FunctionSelectItem: FunctionSelectItem$1,\n  FunctionSetInputValue: FunctionSetInputValue$1,\n  FunctionReset: FunctionReset$1,\n  ControlledPropUpdatedSelectedItem: ControlledPropUpdatedSelectedItem\n});\n\nfunction getElementIds$1(_ref) {\n  var id = _ref.id,\n      inputId = _ref.inputId,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"id\", \"inputId\"]);\n\n  var uniqueId = id === undefined ? \"downshift-\" + generateId() : id;\n  return _extends({\n    inputId: inputId || uniqueId + \"-input\"\n  }, getElementIds(_extends({\n    id: id\n  }, rest)));\n}\nfunction getInitialState$1(props) {\n  var initialState = getInitialState(props);\n  var selectedItem = initialState.selectedItem;\n  var inputValue = initialState.inputValue;\n\n  if (inputValue === '' && selectedItem && props.defaultInputValue === undefined && props.initialInputValue === undefined && props.inputValue === undefined) {\n    inputValue = props.itemToString(selectedItem);\n  }\n\n  return _extends({}, initialState, {\n    inputValue: inputValue\n  });\n}\nvar propTypes$1 = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  inputValue: PropTypes.string,\n  defaultInputValue: PropTypes.string,\n  initialInputValue: PropTypes.string,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  inputId: PropTypes.string,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n/**\n * The useCombobox version of useControlledReducer, which also\n * checks if the controlled prop selectedItem changed between\n * renders. If so, it will also update inputValue with its\n * string equivalent. It uses the common useEnhancedReducer to\n * compute the rest of the state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\nfunction useControlledReducer$1(reducer, initialState, props) {\n  var previousSelectedItemRef = useRef();\n\n  var _useEnhancedReducer = useEnhancedReducer(reducer, initialState, props),\n      state = _useEnhancedReducer[0],\n      dispatch = _useEnhancedReducer[1]; // ToDo: if needed, make same approach as selectedItemChanged from Downshift.\n\n\n  useEffect(function () {\n    if (isControlledProp(props, 'selectedItem')) {\n      if (previousSelectedItemRef.current !== props.selectedItem) {\n        dispatch({\n          type: ControlledPropUpdatedSelectedItem,\n          inputValue: props.itemToString(props.selectedItem)\n        });\n      }\n\n      previousSelectedItemRef.current = state.selectedItem === previousSelectedItemRef.current ? props.selectedItem : state.selectedItem;\n    }\n  });\n  return [getState(state, props), dispatch];\n}\nvar defaultProps$2 = _extends({}, defaultProps, {\n  getA11yStatusMessage: getA11yStatusMessage,\n  circularNavigation: true\n});\n\n/* eslint-disable complexity */\n\nfunction downshiftUseComboboxReducer(state, action) {\n  var type = action.type,\n      props = action.props,\n      shiftKey = action.shiftKey;\n  var changes;\n\n  switch (type) {\n    case ItemMouseMove$1:\n      changes = {\n        highlightedIndex: action.index\n      };\n      break;\n\n    case ItemClick$1:\n      changes = {\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index],\n        inputValue: props.itemToString(props.items[action.index])\n      };\n      break;\n\n    case InputKeyDownArrowDown:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n        };\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n          isOpen: true\n        };\n      }\n\n      break;\n\n    case InputKeyDownArrowUp:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n        };\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n          isOpen: true\n        };\n      }\n\n      break;\n\n    case InputKeyDownEnter:\n      changes = _extends({}, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex],\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        inputValue: props.itemToString(props.items[state.highlightedIndex])\n      });\n      break;\n\n    case InputKeyDownEscape:\n      changes = {\n        isOpen: false,\n        selectedItem: null,\n        highlightedIndex: -1,\n        inputValue: ''\n      };\n      break;\n\n    case InputKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputBlur:\n      changes = _extends({\n        isOpen: false\n      }, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex],\n        inputValue: props.itemToString(props.items[state.highlightedIndex]),\n        highlightedIndex: -1\n      });\n      break;\n\n    case InputChange:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        inputValue: action.inputValue\n      };\n      break;\n\n    case MenuMouseLeave$1:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n\n    case ToggleButtonClick$1:\n    case FunctionToggleMenu$1:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionOpenMenu$1:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionCloseMenu$1:\n      changes = {\n        isOpen: false\n      };\n      break;\n\n    case FunctionSetHighlightedIndex$1:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n\n    case FunctionSelectItem$1:\n      changes = {\n        selectedItem: action.selectedItem,\n        inputValue: props.itemToString(action.selectedItem)\n      };\n      break;\n\n    case ControlledPropUpdatedSelectedItem:\n    case FunctionSetInputValue$1:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n\n    case FunctionReset$1:\n      changes = {\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        isOpen: getDefaultValue(props, 'isOpen'),\n        selectedItem: getDefaultValue(props, 'selectedItem'),\n        inputValue: getDefaultValue(props, 'inputValue')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nvar validatePropTypes$1 = process.env.NODE_ENV === 'production' ?\n/* istanbul ignore next */\nnull : getPropTypesValidator(useCombobox, propTypes$1);\nuseCombobox.stateChangeTypes = stateChangeTypes$2;\n\nfunction useCombobox(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    validatePropTypes$1(userProps);\n  } // Props defaults and destructuring.\n\n\n  var props = _extends({}, defaultProps$2, userProps);\n\n  var initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen,\n      items = props.items,\n      scrollIntoView = props.scrollIntoView,\n      environment = props.environment,\n      getA11yStatusMessage = props.getA11yStatusMessage,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      itemToString = props.itemToString; // Initial state depending on controlled props.\n\n  var initialState = getInitialState$1(props);\n\n  var _useControlledReducer = useControlledReducer$1(downshiftUseComboboxReducer, initialState, props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var isOpen = state.isOpen,\n      highlightedIndex = state.highlightedIndex,\n      selectedItem = state.selectedItem,\n      inputValue = state.inputValue; // Element refs.\n\n  var menuRef = useRef(null);\n  var itemRefs = useRef();\n  var inputRef = useRef(null);\n  var toggleButtonRef = useRef(null);\n  var comboboxRef = useRef(null);\n  itemRefs.current = {}; // used not to scroll on highlight by mouse.\n\n  var shouldScrollRef = useRef(true);\n  var isInitialMountRef = useRef(true); // prevent id re-generation between renders.\n\n  var elementIdsRef = useRef(getElementIds$1(props)); // used to keep track of how many items we had on previous cycle.\n\n  var previousResultCountRef = useRef(); // used for checking when props are moving from controlled to uncontrolled.\n\n  var prevPropsRef = useRef(props); // utility callback to get item element.\n\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n\n  var getItemNodeFromIndex = function (index) {\n    return itemRefs.current[elementIdsRef.current.getItemId(index)];\n  }; // Effects.\n  // Sets a11y status message on changes in state.\n\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    var previousResultCount = previousResultCountRef.current;\n    updateA11yStatus(function () {\n      return getA11yStatusMessage({\n        isOpen: isOpen,\n        highlightedIndex: highlightedIndex,\n        selectedItem: selectedItem,\n        inputValue: inputValue,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length,\n        itemToString: itemToString,\n        previousResultCount: previousResultCount\n      });\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, highlightedIndex, inputValue, items]); // Sets a11y status message on changes in selectedItem.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    var previousResultCount = previousResultCountRef.current;\n    updateA11yStatus(function () {\n      return getA11ySelectionMessage({\n        isOpen: isOpen,\n        highlightedIndex: highlightedIndex,\n        selectedItem: selectedItem,\n        inputValue: inputValue,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length,\n        itemToString: itemToString,\n        previousResultCount: previousResultCount\n      });\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItem]); // Scroll on highlighted item if change comes from keyboard.\n\n  useEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !Object.keys(itemRefs.current).length) {\n      return;\n    }\n\n    if (shouldScrollRef.current === false) {\n      shouldScrollRef.current = true;\n    } else {\n      scrollIntoView(getItemNodeFromIndex(highlightedIndex), menuRef.current);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [highlightedIndex]); // Controls the focus on the menu or the toggle button.\n\n  useEffect(function () {\n    // Don't focus menu on first render.\n    if (isInitialMountRef.current) {\n      // Unless it was initialised as open.\n      if (initialIsOpen || defaultIsOpen || isOpen) {\n        if (inputRef.current) {\n          inputRef.current.focus();\n        }\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [isOpen]);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    previousResultCountRef.current = items.length;\n  });\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    validateControlledUnchanged(state, prevPropsRef.current, props);\n    prevPropsRef.current = props;\n  }, [state, props]); // Add mouse/touch events to document.\n\n  var mouseAndTouchTrackersRef = useMouseAndTouchTracker(isOpen, [comboboxRef, menuRef, toggleButtonRef], environment, function () {\n    dispatch({\n      type: InputBlur\n    });\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getInputProps', 'getComboboxProps', 'getMenuProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []);\n  /* Event handler functions */\n\n  var inputKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowDown,\n          shiftKey: event.shiftKey,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowUp,\n          shiftKey: event.shiftKey,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Home: function Home(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownHome,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      End: function End(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnd,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Escape: function Escape() {\n        dispatch({\n          type: InputKeyDownEscape\n        });\n      },\n      Enter: function Enter(event) {\n        // if IME composing, wait for next Enter keydown event.\n        if (event.which === 229) {\n          return;\n        }\n\n        var latestState = latest.current.state;\n\n        if (latestState.isOpen && latestState.highlightedIndex > -1) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownEnter,\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        }\n      }\n    };\n  }, [dispatch, latest]); // Getter props.\n\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIdsRef.current.labelId,\n      htmlFor: elementIdsRef.current.inputId\n    }, labelProps);\n  }, []);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n\n    var _ref = _temp === void 0 ? {} : _temp,\n        onMouseLeave = _ref.onMouseLeave,\n        _ref$refKey = _ref.refKey,\n        refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n        ref = _ref.ref,\n        rest = _objectWithoutPropertiesLoose(_ref, [\"onMouseLeave\", \"refKey\", \"ref\"]);\n\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n        _ref2$suppressRefErro = _ref2.suppressRefError,\n        suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIdsRef.current.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = elementIdsRef.current.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, function () {\n      dispatch({\n        type: MenuMouseLeave$1\n      });\n    }), _extends2), rest);\n  }, [dispatch, setGetterPropCallInfo]);\n  var getItemProps = useCallback(function (_temp3) {\n    var _extends3, _ref4;\n\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n        item = _ref3.item,\n        index = _ref3.index,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        onMouseMove = _ref3.onMouseMove,\n        onClick = _ref3.onClick,\n        onPress = _ref3.onPress,\n        rest = _objectWithoutPropertiesLoose(_ref3, [\"item\", \"index\", \"refKey\", \"ref\", \"onMouseMove\", \"onClick\", \"onPress\"]);\n\n    var _latest$current = latest.current,\n        latestProps = _latest$current.props,\n        latestState = _latest$current.state;\n    var itemIndex = getItemIndex(index, item, latestProps.items);\n\n    if (itemIndex < 0) {\n      throw new Error('Pass either item or item index in getItemProps!');\n    }\n\n    var onSelectKey = 'onClick';\n    var customClickHandler = onClick;\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIdsRef.current.getItemId(itemIndex)] = itemNode;\n      }\n    }), _extends3.role = 'option', _extends3['aria-selected'] = \"\" + (itemIndex === latestState.highlightedIndex), _extends3.id = elementIdsRef.current.getItemId(itemIndex), _extends3), !rest.disabled && (_ref4 = {\n      onMouseMove: callAllEventHandlers(onMouseMove, function itemHandleMouseMove() {\n        if (index === latestState.highlightedIndex) {\n          return;\n        }\n\n        shouldScrollRef.current = false;\n        dispatch({\n          type: ItemMouseMove$1,\n          index: index\n        });\n      })\n    }, _ref4[onSelectKey] = callAllEventHandlers(customClickHandler, function itemHandleClick() {\n      dispatch({\n        type: ItemClick$1,\n        index: index\n      });\n\n      if (inputRef.current) {\n        inputRef.current.focus();\n      }\n    }), _ref4), rest);\n  }, [dispatch, latest]);\n  var getToggleButtonProps = useCallback(function (_temp4) {\n    var _extends4;\n\n    var _ref5 = _temp4 === void 0 ? {} : _temp4,\n        onClick = _ref5.onClick,\n        onPress = _ref5.onPress,\n        _ref5$refKey = _ref5.refKey,\n        refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n        ref = _ref5.ref,\n        rest = _objectWithoutPropertiesLoose(_ref5, [\"onClick\", \"onPress\", \"refKey\", \"ref\"]);\n\n    var toggleButtonHandleClick = function () {\n      dispatch({\n        type: ToggleButtonClick$1\n      });\n\n      if (!latest.current.state.isOpen && inputRef.current) {\n        inputRef.current.focus();\n      }\n    };\n\n    return _extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends4.id = elementIdsRef.current.toggleButtonId, _extends4.tabIndex = -1, _extends4), !rest.disabled && _extends({}, {\n      onClick: callAllEventHandlers(onClick, toggleButtonHandleClick)\n    }), rest);\n  }, [dispatch, latest]);\n  var getInputProps = useCallback(function (_temp5, _temp6) {\n    var _extends5;\n\n    var _ref6 = _temp5 === void 0 ? {} : _temp5,\n        onKeyDown = _ref6.onKeyDown,\n        onChange = _ref6.onChange,\n        onInput = _ref6.onInput,\n        onBlur = _ref6.onBlur,\n        onChangeText = _ref6.onChangeText,\n        _ref6$refKey = _ref6.refKey,\n        refKey = _ref6$refKey === void 0 ? 'ref' : _ref6$refKey,\n        ref = _ref6.ref,\n        rest = _objectWithoutPropertiesLoose(_ref6, [\"onKeyDown\", \"onChange\", \"onInput\", \"onBlur\", \"onChangeText\", \"refKey\", \"ref\"]);\n\n    var _ref7 = _temp6 === void 0 ? {} : _temp6,\n        _ref7$suppressRefErro = _ref7.suppressRefError,\n        suppressRefError = _ref7$suppressRefErro === void 0 ? false : _ref7$suppressRefErro;\n\n    setGetterPropCallInfo('getInputProps', suppressRefError, refKey, inputRef);\n    var latestState = latest.current.state;\n\n    var inputHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && inputKeyDownHandlers[key]) {\n        inputKeyDownHandlers[key](event);\n      }\n    };\n\n    var inputHandleChange = function (event) {\n      dispatch({\n        type: InputChange,\n        inputValue: event.target.value\n      });\n    };\n\n    var inputHandleBlur = function () {\n      /* istanbul ignore else */\n      if (!mouseAndTouchTrackersRef.current.isMouseDown) {\n        dispatch({\n          type: InputBlur\n        });\n      }\n    };\n    /* istanbul ignore next (preact) */\n\n\n    var onChangeKey = 'onChange';\n    var eventHandlers = {};\n\n    if (!rest.disabled) {\n      var _eventHandlers;\n\n      eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, inputHandleBlur), _eventHandlers);\n    }\n    /* istanbul ignore if (react-native) */\n\n\n    return _extends((_extends5 = {}, _extends5[refKey] = handleRefs(ref, function (inputNode) {\n      inputRef.current = inputNode;\n    }), _extends5.id = elementIdsRef.current.inputId, _extends5['aria-autocomplete'] = 'list', _extends5['aria-controls'] = elementIdsRef.current.menuId, _extends5), latestState.isOpen && latestState.highlightedIndex > -1 && {\n      'aria-activedescendant': elementIdsRef.current.getItemId(latestState.highlightedIndex)\n    }, {\n      'aria-labelledby': elementIdsRef.current.labelId,\n      // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n      // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n      autoComplete: 'off',\n      value: latestState.inputValue\n    }, eventHandlers, rest);\n  }, [dispatch, inputKeyDownHandlers, latest, mouseAndTouchTrackersRef, setGetterPropCallInfo]);\n  var getComboboxProps = useCallback(function (_temp7, _temp8) {\n    var _extends6;\n\n    var _ref8 = _temp7 === void 0 ? {} : _temp7,\n        _ref8$refKey = _ref8.refKey,\n        refKey = _ref8$refKey === void 0 ? 'ref' : _ref8$refKey,\n        ref = _ref8.ref,\n        rest = _objectWithoutPropertiesLoose(_ref8, [\"refKey\", \"ref\"]);\n\n    var _ref9 = _temp8 === void 0 ? {} : _temp8,\n        _ref9$suppressRefErro = _ref9.suppressRefError,\n        suppressRefError = _ref9$suppressRefErro === void 0 ? false : _ref9$suppressRefErro;\n\n    setGetterPropCallInfo('getComboboxProps', suppressRefError, refKey, comboboxRef);\n    return _extends((_extends6 = {}, _extends6[refKey] = handleRefs(ref, function (comboboxNode) {\n      comboboxRef.current = comboboxNode;\n    }), _extends6.role = 'combobox', _extends6['aria-haspopup'] = 'listbox', _extends6['aria-owns'] = elementIdsRef.current.menuId, _extends6['aria-expanded'] = latest.current.state.isOpen, _extends6), rest);\n  }, [latest, setGetterPropCallInfo]); // returns\n\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu$1\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu$1\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu$1\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex$1,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem$1,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue$1,\n      inputValue: newInputValue\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$1\n    });\n  }, [dispatch]);\n  return {\n    // prop getters.\n    getItemProps: getItemProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getInputProps: getInputProps,\n    getComboboxProps: getComboboxProps,\n    getToggleButtonProps: getToggleButtonProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    setInputValue: setInputValue,\n    selectItem: selectItem,\n    reset: reset,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar defaultStateValues = {\n  activeIndex: -1,\n  selectedItems: []\n};\n/**\n * Returns the initial value for a state key in the following order:\n * 1. controlled prop, 2. initial prop, 3. default prop, 4. default\n * value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\n\nfunction getInitialValue$1(props, propKey) {\n  return getInitialValue(props, propKey, defaultStateValues);\n}\n/**\n * Returns the default value for a state key in the following order:\n * 1. controlled prop, 2. default prop, 3. default value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\n\n\nfunction getDefaultValue$1(props, propKey) {\n  return getDefaultValue(props, propKey, defaultStateValues);\n}\n/**\n * Gets the initial state based on the provided props. It uses initial, default\n * and controlled props related to state in order to compute the initial value.\n *\n * @param {Object} props Props passed to the hook.\n * @returns {Object} The initial state.\n */\n\nfunction getInitialState$2(props) {\n  var activeIndex = getInitialValue$1(props, 'activeIndex');\n  var selectedItems = getInitialValue$1(props, 'selectedItems');\n  return {\n    activeIndex: activeIndex,\n    selectedItems: selectedItems\n  };\n}\n/**\n * Returns true if dropdown keydown operation is permitted. Should not be\n * allowed on keydown with modifier keys (ctrl, alt, shift, meta), on\n * input element with text content that is either highlighted or selection\n * cursor is not at the starting position.\n *\n * @param {KeyboardEvent} event The event from keydown.\n * @returns {boolean} Whether the operation is allowed.\n */\n\nfunction isKeyDownOperationPermitted(event) {\n  if (event.shiftKey || event.metaKey || event.ctrlKey || event.altKey) {\n    return false;\n  }\n\n  var element = event.target;\n\n  if (element instanceof HTMLInputElement && // if element is a text input\n  element.value !== '' && ( // and we have text in it\n  // and cursor is either not at the start or is currently highlighting text.\n  element.selectionStart !== 0 || element.selectionEnd !== 0)) {\n    return false;\n  }\n\n  return true;\n}\n/**\n * Returns a message to be added to aria-live region when item is removed.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\n\nfunction getA11yRemovalMessage(selectionParameters) {\n  var removedSelectedItem = selectionParameters.removedSelectedItem,\n      itemToStringLocal = selectionParameters.itemToString;\n  return itemToStringLocal(removedSelectedItem) + \" has been removed.\";\n}\n\nvar propTypes$2 = {\n  selectedItems: PropTypes.array,\n  initialSelectedItems: PropTypes.array,\n  defaultSelectedItems: PropTypes.array,\n  itemToString: PropTypes.func,\n  getA11yRemovalMessage: PropTypes.func,\n  stateReducer: PropTypes.func,\n  activeIndex: PropTypes.number,\n  initialActiveIndex: PropTypes.number,\n  defaultActiveIndex: PropTypes.number,\n  onActiveIndexChange: PropTypes.func,\n  onSelectedItemsChange: PropTypes.func,\n  keyNavigationNext: PropTypes.string,\n  keyNavigationPrevious: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\nvar defaultProps$3 = {\n  itemToString: defaultProps.itemToString,\n  stateReducer: defaultProps.stateReducer,\n  environment: defaultProps.environment,\n  getA11yRemovalMessage: getA11yRemovalMessage,\n  keyNavigationNext: 'ArrowRight',\n  keyNavigationPrevious: 'ArrowLeft'\n};\n\nvar SelectedItemClick = process.env.NODE_ENV !== \"production\" ? '__selected_item_click__' : 0;\nvar SelectedItemKeyDownDelete = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_delete__' : 1;\nvar SelectedItemKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_backspace__' : 2;\nvar SelectedItemKeyDownNavigationNext = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_next__' : 3;\nvar SelectedItemKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_previous__' : 4;\nvar DropdownKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_navigation_previous__' : 5;\nvar DropdownKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_backspace__' : 6;\nvar DropdownClick = process.env.NODE_ENV !== \"production\" ? '__dropdown_click__' : 7;\nvar FunctionAddSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_add_selected_item__' : 8;\nvar FunctionRemoveSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_remove_selected_item__' : 9;\nvar FunctionSetSelectedItems = process.env.NODE_ENV !== \"production\" ? '__function_set_selected_items__' : 10;\nvar FunctionSetActiveIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_active_index__' : 11;\nvar FunctionReset$2 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 12;\n\nvar stateChangeTypes$3 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  SelectedItemClick: SelectedItemClick,\n  SelectedItemKeyDownDelete: SelectedItemKeyDownDelete,\n  SelectedItemKeyDownBackspace: SelectedItemKeyDownBackspace,\n  SelectedItemKeyDownNavigationNext: SelectedItemKeyDownNavigationNext,\n  SelectedItemKeyDownNavigationPrevious: SelectedItemKeyDownNavigationPrevious,\n  DropdownKeyDownNavigationPrevious: DropdownKeyDownNavigationPrevious,\n  DropdownKeyDownBackspace: DropdownKeyDownBackspace,\n  DropdownClick: DropdownClick,\n  FunctionAddSelectedItem: FunctionAddSelectedItem,\n  FunctionRemoveSelectedItem: FunctionRemoveSelectedItem,\n  FunctionSetSelectedItems: FunctionSetSelectedItems,\n  FunctionSetActiveIndex: FunctionSetActiveIndex,\n  FunctionReset: FunctionReset$2\n});\n\n/* eslint-disable complexity */\n\nfunction downshiftMultipleSelectionReducer(state, action) {\n  var type = action.type,\n      index = action.index,\n      props = action.props,\n      selectedItem = action.selectedItem;\n  var activeIndex = state.activeIndex,\n      selectedItems = state.selectedItems;\n  var changes;\n\n  switch (type) {\n    case SelectedItemClick:\n      changes = {\n        activeIndex: index\n      };\n      break;\n\n    case SelectedItemKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: activeIndex - 1 < 0 ? 0 : activeIndex - 1\n      };\n      break;\n\n    case SelectedItemKeyDownNavigationNext:\n      changes = {\n        activeIndex: activeIndex + 1 >= selectedItems.length ? -1 : activeIndex + 1\n      };\n      break;\n\n    case SelectedItemKeyDownBackspace:\n    case SelectedItemKeyDownDelete:\n      {\n        var newActiveIndex = activeIndex;\n\n        if (selectedItems.length === 1) {\n          newActiveIndex = -1;\n        } else if (activeIndex === selectedItems.length - 1) {\n          newActiveIndex = selectedItems.length - 2;\n        }\n\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, activeIndex), selectedItems.slice(activeIndex + 1))\n        }, {\n          activeIndex: newActiveIndex\n        });\n        break;\n      }\n\n    case DropdownKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: selectedItems.length - 1\n      };\n      break;\n\n    case DropdownKeyDownBackspace:\n      changes = {\n        selectedItems: selectedItems.slice(0, selectedItems.length - 1)\n      };\n      break;\n\n    case FunctionAddSelectedItem:\n      changes = {\n        selectedItems: [].concat(selectedItems, [selectedItem])\n      };\n      break;\n\n    case DropdownClick:\n      changes = {\n        activeIndex: -1\n      };\n      break;\n\n    case FunctionRemoveSelectedItem:\n      {\n        var _newActiveIndex = activeIndex;\n        var selectedItemIndex = selectedItems.indexOf(selectedItem);\n\n        if (selectedItems.length === 1) {\n          _newActiveIndex = -1;\n        } else if (selectedItemIndex === selectedItems.length - 1) {\n          _newActiveIndex = selectedItems.length - 2;\n        }\n\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, selectedItemIndex), selectedItems.slice(selectedItemIndex + 1))\n        }, {\n          activeIndex: _newActiveIndex\n        });\n        break;\n      }\n\n    case FunctionSetSelectedItems:\n      {\n        var newSelectedItems = action.selectedItems;\n        changes = {\n          selectedItems: newSelectedItems\n        };\n        break;\n      }\n\n    case FunctionSetActiveIndex:\n      {\n        var _newActiveIndex2 = action.activeIndex;\n        changes = {\n          activeIndex: _newActiveIndex2\n        };\n        break;\n      }\n\n    case FunctionReset$2:\n      changes = {\n        activeIndex: getDefaultValue$1(props, 'activeIndex'),\n        selectedItems: getDefaultValue$1(props, 'selectedItems')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, changes);\n}\n\nuseMultipleSelection.stateChangeTypes = stateChangeTypes$3;\n\nfunction useMultipleSelection(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  // Props defaults and destructuring.\n  var props = _extends({}, defaultProps$3, userProps);\n\n  var getA11yRemovalMessage = props.getA11yRemovalMessage,\n      itemToString = props.itemToString,\n      environment = props.environment,\n      keyNavigationNext = props.keyNavigationNext,\n      keyNavigationPrevious = props.keyNavigationPrevious; // Reducer init.\n\n  var _useControlledReducer = useControlledReducer(downshiftMultipleSelectionReducer, getInitialState$2(props), props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var activeIndex = state.activeIndex,\n      selectedItems = state.selectedItems; // Refs.\n\n  var isInitialMountRef = useRef(true);\n  var dropdownRef = useRef(null);\n  var previousSelectedItemsRef = useRef(selectedItems);\n  var selectedItemRefs = useRef();\n  selectedItemRefs.current = []; // used for checking when props are moving from controlled to uncontrolled.\n\n  var prevPropsRef = useRef(props);\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  }); // Effects.\n\n  /* Sets a11y status message on changes in selectedItem. */\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    if (selectedItems.length < previousSelectedItemsRef.current.length) {\n      var removedSelectedItem = previousSelectedItemsRef.current.find(function (item) {\n        return selectedItems.indexOf(item) < 0;\n      });\n      setStatus(getA11yRemovalMessage({\n        itemToString: itemToString,\n        resultCount: selectedItems.length,\n        removedSelectedItem: removedSelectedItem,\n        activeIndex: activeIndex,\n        activeSelectedItem: selectedItems[activeIndex]\n      }), environment.document);\n    }\n\n    previousSelectedItemsRef.current = selectedItems; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItems.length]); // Sets focus on active item.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    if (activeIndex === -1 && dropdownRef.current) {\n      dropdownRef.current.focus();\n    } else if (selectedItemRefs.current[activeIndex]) {\n      selectedItemRefs.current[activeIndex].focus();\n    }\n  }, [activeIndex]);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    validateControlledUnchanged(state, prevPropsRef.current, props);\n    prevPropsRef.current = props;\n  }, [state, props]);\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getDropdownProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []); // Event handler functions.\n\n  var selectedItemKeyDownHandlers = useMemo(function () {\n    var _ref;\n\n    return _ref = {}, _ref[keyNavigationPrevious] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationPrevious\n      });\n    }, _ref[keyNavigationNext] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationNext\n      });\n    }, _ref.Delete = function Delete() {\n      dispatch({\n        type: SelectedItemKeyDownDelete\n      });\n    }, _ref.Backspace = function Backspace() {\n      dispatch({\n        type: SelectedItemKeyDownBackspace\n      });\n    }, _ref;\n  }, [dispatch, keyNavigationNext, keyNavigationPrevious]);\n  var dropdownKeyDownHandlers = useMemo(function () {\n    var _ref2;\n\n    return _ref2 = {}, _ref2[keyNavigationPrevious] = function (event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownNavigationPrevious\n        });\n      }\n    }, _ref2.Backspace = function Backspace(event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownBackspace\n        });\n      }\n    }, _ref2;\n  }, [dispatch, keyNavigationPrevious]); // Getter props.\n\n  var getSelectedItemProps = useCallback(function (_temp) {\n    var _extends2;\n\n    var _ref3 = _temp === void 0 ? {} : _temp,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        onClick = _ref3.onClick,\n        onKeyDown = _ref3.onKeyDown,\n        selectedItem = _ref3.selectedItem,\n        index = _ref3.index,\n        rest = _objectWithoutPropertiesLoose(_ref3, [\"refKey\", \"ref\", \"onClick\", \"onKeyDown\", \"selectedItem\", \"index\"]);\n\n    var latestState = latest.current.state;\n    var itemIndex = getItemIndex(index, selectedItem, latestState.selectedItems);\n\n    if (itemIndex < 0) {\n      throw new Error('Pass either selectedItem or index in getSelectedItemProps!');\n    }\n\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (selectedItemNode) {\n      if (selectedItemNode) {\n        selectedItemRefs.current.push(selectedItemNode);\n      }\n    }), _extends2.tabIndex = index === latestState.activeIndex ? 0 : -1, _extends2.onClick = callAllEventHandlers(onClick, function selectedItemHandleClick() {\n      dispatch({\n        type: SelectedItemClick,\n        index: index\n      });\n    }), _extends2.onKeyDown = callAllEventHandlers(onKeyDown, function selectedItemHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && selectedItemKeyDownHandlers[key]) {\n        selectedItemKeyDownHandlers[key](event);\n      }\n    }), _extends2), rest);\n  }, [dispatch, latest, selectedItemKeyDownHandlers]);\n  var getDropdownProps = useCallback(function (_temp2, _temp3) {\n    var _extends3;\n\n    var _ref4 = _temp2 === void 0 ? {} : _temp2,\n        _ref4$refKey = _ref4.refKey,\n        refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n        ref = _ref4.ref,\n        onKeyDown = _ref4.onKeyDown,\n        onClick = _ref4.onClick,\n        _ref4$preventKeyActio = _ref4.preventKeyAction,\n        preventKeyAction = _ref4$preventKeyActio === void 0 ? false : _ref4$preventKeyActio,\n        rest = _objectWithoutPropertiesLoose(_ref4, [\"refKey\", \"ref\", \"onKeyDown\", \"onClick\", \"preventKeyAction\"]);\n\n    var _ref5 = _temp3 === void 0 ? {} : _temp3,\n        _ref5$suppressRefErro = _ref5.suppressRefError,\n        suppressRefError = _ref5$suppressRefErro === void 0 ? false : _ref5$suppressRefErro;\n\n    setGetterPropCallInfo('getDropdownProps', suppressRefError, refKey, dropdownRef);\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (dropdownNode) {\n      if (dropdownNode) {\n        dropdownRef.current = dropdownNode;\n      }\n    }), _extends3), !preventKeyAction && {\n      onKeyDown: callAllEventHandlers(onKeyDown, function dropdownHandleKeyDown(event) {\n        var key = normalizeArrowKey(event);\n\n        if (key && dropdownKeyDownHandlers[key]) {\n          dropdownKeyDownHandlers[key](event);\n        }\n      }),\n      onClick: callAllEventHandlers(onClick, function dropdownHandleClick() {\n        dispatch({\n          type: DropdownClick\n        });\n      })\n    }, rest);\n  }, [dispatch, dropdownKeyDownHandlers, setGetterPropCallInfo]); // returns\n\n  var addSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionAddSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var removeSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionRemoveSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var setSelectedItems = useCallback(function (newSelectedItems) {\n    dispatch({\n      type: FunctionSetSelectedItems,\n      selectedItems: newSelectedItems\n    });\n  }, [dispatch]);\n  var setActiveIndex = useCallback(function (newActiveIndex) {\n    dispatch({\n      type: FunctionSetActiveIndex,\n      activeIndex: newActiveIndex\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$2\n    });\n  }, [dispatch]);\n  return {\n    getSelectedItemProps: getSelectedItemProps,\n    getDropdownProps: getDropdownProps,\n    addSelectedItem: addSelectedItem,\n    removeSelectedItem: removeSelectedItem,\n    setSelectedItems: setSelectedItems,\n    setActiveIndex: setActiveIndex,\n    reset: reset,\n    selectedItems: selectedItems,\n    activeIndex: activeIndex\n  };\n}\n\nexport default Downshift;\nexport { resetIdCounter, useCombobox, useMultipleSelection, useSelect };\n"],"mappings":"AAAA,OAAOA,6BAAP,MAA0C,yDAA1C;AACA,OAAOC,QAAP,MAAqB,oCAArB;AACA,OAAOC,sBAAP,MAAmC,kDAAnC;AACA,OAAOC,cAAP,MAA2B,0CAA3B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,YAAT,EAAuBC,SAAvB,EAAkCC,MAAlC,EAA0CC,SAA1C,EAAqDC,WAArD,EAAkEC,UAAlE,EAA8EC,OAA9E,QAA6F,OAA7F;AACA,SAASC,YAAT,QAA6B,UAA7B;AACA,OAAOC,qBAAP,MAAkC,0BAAlC;AAEA,IAAIC,SAAS,GAAG,CAAhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASC,MAAT,CAAgBC,EAAhB,EAAoB;EAClB,OAAO,OAAOA,EAAP,KAAc,UAAd,GAA2BA,EAA3B,GAAgCC,IAAvC;AACD;;AAED,SAASA,IAAT,GAAgB,CAAE;AAClB;AACA;AACA;AACA;AACA;;;AAGA,SAASC,cAAT,CAAwBC,IAAxB,EAA8BC,QAA9B,EAAwC;EACtC,IAAI,CAACD,IAAL,EAAW;IACT;EACD;;EAED,IAAIE,OAAO,GAAGR,qBAAqB,CAACM,IAAD,EAAO;IACxCG,QAAQ,EAAEF,QAD8B;IAExCG,KAAK,EAAE,SAFiC;IAGxCC,UAAU,EAAE;EAH4B,CAAP,CAAnC;EAKAH,OAAO,CAACI,OAAR,CAAgB,UAAUC,IAAV,EAAgB;IAC9B,IAAIC,EAAE,GAAGD,IAAI,CAACC,EAAd;IAAA,IACIC,GAAG,GAAGF,IAAI,CAACE,GADf;IAAA,IAEIC,IAAI,GAAGH,IAAI,CAACG,IAFhB;IAGAF,EAAE,CAACG,SAAH,GAAeF,GAAf;IACAD,EAAE,CAACI,UAAH,GAAgBF,IAAhB;EACD,CAND;AAOD;AACD;AACA;AACA;AACA;AACA;;;AAGA,SAASG,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;EACvC,OAAOD,MAAM,KAAKC,KAAX,IAAoBD,MAAM,CAACE,QAAP,IAAmBF,MAAM,CAACE,QAAP,CAAgBD,KAAhB,CAA9C;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASE,QAAT,CAAkBC,EAAlB,EAAsBC,IAAtB,EAA4B;EAC1B,IAAIC,SAAJ;;EAEA,SAASC,MAAT,GAAkB;IAChB,IAAID,SAAJ,EAAe;MACbE,YAAY,CAACF,SAAD,CAAZ;IACD;EACF;;EAED,SAASG,OAAT,GAAmB;IACjB,KAAK,IAAIC,IAAI,GAAGC,SAAS,CAACC,MAArB,EAA6BC,IAAI,GAAG,IAAIC,KAAJ,CAAUJ,IAAV,CAApC,EAAqDK,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGL,IAA3E,EAAiFK,IAAI,EAArF,EAAyF;MACvFF,IAAI,CAACE,IAAD,CAAJ,GAAaJ,SAAS,CAACI,IAAD,CAAtB;IACD;;IAEDR,MAAM;IACND,SAAS,GAAGU,UAAU,CAAC,YAAY;MACjCV,SAAS,GAAG,IAAZ;MACAF,EAAE,CAACa,KAAH,CAAS,KAAK,CAAd,EAAiBJ,IAAjB;IACD,CAHqB,EAGnBR,IAHmB,CAAtB;EAID;;EAEDI,OAAO,CAACF,MAAR,GAAiBA,MAAjB;EACA,OAAOE,OAAP;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASS,oBAAT,GAAgC;EAC9B,KAAK,IAAIC,KAAK,GAAGR,SAAS,CAACC,MAAtB,EAA8BQ,GAAG,GAAG,IAAIN,KAAJ,CAAUK,KAAV,CAApC,EAAsDE,KAAK,GAAG,CAAnE,EAAsEA,KAAK,GAAGF,KAA9E,EAAqFE,KAAK,EAA1F,EAA8F;IAC5FD,GAAG,CAACC,KAAD,CAAH,GAAaV,SAAS,CAACU,KAAD,CAAtB;EACD;;EAED,OAAO,UAAUC,KAAV,EAAiB;IACtB,KAAK,IAAIC,KAAK,GAAGZ,SAAS,CAACC,MAAtB,EAA8BC,IAAI,GAAG,IAAIC,KAAJ,CAAUS,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAAlC,CAArC,EAA2EC,KAAK,GAAG,CAAxF,EAA2FA,KAAK,GAAGD,KAAnG,EAA0GC,KAAK,EAA/G,EAAmH;MACjHX,IAAI,CAACW,KAAK,GAAG,CAAT,CAAJ,GAAkBb,SAAS,CAACa,KAAD,CAA3B;IACD;;IAED,OAAOJ,GAAG,CAACK,IAAJ,CAAS,UAAUrB,EAAV,EAAc;MAC5B,IAAIA,EAAJ,EAAQ;QACNA,EAAE,CAACa,KAAH,CAAS,KAAK,CAAd,EAAiB,CAACK,KAAD,EAAQI,MAAR,CAAeb,IAAf,CAAjB;MACD;;MAED,OAAOS,KAAK,CAACK,uBAAN,IAAiCL,KAAK,CAACM,cAAN,CAAqB,aAArB,KAAuCN,KAAK,CAACO,WAAN,CAAkBF,uBAAjG;IACD,CANM,CAAP;EAOD,CAZD;AAaD;;AAED,SAASG,UAAT,GAAsB;EACpB,KAAK,IAAIC,KAAK,GAAGpB,SAAS,CAACC,MAAtB,EAA8BoB,IAAI,GAAG,IAAIlB,KAAJ,CAAUiB,KAAV,CAArC,EAAuDE,KAAK,GAAG,CAApE,EAAuEA,KAAK,GAAGF,KAA/E,EAAsFE,KAAK,EAA3F,EAA+F;IAC7FD,IAAI,CAACC,KAAD,CAAJ,GAActB,SAAS,CAACsB,KAAD,CAAvB;EACD;;EAED,OAAO,UAAU/C,IAAV,EAAgB;IACrB8C,IAAI,CAACxC,OAAL,CAAa,UAAU0C,GAAV,EAAe;MAC1B,IAAI,OAAOA,GAAP,KAAe,UAAnB,EAA+B;QAC7BA,GAAG,CAAChD,IAAD,CAAH;MACD,CAFD,MAEO,IAAIgD,GAAJ,EAAS;QACdA,GAAG,CAACC,OAAJ,GAAcjD,IAAd;MACD;IACF,CAND;EAOD,CARD;AASD;AACD;AACA;AACA;AACA;;;AAGA,SAASkD,UAAT,GAAsB;EACpB,OAAOC,MAAM,CAACxD,SAAS,EAAV,CAAb;AACD;AACD;AACA;AACA;;;AAGA,SAASyD,cAAT,GAA0B;EACxBzD,SAAS,GAAG,CAAZ;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAAS0D,oBAAT,CAA8BC,KAA9B,EAAqC;EACnC,IAAIC,MAAM,GAAGD,KAAK,CAACC,MAAnB;EAAA,IACIC,WAAW,GAAGF,KAAK,CAACE,WADxB;EAAA,IAEIC,mBAAmB,GAAGH,KAAK,CAACG,mBAFhC;;EAIA,IAAI,CAACF,MAAL,EAAa;IACX,OAAO,EAAP;EACD;;EAED,IAAI,CAACC,WAAL,EAAkB;IAChB,OAAO,2BAAP;EACD;;EAED,IAAIA,WAAW,KAAKC,mBAApB,EAAyC;IACvC,OAAOD,WAAW,GAAG,SAAd,IAA2BA,WAAW,KAAK,CAAhB,GAAoB,KAApB,GAA4B,OAAvD,IAAkE,gFAAzE;EACD;;EAED,OAAO,EAAP;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASE,WAAT,CAAqBC,GAArB,EAA0BC,YAA1B,EAAwC;EACtCD,GAAG,GAAG/B,KAAK,CAACiC,OAAN,CAAcF,GAAd;EACN;EACAA,GAAG,CAAC,CAAD,CAFG,GAEGA,GAFT;;EAIA,IAAI,CAACA,GAAD,IAAQC,YAAZ,EAA0B;IACxB,OAAOA,YAAP;EACD,CAFD,MAEO;IACL,OAAOD,GAAP;EACD;AACF;AACD;AACA;AACA;AACA;;;AAGA,SAASG,YAAT,CAAsBC,OAAtB,EAA+B;EAC7B;EACA,OAAO,OAAOA,OAAO,CAACC,IAAf,KAAwB,QAA/B;AACD;AACD;AACA;AACA;AACA;;;AAGA,SAASC,eAAT,CAAyBF,OAAzB,EAAkC;EAChC,OAAOA,OAAO,CAACG,KAAf;AACD;AACD;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASC,YAAT,CAAsBC,MAAtB,EAA8BC,QAA9B,EAAwC;EACtC;EACAC,OAAO,CAACC,KAAR,CAAc,oBAAoBF,QAApB,GAA+B,sBAA/B,GAAwDD,MAAxD,GAAiE,IAA/E;AACD;;AAED,IAAII,SAAS,GAAG,CAAC,kBAAD,EAAqB,YAArB,EAAmC,QAAnC,EAA6C,cAA7C,EAA6D,MAA7D,CAAhB;AACA;AACA;AACA;AACA;;AAEA,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;EACxB,IAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;IACpBA,KAAK,GAAG,EAAR;EACD;;EAED,IAAIC,MAAM,GAAG,EAAb;EACAH,SAAS,CAAClE,OAAV,CAAkB,UAAUsE,CAAV,EAAa;IAC7B,IAAIF,KAAK,CAAChC,cAAN,CAAqBkC,CAArB,CAAJ,EAA6B;MAC3BD,MAAM,CAACC,CAAD,CAAN,GAAYF,KAAK,CAACE,CAAD,CAAjB;IACD;EACF,CAJD;EAKA,OAAOD,MAAP;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASE,QAAT,CAAkBH,KAAlB,EAAyBR,KAAzB,EAAgC;EAC9B,OAAOY,MAAM,CAACC,IAAP,CAAYL,KAAZ,EAAmBM,MAAnB,CAA0B,UAAUC,SAAV,EAAqBC,GAArB,EAA0B;IACzDD,SAAS,CAACC,GAAD,CAAT,GAAiBC,gBAAgB,CAACjB,KAAD,EAAQgB,GAAR,CAAhB,GAA+BhB,KAAK,CAACgB,GAAD,CAApC,GAA4CR,KAAK,CAACQ,GAAD,CAAlE;IACA,OAAOD,SAAP;EACD,CAHM,EAGJ,EAHI,CAAP;AAID;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASE,gBAAT,CAA0BjB,KAA1B,EAAiCgB,GAAjC,EAAsC;EACpC,OAAOhB,KAAK,CAACgB,GAAD,CAAL,KAAeE,SAAtB;AACD;AACD;AACA;AACA;AACA;AACA;;;AAGA,SAASC,iBAAT,CAA2BjD,KAA3B,EAAkC;EAChC,IAAI8C,GAAG,GAAG9C,KAAK,CAAC8C,GAAhB;EAAA,IACII,OAAO,GAAGlD,KAAK,CAACkD,OADpB;EAEA;;EAEA,IAAIA,OAAO,IAAI,EAAX,IAAiBA,OAAO,IAAI,EAA5B,IAAkCJ,GAAG,CAACK,OAAJ,CAAY,OAAZ,MAAyB,CAA/D,EAAkE;IAChE,OAAO,UAAUL,GAAjB;EACD;;EAED,OAAOA,GAAP;AACD;AACD;AACA;AACA;AACA;AACA;;;AAGA,SAASM,aAAT,CAAuBC,GAAvB,EAA4B;EAC1B,OAAOX,MAAM,CAACY,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BH,GAA/B,MAAwC,iBAA/C;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASI,oBAAT,CAA8BC,UAA9B,EAA0CC,SAA1C,EAAqDC,SAArD,EAAgEC,oBAAhE,EAAsFC,QAAtF,EAAgG;EAC9F,IAAIA,QAAQ,KAAK,KAAK,CAAtB,EAAyB;IACvBA,QAAQ,GAAG,IAAX;EACD;;EAED,IAAIF,SAAS,KAAK,CAAlB,EAAqB;IACnB,OAAO,CAAC,CAAR;EACD;;EAED,IAAIG,cAAc,GAAGH,SAAS,GAAG,CAAjC;;EAEA,IAAI,OAAOD,SAAP,KAAqB,QAArB,IAAiCA,SAAS,GAAG,CAA7C,IAAkDA,SAAS,IAAIC,SAAnE,EAA8E;IAC5ED,SAAS,GAAGD,UAAU,GAAG,CAAb,GAAiB,CAAC,CAAlB,GAAsBK,cAAc,GAAG,CAAnD;EACD;;EAED,IAAIC,QAAQ,GAAGL,SAAS,GAAGD,UAA3B;;EAEA,IAAIM,QAAQ,GAAG,CAAf,EAAkB;IAChBA,QAAQ,GAAGF,QAAQ,GAAGC,cAAH,GAAoB,CAAvC;EACD,CAFD,MAEO,IAAIC,QAAQ,GAAGD,cAAf,EAA+B;IACpCC,QAAQ,GAAGF,QAAQ,GAAG,CAAH,GAAOC,cAA1B;EACD;;EAED,IAAIE,mBAAmB,GAAGC,uBAAuB,CAACR,UAAD,EAAaM,QAAb,EAAuBJ,SAAvB,EAAkCC,oBAAlC,EAAwDC,QAAxD,CAAjD;;EAEA,IAAIG,mBAAmB,KAAK,CAAC,CAA7B,EAAgC;IAC9B,OAAON,SAAS,IAAIC,SAAb,GAAyB,CAAC,CAA1B,GAA8BD,SAArC;EACD;;EAED,OAAOM,mBAAP;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASC,uBAAT,CAAiCR,UAAjC,EAA6CC,SAA7C,EAAwDC,SAAxD,EAAmEC,oBAAnE,EAAyFC,QAAzF,EAAmG;EACjG,IAAIK,kBAAkB,GAAGN,oBAAoB,CAACF,SAAD,CAA7C;;EAEA,IAAI,CAACQ,kBAAD,IAAuB,CAACA,kBAAkB,CAACC,YAAnB,CAAgC,UAAhC,CAA5B,EAAyE;IACvE,OAAOT,SAAP;EACD;;EAED,IAAID,UAAU,GAAG,CAAjB,EAAoB;IAClB,KAAK,IAAIW,KAAK,GAAGV,SAAS,GAAG,CAA7B,EAAgCU,KAAK,GAAGT,SAAxC,EAAmDS,KAAK,EAAxD,EAA4D;MAC1D,IAAI,CAACR,oBAAoB,CAACQ,KAAD,CAApB,CAA4BD,YAA5B,CAAyC,UAAzC,CAAL,EAA2D;QACzD,OAAOC,KAAP;MACD;IACF;EACF,CAND,MAMO;IACL,KAAK,IAAIC,MAAM,GAAGX,SAAS,GAAG,CAA9B,EAAiCW,MAAM,IAAI,CAA3C,EAA8CA,MAAM,EAApD,EAAwD;MACtD,IAAI,CAACT,oBAAoB,CAACS,MAAD,CAApB,CAA6BF,YAA7B,CAA0C,UAA1C,CAAL,EAA4D;QAC1D,OAAOE,MAAP;MACD;IACF;EACF;;EAED,IAAIR,QAAJ,EAAc;IACZ,OAAOJ,UAAU,GAAG,CAAb,GAAiBQ,uBAAuB,CAAC,CAAD,EAAI,CAAJ,EAAON,SAAP,EAAkBC,oBAAlB,EAAwC,KAAxC,CAAxC,GAAyFK,uBAAuB,CAAC,CAAC,CAAF,EAAKN,SAAS,GAAG,CAAjB,EAAoBA,SAApB,EAA+BC,oBAA/B,EAAqD,KAArD,CAAvH;EACD;;EAED,OAAO,CAAC,CAAR;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASU,qBAAT,CAA+BC,MAA/B,EAAuCC,iBAAvC,EAA0DC,QAA1D,EAAoEC,kBAApE,EAAwF;EACtF,IAAIA,kBAAkB,KAAK,KAAK,CAAhC,EAAmC;IACjCA,kBAAkB,GAAG,IAArB;EACD;;EAED,OAAOF,iBAAiB,CAACtE,IAAlB,CAAuB,UAAUyE,WAAV,EAAuB;IACnD,OAAOA,WAAW,KAAKnG,gBAAgB,CAACmG,WAAD,EAAcJ,MAAd,CAAhB,IAAyCG,kBAAkB,IAAIlG,gBAAgB,CAACmG,WAAD,EAAcF,QAAQ,CAACG,aAAvB,CAApF,CAAlB;EACD,CAFM,CAAP;AAGD;;AAED,SAASC,2BAAT,CAAqCxC,KAArC,EAA4CyC,SAA5C,EAAuDC,SAAvD,EAAkE;EAChE,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;IACzC;EACD;;EAED,IAAIC,kBAAkB,GAAG,wPAAzB;EACA1C,MAAM,CAACC,IAAP,CAAYL,KAAZ,EAAmBpE,OAAnB,CAA2B,UAAUmH,OAAV,EAAmB;IAC5C,IAAIN,SAAS,CAACM,OAAD,CAAT,KAAuBrC,SAAvB,IAAoCgC,SAAS,CAACK,OAAD,CAAT,KAAuBrC,SAA/D,EAA0E;MACxE;MACAd,OAAO,CAACC,KAAR,CAAc,8DAA8DkD,OAA9D,GAAwE,yBAAxE,GAAoGD,kBAAlH;IACD,CAHD,MAGO,IAAIL,SAAS,CAACM,OAAD,CAAT,KAAuBrC,SAAvB,IAAoCgC,SAAS,CAACK,OAAD,CAAT,KAAuBrC,SAA/D,EAA0E;MAC/E;MACAd,OAAO,CAACC,KAAR,CAAc,gEAAgEkD,OAAhE,GAA0E,uBAA1E,GAAoGD,kBAAlH;IACD;EACF,CARD;AASD;;AAED,IAAIE,aAAa,GAAGzG,QAAQ,CAAC,YAAY;EACvC0G,YAAY,GAAGC,WAAf,GAA6B,EAA7B;AACD,CAF2B,EAEzB,GAFyB,CAA5B;AAGA;AACA;AACA;AACA;;AAEA,SAASC,SAAT,CAAmBC,MAAnB,EAA2BC,YAA3B,EAAyC;EACvC,IAAIC,GAAG,GAAGL,YAAY,CAACI,YAAD,CAAtB;;EAEA,IAAI,CAACD,MAAL,EAAa;IACX;EACD;;EAEDE,GAAG,CAACJ,WAAJ,GAAkBE,MAAlB;EACAJ,aAAa;AACd;AACD;AACA;AACA;AACA;AACA;;;AAGA,SAASC,YAAT,CAAsBI,YAAtB,EAAoC;EAClC,IAAIA,YAAY,KAAK,KAAK,CAA1B,EAA6B;IAC3BA,YAAY,GAAGjB,QAAf;EACD;;EAED,IAAImB,SAAS,GAAGF,YAAY,CAACG,cAAb,CAA4B,qBAA5B,CAAhB;;EAEA,IAAID,SAAJ,EAAe;IACb,OAAOA,SAAP;EACD;;EAEDA,SAAS,GAAGF,YAAY,CAACI,aAAb,CAA2B,KAA3B,CAAZ;EACAF,SAAS,CAACG,YAAV,CAAuB,IAAvB,EAA6B,qBAA7B;EACAH,SAAS,CAACG,YAAV,CAAuB,MAAvB,EAA+B,QAA/B;EACAH,SAAS,CAACG,YAAV,CAAuB,WAAvB,EAAoC,QAApC;EACAH,SAAS,CAACG,YAAV,CAAuB,eAAvB,EAAwC,gBAAxC;EACAtD,MAAM,CAACuD,MAAP,CAAcJ,SAAS,CAACK,KAAxB,EAA+B;IAC7BC,MAAM,EAAE,GADqB;IAE7BC,IAAI,EAAE,eAFuB;IAG7BC,MAAM,EAAE,KAHqB;IAI7BC,MAAM,EAAE,MAJqB;IAK7BC,QAAQ,EAAE,QALmB;IAM7BC,OAAO,EAAE,GANoB;IAO7BC,QAAQ,EAAE,UAPmB;IAQ7BC,KAAK,EAAE;EARsB,CAA/B;EAUAf,YAAY,CAACgB,IAAb,CAAkBC,WAAlB,CAA8Bf,SAA9B;EACA,OAAOA,SAAP;AACD;;AAED,IAAIgB,OAAO,GAAG5B,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,0BAAxC,GAAqE,CAAnF;AACA,IAAI2B,OAAO,GAAG7B,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,0BAAxC,GAAqE,CAAnF;AACA,IAAI4B,cAAc,GAAG9B,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,kCAAxC,GAA6E,CAAlG;AACA,IAAI6B,cAAc,GAAG/B,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,mCAAxC,GAA8E,CAAnG;AACA,IAAI8B,gBAAgB,GAAGhC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,qCAAxC,GAAgF,CAAvG;AACA,IAAI+B,aAAa,GAAGjC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,iCAAxC,GAA4E,CAAhG;AACA,IAAIgC,YAAY,GAAGlC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,gCAAxC,GAA2E,CAA9F;AACA,IAAIiC,WAAW,GAAGnC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,+BAAxC,GAA0E,CAA5F;AACA,IAAIkC,UAAU,GAAGpC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,8BAAxC,GAAyE,CAA1F;AACA,IAAImC,SAAS,GAAGrC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,6BAAxC,GAAwE,CAAxF;AACA,IAAIoC,SAAS,GAAGtC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,6BAAxC,GAAwE,EAAxF;AACA,IAAIqC,WAAW,GAAGvC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,+BAAxC,GAA0E,EAA5F;AACA,IAAIsC,kBAAkB,GAAGxC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,uCAAxC,GAAkF,EAA3G;AACA,IAAIuC,WAAW,GAAGzC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,+BAAxC,GAA0E,EAA5F;AACA,IAAIwC,UAAU,GAAG1C,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,8BAAxC,GAAyE,EAA1F;AACA,IAAIyC,iCAAiC,GAAG3C,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,wDAAxC,GAAmG,EAA3I;AACA,IAAI0C,QAAQ,GAAG5C,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,2BAAxC,GAAsE,EAArF;AAEA,IAAI2C,gBAAgB,GAAG,aAAapF,MAAM,CAACqF,MAAP,CAAc;EAChDC,SAAS,EAAE,IADqC;EAEhDnB,OAAO,EAAEA,OAFuC;EAGhDC,OAAO,EAAEA,OAHuC;EAIhDC,cAAc,EAAEA,cAJgC;EAKhDC,cAAc,EAAEA,cALgC;EAMhDC,gBAAgB,EAAEA,gBAN8B;EAOhDC,aAAa,EAAEA,aAPiC;EAQhDC,YAAY,EAAEA,YARkC;EAShDC,WAAW,EAAEA,WATmC;EAUhDC,UAAU,EAAEA,UAVoC;EAWhDC,SAAS,EAAEA,SAXqC;EAYhDC,SAAS,EAAEA,SAZqC;EAahDC,WAAW,EAAEA,WAbmC;EAchDC,kBAAkB,EAAEA,kBAd4B;EAehDC,WAAW,EAAEA,WAfmC;EAgBhDC,UAAU,EAAEA,UAhBoC;EAiBhDC,iCAAiC,EAAEA,iCAjBa;EAkBhDC,QAAQ,EAAEA;AAlBsC,CAAd,CAApC;;AAqBA,IAAII,SAAS,GACb,aACA,YAAY;EACV,IAAIA,SAAS,GACb,aACA,UAAUC,UAAV,EAAsB;IACpBtL,cAAc,CAACqL,SAAD,EAAYC,UAAZ,CAAd;;IAEA,SAASD,SAAT,CAAmBE,MAAnB,EAA2B;MACzB,IAAIC,KAAK,GAAGF,UAAU,CAAC1E,IAAX,CAAgB,IAAhB,EAAsB2E,MAAtB,KAAiC,IAA7C;;MAEAC,KAAK,CAACC,EAAN,GAAWD,KAAK,CAACtG,KAAN,CAAYuG,EAAZ,IAAkB,eAAevH,UAAU,EAAtD;MACAsH,KAAK,CAACE,MAAN,GAAeF,KAAK,CAACtG,KAAN,CAAYwG,MAAZ,IAAsBF,KAAK,CAACC,EAAN,GAAW,OAAhD;MACAD,KAAK,CAACG,OAAN,GAAgBH,KAAK,CAACtG,KAAN,CAAYyG,OAAZ,IAAuBH,KAAK,CAACC,EAAN,GAAW,QAAlD;MACAD,KAAK,CAACI,OAAN,GAAgBJ,KAAK,CAACtG,KAAN,CAAY0G,OAAZ,IAAuBJ,KAAK,CAACC,EAAN,GAAW,QAAlD;;MAEAD,KAAK,CAACK,SAAN,GAAkBL,KAAK,CAACtG,KAAN,CAAY2G,SAAZ,IAAyB,UAAUpE,KAAV,EAAiB;QAC1D,OAAO+D,KAAK,CAACC,EAAN,GAAW,QAAX,GAAsBhE,KAA7B;MACD,CAFD;;MAIA+D,KAAK,CAACM,KAAN,GAAc,IAAd;MACAN,KAAK,CAACO,KAAN,GAAc,EAAd;MACAP,KAAK,CAACxE,SAAN,GAAkB,IAAlB;MACAwE,KAAK,CAAC/G,mBAAN,GAA4B,CAA5B;MACA+G,KAAK,CAACQ,UAAN,GAAmB,EAAnB;;MAEAR,KAAK,CAACS,kBAAN,GAA2B,UAAU/J,EAAV,EAAcC,IAAd,EAAoB;QAC7C,IAAIsJ,EAAE,GAAG3I,UAAU,CAAC,YAAY;UAC9B0I,KAAK,CAACQ,UAAN,GAAmBR,KAAK,CAACQ,UAAN,CAAiBE,MAAjB,CAAwB,UAAUC,CAAV,EAAa;YACtD,OAAOA,CAAC,KAAKV,EAAb;UACD,CAFkB,CAAnB;UAGAvJ,EAAE;QACH,CALkB,EAKhBC,IALgB,CAAnB;;QAOAqJ,KAAK,CAACQ,UAAN,CAAiBI,IAAjB,CAAsBX,EAAtB;MACD,CATD;;MAWAD,KAAK,CAACa,YAAN,GAAqB,UAAUC,KAAV,EAAiB;QACpCd,KAAK,CAACxE,SAAN,GAAkBsF,KAAlB;MACD,CAFD;;MAIAd,KAAK,CAACe,cAAN,GAAuB,YAAY;QACjCf,KAAK,CAACxE,SAAN,GAAkB,IAAlB;MACD,CAFD;;MAIAwE,KAAK,CAACgB,mBAAN,GAA4B,UAAUC,gBAAV,EAA4BC,eAA5B,EAA6C;QACvE,IAAID,gBAAgB,KAAK,KAAK,CAA9B,EAAiC;UAC/BA,gBAAgB,GAAGjB,KAAK,CAACtG,KAAN,CAAYyH,uBAA/B;QACD;;QAED,IAAID,eAAe,KAAK,KAAK,CAA7B,EAAgC;UAC9BA,eAAe,GAAG,EAAlB;QACD;;QAEDA,eAAe,GAAGjH,SAAS,CAACiH,eAAD,CAA3B;;QAEAlB,KAAK,CAACoB,gBAAN,CAAuB9M,QAAQ,CAAC;UAC9B2M,gBAAgB,EAAEA;QADY,CAAD,EAE5BC,eAF4B,CAA/B;MAGD,CAdD;;MAgBAlB,KAAK,CAACqB,cAAN,GAAuB,UAAUhM,EAAV,EAAc;QACnC2K,KAAK,CAACoB,gBAAN,CAAuB;UACrBE,YAAY,EAAE,IADO;UAErBC,UAAU,EAAE,EAFS;UAGrBN,gBAAgB,EAAEjB,KAAK,CAACtG,KAAN,CAAYyH,uBAHT;UAIrBpI,MAAM,EAAEiH,KAAK,CAACtG,KAAN,CAAY8H;QAJC,CAAvB,EAKGnM,EALH;MAMD,CAPD;;MASA2K,KAAK,CAACyB,UAAN,GAAmB,UAAUC,IAAV,EAAgBR,eAAhB,EAAiC7L,EAAjC,EAAqC;QACtD6L,eAAe,GAAGjH,SAAS,CAACiH,eAAD,CAA3B;;QAEAlB,KAAK,CAACoB,gBAAN,CAAuB9M,QAAQ,CAAC;UAC9ByE,MAAM,EAAEiH,KAAK,CAACtG,KAAN,CAAY8H,aADU;UAE9BP,gBAAgB,EAAEjB,KAAK,CAACtG,KAAN,CAAYyH,uBAFA;UAG9BG,YAAY,EAAEI,IAHgB;UAI9BH,UAAU,EAAEvB,KAAK,CAACtG,KAAN,CAAYiI,YAAZ,CAAyBD,IAAzB;QAJkB,CAAD,EAK5BR,eAL4B,CAA/B,EAKqB7L,EALrB;MAMD,CATD;;MAWA2K,KAAK,CAAC4B,iBAAN,GAA0B,UAAUC,SAAV,EAAqBX,eAArB,EAAsC7L,EAAtC,EAA0C;QAClE,IAAIqM,IAAI,GAAG1B,KAAK,CAACO,KAAN,CAAYsB,SAAZ,CAAX;;QAEA,IAAIH,IAAI,IAAI,IAAZ,EAAkB;UAChB;QACD;;QAED1B,KAAK,CAACyB,UAAN,CAAiBC,IAAjB,EAAuBR,eAAvB,EAAwC7L,EAAxC;MACD,CARD;;MAUA2K,KAAK,CAAC8B,qBAAN,GAA8B,UAAUZ,eAAV,EAA2B7L,EAA3B,EAA+B;QAC3D,OAAO2K,KAAK,CAAC4B,iBAAN,CAAwB5B,KAAK,CAAC3F,QAAN,GAAiB4G,gBAAzC,EAA2DC,eAA3D,EAA4E7L,EAA5E,CAAP;MACD,CAFD;;MAIA2K,KAAK,CAACoB,gBAAN,GAAyB,UAAUW,UAAV,EAAsB1M,EAAtB,EAA0B;QACjD,IAAI2M,cAAJ,EAAoBC,WAApB;QACA,IAAIC,gBAAgB,GAAG,EAAvB;QACA,IAAIC,oBAAoB,GAAG,OAAOJ,UAAP,KAAsB,UAAjD,CAHiD,CAGY;QAC7D;QACA;QACA;QACA;;QAEA,IAAI,CAACI,oBAAD,IAAyBJ,UAAU,CAAC7J,cAAX,CAA0B,YAA1B,CAA7B,EAAsE;UACpE8H,KAAK,CAACtG,KAAN,CAAY0I,kBAAZ,CAA+BL,UAAU,CAACR,UAA1C,EAAsDjN,QAAQ,CAAC,EAAD,EAAK0L,KAAK,CAACqC,kBAAN,EAAL,EAAiCN,UAAjC,CAA9D;QACD;;QAED,OAAO/B,KAAK,CAACsC,QAAN,CAAe,UAAUpI,KAAV,EAAiB;UACrCA,KAAK,GAAG8F,KAAK,CAAC3F,QAAN,CAAeH,KAAf,CAAR;UACA,IAAIqI,aAAa,GAAGJ,oBAAoB,GAAGJ,UAAU,CAAC7H,KAAD,CAAb,GAAuB6H,UAA/D,CAFqC,CAEsC;;UAE3EQ,aAAa,GAAGvC,KAAK,CAACtG,KAAN,CAAY8I,YAAZ,CAAyBtI,KAAzB,EAAgCqI,aAAhC,CAAhB,CAJqC,CAI2B;UAChE;UACA;;UAEAP,cAAc,GAAGO,aAAa,CAACrK,cAAd,CAA6B,cAA7B,CAAjB,CARqC,CAQ0B;;UAE/D,IAAIuK,SAAS,GAAG,EAAhB,CAVqC,CAUjB;;UAEpB,IAAIC,aAAa,GAAG,EAApB,CAZqC,CAYb;UACxB;UACA;;UAEA,IAAIV,cAAc,IAAIO,aAAa,CAACjB,YAAd,KAA+BpH,KAAK,CAACoH,YAA3D,EAAyE;YACvEW,WAAW,GAAGM,aAAa,CAACjB,YAA5B;UACD;;UAEDiB,aAAa,CAAC/I,IAAd,GAAqB+I,aAAa,CAAC/I,IAAd,IAAsBiF,OAA3C;UACAnE,MAAM,CAACC,IAAP,CAAYgI,aAAZ,EAA2BzM,OAA3B,CAAmC,UAAU4E,GAAV,EAAe;YAChD;YACA;YACA,IAAIR,KAAK,CAACQ,GAAD,CAAL,KAAe6H,aAAa,CAAC7H,GAAD,CAAhC,EAAuC;cACrCwH,gBAAgB,CAACxH,GAAD,CAAhB,GAAwB6H,aAAa,CAAC7H,GAAD,CAArC;YACD,CAL+C,CAK9C;YACF;YACA;YACA;YACA;YACA;;;YAGA,IAAIA,GAAG,KAAK,MAAZ,EAAoB;cAClB;YACD;;YAEDgI,aAAa,CAAChI,GAAD,CAAb,GAAqB6H,aAAa,CAAC7H,GAAD,CAAlC,CAjBgD,CAiBP;;YAEzC,IAAI,CAACC,gBAAgB,CAACqF,KAAK,CAACtG,KAAP,EAAcgB,GAAd,CAArB,EAAyC;cACvC+H,SAAS,CAAC/H,GAAD,CAAT,GAAiB6H,aAAa,CAAC7H,GAAD,CAA9B;YACD;UACF,CAtBD,EArBqC,CA2CjC;UACJ;;UAEA,IAAIyH,oBAAoB,IAAII,aAAa,CAACrK,cAAd,CAA6B,YAA7B,CAA5B,EAAwE;YACtE8H,KAAK,CAACtG,KAAN,CAAY0I,kBAAZ,CAA+BG,aAAa,CAAChB,UAA7C,EAAyDjN,QAAQ,CAAC,EAAD,EAAK0L,KAAK,CAACqC,kBAAN,EAAL,EAAiCE,aAAjC,CAAjE;UACD;;UAED,OAAOE,SAAP;QACD,CAnDM,EAmDJ,YAAY;UACb;UACArN,MAAM,CAACC,EAAD,CAAN,GAFa,CAEC;UACd;;UAEA,IAAIsN,oBAAoB,GAAGrI,MAAM,CAACC,IAAP,CAAY2H,gBAAZ,EAA8BhL,MAA9B,GAAuC,CAAlE;;UAEA,IAAIyL,oBAAJ,EAA0B;YACxB3C,KAAK,CAACtG,KAAN,CAAYkJ,aAAZ,CAA0BV,gBAA1B,EAA4ClC,KAAK,CAACqC,kBAAN,EAA5C;UACD;;UAED,IAAIL,cAAJ,EAAoB;YAClBhC,KAAK,CAACtG,KAAN,CAAYmJ,QAAZ,CAAqBd,UAAU,CAACT,YAAhC,EAA8CtB,KAAK,CAACqC,kBAAN,EAA9C;UACD;;UAED,IAAIJ,WAAW,KAAKrH,SAApB,EAA+B;YAC7BoF,KAAK,CAACtG,KAAN,CAAYoJ,QAAZ,CAAqBb,WAArB,EAAkCjC,KAAK,CAACqC,kBAAN,EAAlC;UACD,CAjBY,CAiBX;UACF;;;UAGArC,KAAK,CAACtG,KAAN,CAAYqJ,YAAZ,CAAyBb,gBAAzB,EAA2ClC,KAAK,CAACqC,kBAAN,EAA3C;QACD,CAzEM,CAAP;MA0ED,CAvFD;;MAyFArC,KAAK,CAACgD,OAAN,GAAgB,UAAUxN,IAAV,EAAgB;QAC9B,OAAOwK,KAAK,CAACiD,SAAN,GAAkBzN,IAAzB;MACD,CAFD;;MAIAwK,KAAK,CAACkD,YAAN,GAAqB,UAAUC,KAAV,EAAiBC,MAAjB,EAAyB;QAC5C,IAAIC,SAAJ;;QAEA,IAAItN,IAAI,GAAGoN,KAAK,KAAK,KAAK,CAAf,GAAmB,EAAnB,GAAwBA,KAAnC;QAAA,IACIG,WAAW,GAAGvN,IAAI,CAACwN,MADvB;QAAA,IAEIA,MAAM,GAAGD,WAAW,KAAK,KAAK,CAArB,GAAyB,KAAzB,GAAiCA,WAF9C;QAAA,IAGI9K,GAAG,GAAGzC,IAAI,CAACyC,GAHf;QAAA,IAIIgL,IAAI,GAAGnP,6BAA6B,CAAC0B,IAAD,EAAO,CAAC,QAAD,EAAW,KAAX,CAAP,CAJxC;;QAMA,IAAI+C,KAAK,GAAGsK,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;QAAA,IACIK,qBAAqB,GAAG3K,KAAK,CAAC4K,gBADlC;QAAA,IAEIA,gBAAgB,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAFlE,CAT4C,CAa5C;QACA;;;QACAzD,KAAK,CAACkD,YAAN,CAAmBS,MAAnB,GAA4B,IAA5B;QACA3D,KAAK,CAACkD,YAAN,CAAmBK,MAAnB,GAA4BA,MAA5B;QACAvD,KAAK,CAACkD,YAAN,CAAmBQ,gBAAnB,GAAsCA,gBAAtC;;QAEA,IAAIE,cAAc,GAAG5D,KAAK,CAAC3F,QAAN,EAArB;QAAA,IACItB,MAAM,GAAG6K,cAAc,CAAC7K,MAD5B;;QAGA,OAAOzE,QAAQ,EAAE+O,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAACE,MAAD,CAAT,GAAoBnL,UAAU,CAACI,GAAD,EAAMwH,KAAK,CAACgD,OAAZ,CAA9C,EAAoEK,SAAS,CAACQ,IAAV,GAAiB,UAArF,EAAiGR,SAAS,CAAC,eAAD,CAAT,GAA6BtK,MAA9H,EAAsIsK,SAAS,CAAC,eAAD,CAAT,GAA6B,SAAnK,EAA8KA,SAAS,CAAC,WAAD,CAAT,GAAyBtK,MAAM,GAAGiH,KAAK,CAACE,MAAT,GAAkB,IAA/N,EAAqOmD,SAAS,CAAC,iBAAD,CAAT,GAA+BrD,KAAK,CAACG,OAA1Q,EAAmRkD,SAArR,GAAiSG,IAAjS,CAAf;MACD,CAvBD;;MAyBAxD,KAAK,CAAC8D,eAAN,GAAwB;QACtBC,SAAS,EAAE,SAASA,SAAT,CAAmBnM,KAAnB,EAA0B;UACnC,IAAIoM,MAAM,GAAG,IAAb;;UAEApM,KAAK,CAACqM,cAAN;;UAEA,IAAI,KAAK5J,QAAL,GAAgBtB,MAApB,EAA4B;YAC1B,IAAImL,MAAM,GAAGtM,KAAK,CAACuM,QAAN,GAAiB,CAAjB,GAAqB,CAAlC;YACA,KAAKC,oBAAL,CAA0BF,MAA1B,EAAkC;cAChC1K,IAAI,EAAEqF;YAD0B,CAAlC;UAGD,CALD,MAKO;YACL,KAAKuC,gBAAL,CAAsB;cACpBrI,MAAM,EAAE,IADY;cAEpBS,IAAI,EAAEqF;YAFc,CAAtB,EAGG,YAAY;cACb,IAAIrD,SAAS,GAAGwI,MAAM,CAACK,YAAP,EAAhB;;cAEA,IAAI7I,SAAS,GAAG,CAAhB,EAAmB;gBACjB,IAAI8I,eAAe,GAAGN,MAAM,CAAC3J,QAAP,EAAtB;gBAAA,IACI4G,gBAAgB,GAAGqD,eAAe,CAACrD,gBADvC;;gBAGA,IAAIsD,oBAAoB,GAAGlJ,oBAAoB,CAAC,CAAD,EAAI4F,gBAAJ,EAAsBzF,SAAtB,EAAiC,UAAUS,KAAV,EAAiB;kBAC/F,OAAO+H,MAAM,CAACvI,oBAAP,CAA4BQ,KAA5B,CAAP;gBACD,CAF8C,CAA/C;;gBAIA+H,MAAM,CAAChD,mBAAP,CAA2BuD,oBAA3B,EAAiD;kBAC/C/K,IAAI,EAAEqF;gBADyC,CAAjD;cAGD;YACF,CAlBD;UAmBD;QACF,CAhCqB;QAiCtB2F,OAAO,EAAE,SAASA,OAAT,CAAiB5M,KAAjB,EAAwB;UAC/B,IAAI6M,MAAM,GAAG,IAAb;;UAEA7M,KAAK,CAACqM,cAAN;;UAEA,IAAI,KAAK5J,QAAL,GAAgBtB,MAApB,EAA4B;YAC1B,IAAImL,MAAM,GAAGtM,KAAK,CAACuM,QAAN,GAAiB,CAAC,CAAlB,GAAsB,CAAC,CAApC;YACA,KAAKC,oBAAL,CAA0BF,MAA1B,EAAkC;cAChC1K,IAAI,EAAEoF;YAD0B,CAAlC;UAGD,CALD,MAKO;YACL,KAAKwC,gBAAL,CAAsB;cACpBrI,MAAM,EAAE,IADY;cAEpBS,IAAI,EAAEoF;YAFc,CAAtB,EAGG,YAAY;cACb,IAAIpD,SAAS,GAAGiJ,MAAM,CAACJ,YAAP,EAAhB;;cAEA,IAAI7I,SAAS,GAAG,CAAhB,EAAmB;gBACjB,IAAIkJ,eAAe,GAAGD,MAAM,CAACpK,QAAP,EAAtB;gBAAA,IACI4G,gBAAgB,GAAGyD,eAAe,CAACzD,gBADvC;;gBAGA,IAAIsD,oBAAoB,GAAGlJ,oBAAoB,CAAC,CAAC,CAAF,EAAK4F,gBAAL,EAAuBzF,SAAvB,EAAkC,UAAUS,KAAV,EAAiB;kBAChG,OAAOwI,MAAM,CAAChJ,oBAAP,CAA4BQ,KAA5B,CAAP;gBACD,CAF8C,CAA/C;;gBAIAwI,MAAM,CAACzD,mBAAP,CAA2BuD,oBAA3B,EAAiD;kBAC/C/K,IAAI,EAAEoF;gBADyC,CAAjD;cAGD;YACF,CAlBD;UAmBD;QACF,CAhEqB;QAiEtB+F,KAAK,EAAE,SAASA,KAAT,CAAe/M,KAAf,EAAsB;UAC3B,IAAIA,KAAK,CAACgN,KAAN,KAAgB,GAApB,EAAyB;YACvB;UACD;;UAED,IAAIC,eAAe,GAAG,KAAKxK,QAAL,EAAtB;UAAA,IACItB,MAAM,GAAG8L,eAAe,CAAC9L,MAD7B;UAAA,IAEIkI,gBAAgB,GAAG4D,eAAe,CAAC5D,gBAFvC;;UAIA,IAAIlI,MAAM,IAAIkI,gBAAgB,IAAI,IAAlC,EAAwC;YACtCrJ,KAAK,CAACqM,cAAN;YACA,IAAIvC,IAAI,GAAG,KAAKnB,KAAL,CAAWU,gBAAX,CAAX;YACA,IAAI6D,QAAQ,GAAG,KAAKrJ,oBAAL,CAA0BwF,gBAA1B,CAAf;;YAEA,IAAIS,IAAI,IAAI,IAAR,IAAgBoD,QAAQ,IAAIA,QAAQ,CAAC9I,YAAT,CAAsB,UAAtB,CAAhC,EAAmE;cACjE;YACD;;YAED,KAAK8F,qBAAL,CAA2B;cACzBtI,IAAI,EAAEuF;YADmB,CAA3B;UAGD;QACF,CAvFqB;QAwFtBgG,MAAM,EAAE,SAASA,MAAT,CAAgBnN,KAAhB,EAAuB;UAC7BA,KAAK,CAACqM,cAAN;UACA,KAAKe,KAAL,CAAW;YACTxL,IAAI,EAAEsF,aADG;YAETwC,YAAY,EAAE,IAFL;YAGTC,UAAU,EAAE;UAHH,CAAX;QAKD;MA/FqB,CAAxB;MAiGAvB,KAAK,CAACiF,qBAAN,GAA8B3Q,QAAQ,CAAC,EAAD,EAAK0L,KAAK,CAAC8D,eAAX,EAA4B;QAChE,KAAK,SAASoB,CAAT,CAAWtN,KAAX,EAAkB;UACrBA,KAAK,CAACqM,cAAN;UACA,KAAKkB,UAAL,CAAgB;YACd3L,IAAI,EAAE6F;UADQ,CAAhB;QAGD;MAN+D,CAA5B,CAAtC;MAQAW,KAAK,CAACoF,oBAAN,GAA6B9Q,QAAQ,CAAC,EAAD,EAAK0L,KAAK,CAAC8D,eAAX,EAA4B;QAC/DuB,IAAI,EAAE,SAASA,IAAT,CAAczN,KAAd,EAAqB;UACzB,IAAI0N,MAAM,GAAG,IAAb;;UAEA1N,KAAK,CAACqM,cAAN;UACA,IAAIzI,SAAS,GAAG,KAAK6I,YAAL,EAAhB;;UAEA,IAAIkB,eAAe,GAAG,KAAKlL,QAAL,EAAtB;UAAA,IACItB,MAAM,GAAGwM,eAAe,CAACxM,MAD7B;;UAGA,IAAIyC,SAAS,IAAI,CAAb,IAAkB,CAACzC,MAAvB,EAA+B;YAC7B;UACD,CAXwB,CAWvB;;;UAGF,IAAIyM,mBAAmB,GAAG1J,uBAAuB,CAAC,CAAD,EAAI,CAAJ,EAAON,SAAP,EAAkB,UAAUS,KAAV,EAAiB;YAClF,OAAOqJ,MAAM,CAAC7J,oBAAP,CAA4BQ,KAA5B,CAAP;UACD,CAFgD,EAE9C,KAF8C,CAAjD;UAGA,KAAK+E,mBAAL,CAAyBwE,mBAAzB,EAA8C;YAC5ChM,IAAI,EAAEwF;UADsC,CAA9C;QAGD,CArB8D;QAsB/DyG,GAAG,EAAE,SAASA,GAAT,CAAa7N,KAAb,EAAoB;UACvB,IAAI8N,MAAM,GAAG,IAAb;;UAEA9N,KAAK,CAACqM,cAAN;UACA,IAAIzI,SAAS,GAAG,KAAK6I,YAAL,EAAhB;;UAEA,IAAIsB,eAAe,GAAG,KAAKtL,QAAL,EAAtB;UAAA,IACItB,MAAM,GAAG4M,eAAe,CAAC5M,MAD7B;;UAGA,IAAIyC,SAAS,IAAI,CAAb,IAAkB,CAACzC,MAAvB,EAA+B;YAC7B;UACD,CAXsB,CAWrB;;;UAGF,IAAIyM,mBAAmB,GAAG1J,uBAAuB,CAAC,CAAC,CAAF,EAAKN,SAAS,GAAG,CAAjB,EAAoBA,SAApB,EAA+B,UAAUS,KAAV,EAAiB;YAC/F,OAAOyJ,MAAM,CAACjK,oBAAP,CAA4BQ,KAA5B,CAAP;UACD,CAFgD,EAE9C,KAF8C,CAAjD;UAGA,KAAK+E,mBAAL,CAAyBwE,mBAAzB,EAA8C;YAC5ChM,IAAI,EAAEyF;UADsC,CAA9C;QAGD;MA1C8D,CAA5B,CAArC;;MA6CAe,KAAK,CAAC4F,oBAAN,GAA6B,UAAUC,MAAV,EAAkB;QAC7C,IAAIC,KAAK,GAAGD,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;QAAA,IACIE,OAAO,GAAGD,KAAK,CAACC,OADpB;QAAA,IAEIC,OAAO,GAAGF,KAAK,CAACE,OAFpB;QAAA,IAGIC,SAAS,GAAGH,KAAK,CAACG,SAHtB;QAAA,IAIIC,OAAO,GAAGJ,KAAK,CAACI,OAJpB;QAAA,IAKIC,MAAM,GAAGL,KAAK,CAACK,MALnB;QAAA,IAMI3C,IAAI,GAAGnP,6BAA6B,CAACyR,KAAD,EAAQ,CAAC,SAAD,EAAY,SAAZ,EAAuB,WAAvB,EAAoC,SAApC,EAA+C,QAA/C,CAAR,CANxC;;QAQA,IAAIM,eAAe,GAAGpG,KAAK,CAAC3F,QAAN,EAAtB;QAAA,IACItB,MAAM,GAAGqN,eAAe,CAACrN,MAD7B;;QAGA,IAAIsN,oBAAoB,GAAG;UACzBN,OAAO,EAAEvO,oBAAoB,CAACuO,OAAD,EAAU/F,KAAK,CAACsG,iBAAhB,CADJ;UAEzBL,SAAS,EAAEzO,oBAAoB,CAACyO,SAAD,EAAYjG,KAAK,CAACuG,mBAAlB,CAFN;UAGzBL,OAAO,EAAE1O,oBAAoB,CAAC0O,OAAD,EAAUlG,KAAK,CAACwG,iBAAhB,CAHJ;UAIzBL,MAAM,EAAE3O,oBAAoB,CAAC2O,MAAD,EAASnG,KAAK,CAACyG,gBAAf;QAJH,CAA3B;QAMA,IAAIC,aAAa,GAAGlD,IAAI,CAACmD,QAAL,GAAgB,EAAhB,GAAqBN,oBAAzC;QACA,OAAO/R,QAAQ,CAAC;UACdkF,IAAI,EAAE,QADQ;UAEdqK,IAAI,EAAE,QAFQ;UAGd,cAAc9K,MAAM,GAAG,YAAH,GAAkB,WAHxB;UAId,iBAAiB,IAJH;UAKd,eAAe;QALD,CAAD,EAMZ2N,aANY,EAMGlD,IANH,CAAf;MAOD,CA1BD;;MA4BAxD,KAAK,CAACwG,iBAAN,GAA0B,UAAU5O,KAAV,EAAiB;QACzC;QACAA,KAAK,CAACqM,cAAN;MACD,CAHD;;MAKAjE,KAAK,CAACuG,mBAAN,GAA4B,UAAU3O,KAAV,EAAiB;QAC3C,IAAI8C,GAAG,GAAGG,iBAAiB,CAACjD,KAAD,CAA3B;;QAEA,IAAIoI,KAAK,CAACiF,qBAAN,CAA4BvK,GAA5B,CAAJ,EAAsC;UACpCsF,KAAK,CAACiF,qBAAN,CAA4BvK,GAA5B,EAAiCU,IAAjC,CAAsC7G,sBAAsB,CAACyL,KAAD,CAA5D,EAAqEpI,KAArE;QACD;MACF,CAND;;MAQAoI,KAAK,CAACsG,iBAAN,GAA0B,UAAU1O,KAAV,EAAiB;QACzCA,KAAK,CAACqM,cAAN,GADyC,CACjB;QACxB;;QAEA;;QAEA,IAAKjE,KAAK,CAACtG,KAAN,CAAYkN,WAAZ,CAAwBtK,QAAxB,CAAiCG,aAAjC,KAAmDuD,KAAK,CAACtG,KAAN,CAAYkN,WAAZ,CAAwBtK,QAAxB,CAAiCiC,IAAzF,EAA+F;UAC7F3G,KAAK,CAACwE,MAAN,CAAayK,KAAb;QACD,CARwC,CAQvC;QACF;QACA;;;QAGA,IAAIhK,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,MAA7B,EAAqC;UACnCiD,KAAK,CAACmF,UAAN,CAAiB;YACf3L,IAAI,EAAE8F;UADS,CAAjB;QAGD,CAJD,MAIO;UACL;UACAU,KAAK,CAACS,kBAAN,CAAyB,YAAY;YACnC,OAAOT,KAAK,CAACmF,UAAN,CAAiB;cACtB3L,IAAI,EAAE8F;YADgB,CAAjB,CAAP;UAGD,CAJD;QAKD;MACF,CAzBD;;MA2BAU,KAAK,CAACyG,gBAAN,GAAyB,UAAU7O,KAAV,EAAiB;QACxC,IAAIkP,UAAU,GAAGlP,KAAK,CAACwE,MAAvB,CADwC,CACT;QAC/B;;QAEA4D,KAAK,CAACS,kBAAN,CAAyB,YAAY;UACnC,IAAI,CAACT,KAAK,CAAC+G,WAAP,KAAuB/G,KAAK,CAACtG,KAAN,CAAYkN,WAAZ,CAAwBtK,QAAxB,CAAiCG,aAAjC,IAAkD,IAAlD,IAA0DuD,KAAK,CAACtG,KAAN,CAAYkN,WAAZ,CAAwBtK,QAAxB,CAAiCG,aAAjC,CAA+CwD,EAA/C,KAAsDD,KAAK,CAACI,OAA7I,KAAyJJ,KAAK,CAACtG,KAAN,CAAYkN,WAAZ,CAAwBtK,QAAxB,CAAiCG,aAAjC,KAAmDqK,UAAhN,CAA2N;UAA3N,EACE;YACE9G,KAAK,CAACgF,KAAN,CAAY;cACVxL,IAAI,EAAE+F;YADI,CAAZ;UAGD;QACJ,CAPD;MAQD,CAZD;;MAcAS,KAAK,CAACgH,aAAN,GAAsB,UAAUtN,KAAV,EAAiB;QACrC,OAAOpF,QAAQ,CAAC;UACd2S,OAAO,EAAEjH,KAAK,CAACI,OADD;UAEdH,EAAE,EAAED,KAAK,CAACG;QAFI,CAAD,EAGZzG,KAHY,CAAf;MAID,CALD;;MAOAsG,KAAK,CAACkH,aAAN,GAAsB,UAAUC,MAAV,EAAkB;QACtC,IAAIC,KAAK,GAAGD,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;QAAA,IACIlB,SAAS,GAAGmB,KAAK,CAACnB,SADtB;QAAA,IAEIE,MAAM,GAAGiB,KAAK,CAACjB,MAFnB;QAAA,IAGIrD,QAAQ,GAAGsE,KAAK,CAACtE,QAHrB;QAAA,IAIIuE,OAAO,GAAGD,KAAK,CAACC,OAJpB;QAAA,IAKIC,YAAY,GAAGF,KAAK,CAACE,YALzB;QAAA,IAMI9D,IAAI,GAAGnP,6BAA6B,CAAC+S,KAAD,EAAQ,CAAC,WAAD,EAAc,QAAd,EAAwB,UAAxB,EAAoC,SAApC,EAA+C,cAA/C,CAAR,CANxC;;QAQA,IAAIG,WAAJ;QACA,IAAIb,aAAa,GAAG,EAApB;QACA;;QAEAa,WAAW,GAAG,UAAd;;QAEA,IAAIC,eAAe,GAAGxH,KAAK,CAAC3F,QAAN,EAAtB;QAAA,IACIkH,UAAU,GAAGiG,eAAe,CAACjG,UADjC;QAAA,IAEIxI,MAAM,GAAGyO,eAAe,CAACzO,MAF7B;QAAA,IAGIkI,gBAAgB,GAAGuG,eAAe,CAACvG,gBAHvC;;QAKA,IAAI,CAACuC,IAAI,CAACmD,QAAV,EAAoB;UAClB,IAAIc,cAAJ;;UAEAf,aAAa,IAAIe,cAAc,GAAG,EAAjB,EAAqBA,cAAc,CAACF,WAAD,CAAd,GAA8B/P,oBAAoB,CAACsL,QAAD,EAAWuE,OAAX,EAAoBrH,KAAK,CAAC0H,iBAA1B,CAAvE,EAAqHD,cAAc,CAACxB,SAAf,GAA2BzO,oBAAoB,CAACyO,SAAD,EAAYjG,KAAK,CAAC2H,kBAAlB,CAApK,EAA2MF,cAAc,CAACtB,MAAf,GAAwB3O,oBAAoB,CAAC2O,MAAD,EAASnG,KAAK,CAAC4H,eAAf,CAAvP,EAAwRH,cAA5R,CAAb;QACD;QACD;;;QAGA,OAAOnT,QAAQ,CAAC;UACd,qBAAqB,MADP;UAEd,yBAAyByE,MAAM,IAAI,OAAOkI,gBAAP,KAA4B,QAAtC,IAAkDA,gBAAgB,IAAI,CAAtE,GAA0EjB,KAAK,CAACK,SAAN,CAAgBY,gBAAhB,CAA1E,GAA8G,IAFzH;UAGd,iBAAiBlI,MAAM,GAAGiH,KAAK,CAACE,MAAT,GAAkB,IAH3B;UAId,mBAAmBF,KAAK,CAACG,OAJX;UAKd;UACA;UACA0H,YAAY,EAAE,KAPA;UAQdC,KAAK,EAAEvG,UARO;UASdtB,EAAE,EAAED,KAAK,CAACI;QATI,CAAD,EAUZsG,aAVY,EAUGlD,IAVH,CAAf;MAWD,CAvCD;;MAyCAxD,KAAK,CAAC2H,kBAAN,GAA2B,UAAU/P,KAAV,EAAiB;QAC1C,IAAI8C,GAAG,GAAGG,iBAAiB,CAACjD,KAAD,CAA3B;;QAEA,IAAI8C,GAAG,IAAIsF,KAAK,CAACoF,oBAAN,CAA2B1K,GAA3B,CAAX,EAA4C;UAC1CsF,KAAK,CAACoF,oBAAN,CAA2B1K,GAA3B,EAAgCU,IAAhC,CAAqC7G,sBAAsB,CAACyL,KAAD,CAA3D,EAAoEpI,KAApE;QACD;MACF,CAND;;MAQAoI,KAAK,CAAC0H,iBAAN,GAA0B,UAAU9P,KAAV,EAAiB;QACzCoI,KAAK,CAACoB,gBAAN,CAAuB;UACrB5H,IAAI,EAAE4F,WADe;UAErBrG,MAAM,EAAE,IAFa;UAGrBwI,UAAU,EAAE3J,KAAK,CAACwE,MAAN,CAAa0L,KAHJ;UAIrB7G,gBAAgB,EAAEjB,KAAK,CAACtG,KAAN,CAAYyH;QAJT,CAAvB;MAMD,CAPD;;MASAnB,KAAK,CAAC4H,eAAN,GAAwB,YAAY;QAClC;QACA5H,KAAK,CAACS,kBAAN,CAAyB,YAAY;UACnC,IAAIsH,uBAAuB,GAAG/H,KAAK,CAACtG,KAAN,CAAYkN,WAAZ,CAAwBtK,QAAxB,IAAoC,CAAC,CAAC0D,KAAK,CAACtG,KAAN,CAAYkN,WAAZ,CAAwBtK,QAAxB,CAAiCG,aAAvE,IAAwF,CAAC,CAACuD,KAAK,CAACtG,KAAN,CAAYkN,WAAZ,CAAwBtK,QAAxB,CAAiCG,aAAjC,CAA+CuL,OAAzI,IAAoJhI,KAAK,CAACtG,KAAN,CAAYkN,WAAZ,CAAwBtK,QAAxB,CAAiCG,aAAjC,CAA+CuL,OAA/C,CAAuDC,MAA3M,IAAqNjI,KAAK,CAACiD,SAA3N,IAAwOjD,KAAK,CAACiD,SAAN,CAAgBzM,QAAhB,CAAyBwJ,KAAK,CAACtG,KAAN,CAAYkN,WAAZ,CAAwBtK,QAAxB,CAAiCG,aAA1D,CAAtQ;;UAEA,IAAI,CAACuD,KAAK,CAAC+G,WAAP,IAAsB,CAACgB,uBAA3B,EAAoD;YAClD/H,KAAK,CAACgF,KAAN,CAAY;cACVxL,IAAI,EAAE2F;YADI,CAAZ;UAGD;QACF,CARD;MASD,CAXD;;MAaAa,KAAK,CAACkI,OAAN,GAAgB,UAAU1S,IAAV,EAAgB;QAC9BwK,KAAK,CAACmI,SAAN,GAAkB3S,IAAlB;MACD,CAFD;;MAIAwK,KAAK,CAACoI,YAAN,GAAqB,UAAUC,MAAV,EAAkBC,MAAlB,EAA0B;QAC7C,IAAIC,SAAJ;;QAEA,IAAIC,KAAK,GAAGH,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;QAAA,IACII,YAAY,GAAGD,KAAK,CAACjF,MADzB;QAAA,IAEIA,MAAM,GAAGkF,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAF/C;QAAA,IAGIjQ,GAAG,GAAGgQ,KAAK,CAAChQ,GAHhB;QAAA,IAIIkB,KAAK,GAAGrF,6BAA6B,CAACmU,KAAD,EAAQ,CAAC,QAAD,EAAW,KAAX,CAAR,CAJzC;;QAMA,IAAIE,KAAK,GAAGJ,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;QAAA,IACIK,qBAAqB,GAAGD,KAAK,CAAChF,gBADlC;QAAA,IAEIA,gBAAgB,GAAGiF,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAFlE;;QAIA3I,KAAK,CAACoI,YAAN,CAAmBzE,MAAnB,GAA4B,IAA5B;QACA3D,KAAK,CAACoI,YAAN,CAAmB7E,MAAnB,GAA4BA,MAA5B;QACAvD,KAAK,CAACoI,YAAN,CAAmB1E,gBAAnB,GAAsCA,gBAAtC;QACA,OAAOpP,QAAQ,EAAEiU,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAAChF,MAAD,CAAT,GAAoBnL,UAAU,CAACI,GAAD,EAAMwH,KAAK,CAACkI,OAAZ,CAA9C,EAAoEK,SAAS,CAAC1E,IAAV,GAAiB,SAArF,EAAgG0E,SAAS,CAAC,iBAAD,CAAT,GAA+B7O,KAAK,IAAIA,KAAK,CAAC,YAAD,CAAd,GAA+B,IAA/B,GAAsCsG,KAAK,CAACG,OAA3K,EAAoLoI,SAAS,CAACtI,EAAV,GAAeD,KAAK,CAACE,MAAzM,EAAiNqI,SAAnN,GAA+N7O,KAA/N,CAAf;MACD,CAjBD;;MAmBAsG,KAAK,CAAC4I,YAAN,GAAqB,UAAUC,MAAV,EAAkB;QACrC,IAAIC,qBAAJ;;QAEA,IAAIC,KAAK,GAAGF,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;QAAA,IACIG,WAAW,GAAGD,KAAK,CAACC,WADxB;QAAA,IAEIC,WAAW,GAAGF,KAAK,CAACE,WAFxB;QAAA,IAGIlD,OAAO,GAAGgD,KAAK,CAAChD,OAHpB;QAAA,IAIIC,OAAO,GAAG+C,KAAK,CAAC/C,OAJpB;QAAA,IAKI/J,KAAK,GAAG8M,KAAK,CAAC9M,KALlB;QAAA,IAMIiN,UAAU,GAAGH,KAAK,CAACrH,IANvB;QAAA,IAOIA,IAAI,GAAGwH,UAAU,KAAK,KAAK,CAApB,GAAwBrM,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB;QACnC;QACAnC,SAFmC,GAEvBjB,YAAY,CAAC,cAAD,EAAiB,MAAjB,CAFb,GAEwCuP,UATnD;QAAA,IAUI1F,IAAI,GAAGnP,6BAA6B,CAAC0U,KAAD,EAAQ,CAAC,aAAD,EAAgB,aAAhB,EAA+B,SAA/B,EAA0C,SAA1C,EAAqD,OAArD,EAA8D,MAA9D,CAAR,CAVxC;;QAYA,IAAI9M,KAAK,KAAKrB,SAAd,EAAyB;UACvBoF,KAAK,CAACO,KAAN,CAAYK,IAAZ,CAAiBc,IAAjB;;UAEAzF,KAAK,GAAG+D,KAAK,CAACO,KAAN,CAAYxF,OAAZ,CAAoB2G,IAApB,CAAR;QACD,CAJD,MAIO;UACL1B,KAAK,CAACO,KAAN,CAAYtE,KAAZ,IAAqByF,IAArB;QACD;;QAED,IAAIyH,WAAW,GAAG,SAAlB;QACA,IAAIC,kBAAkB,GAAGrD,OAAzB;QACA,IAAIM,oBAAoB,IAAIyC,qBAAqB,GAAG;UAClD;UACA;UACA;UACAE,WAAW,EAAExR,oBAAoB,CAACwR,WAAD,EAAc,YAAY;YACzD,IAAI/M,KAAK,KAAK+D,KAAK,CAAC3F,QAAN,GAAiB4G,gBAA/B,EAAiD;cAC/C;YACD;;YAEDjB,KAAK,CAACgB,mBAAN,CAA0B/E,KAA1B,EAAiC;cAC/BzC,IAAI,EAAEmF;YADyB,CAAjC,EALyD,CAOrD;YACJ;YACA;YACA;;;YAGAqB,KAAK,CAACqJ,cAAN,GAAuB,IAAvB;;YAEArJ,KAAK,CAACS,kBAAN,CAAyB,YAAY;cACnC,OAAOT,KAAK,CAACqJ,cAAN,GAAuB,KAA9B;YACD,CAFD,EAEG,GAFH;UAGD,CAlBgC,CAJiB;UAuBlDJ,WAAW,EAAEzR,oBAAoB,CAACyR,WAAD,EAAc,UAAUrR,KAAV,EAAiB;YAC9D;YACA;YACA;YACAA,KAAK,CAACqM,cAAN;UACD,CALgC;QAvBiB,CAAxB,EA6BzB6E,qBAAqB,CAACK,WAAD,CAArB,GAAqC3R,oBAAoB,CAAC4R,kBAAD,EAAqB,YAAY;UAC3FpJ,KAAK,CAAC4B,iBAAN,CAAwB3F,KAAxB,EAA+B;YAC7BzC,IAAI,EAAE0F;UADuB,CAA/B;QAGD,CAJ2D,CA7BhC,EAiCxB4J,qBAjCoB,CAAxB,CAzBqC,CA0DT;QAC5B;;QAEA,IAAIpC,aAAa,GAAGlD,IAAI,CAACmD,QAAL,GAAgB;UAClCsC,WAAW,EAAE5C,oBAAoB,CAAC4C;QADA,CAAhB,GAEhB5C,oBAFJ;QAGA,OAAO/R,QAAQ,CAAC;UACd2L,EAAE,EAAED,KAAK,CAACK,SAAN,CAAgBpE,KAAhB,CADU;UAEd4H,IAAI,EAAE,QAFQ;UAGd,iBAAiB7D,KAAK,CAAC3F,QAAN,GAAiB4G,gBAAjB,KAAsChF;QAHzC,CAAD,EAIZyK,aAJY,EAIGlD,IAJH,CAAf;MAKD,CArED;;MAuEAxD,KAAK,CAACsJ,UAAN,GAAmB,YAAY;QAC7BtJ,KAAK,CAACO,KAAN,GAAc,EAAd;MACD,CAFD;;MAIAP,KAAK,CAACgF,KAAN,GAAc,UAAU9D,eAAV,EAA2B7L,EAA3B,EAA+B;QAC3C,IAAI6L,eAAe,KAAK,KAAK,CAA7B,EAAgC;UAC9BA,eAAe,GAAG,EAAlB;QACD;;QAEDA,eAAe,GAAGjH,SAAS,CAACiH,eAAD,CAA3B;;QAEAlB,KAAK,CAACoB,gBAAN,CAAuB,UAAUmI,KAAV,EAAiB;UACtC,IAAIjI,YAAY,GAAGiI,KAAK,CAACjI,YAAzB;UACA,OAAOhN,QAAQ,CAAC;YACdyE,MAAM,EAAEiH,KAAK,CAACtG,KAAN,CAAY8H,aADN;YAEdP,gBAAgB,EAAEjB,KAAK,CAACtG,KAAN,CAAYyH,uBAFhB;YAGdI,UAAU,EAAEvB,KAAK,CAACtG,KAAN,CAAYiI,YAAZ,CAAyBL,YAAzB;UAHE,CAAD,EAIZJ,eAJY,CAAf;QAKD,CAPD,EAOG7L,EAPH;MAQD,CAfD;;MAiBA2K,KAAK,CAACmF,UAAN,GAAmB,UAAUjE,eAAV,EAA2B7L,EAA3B,EAA+B;QAChD,IAAI6L,eAAe,KAAK,KAAK,CAA7B,EAAgC;UAC9BA,eAAe,GAAG,EAAlB;QACD;;QAEDA,eAAe,GAAGjH,SAAS,CAACiH,eAAD,CAA3B;;QAEAlB,KAAK,CAACoB,gBAAN,CAAuB,UAAUoI,KAAV,EAAiB;UACtC,IAAIzQ,MAAM,GAAGyQ,KAAK,CAACzQ,MAAnB;UACA,OAAOzE,QAAQ,CAAC;YACdyE,MAAM,EAAE,CAACA;UADK,CAAD,EAEZA,MAAM,IAAI;YACXkI,gBAAgB,EAAEjB,KAAK,CAACtG,KAAN,CAAYyH;UADnB,CAFE,EAIZD,eAJY,CAAf;QAKD,CAPD,EAOG,YAAY;UACb,IAAIuI,eAAe,GAAGzJ,KAAK,CAAC3F,QAAN,EAAtB;UAAA,IACItB,MAAM,GAAG0Q,eAAe,CAAC1Q,MAD7B;UAAA,IAEIkI,gBAAgB,GAAGwI,eAAe,CAACxI,gBAFvC;;UAIA,IAAIlI,MAAJ,EAAY;YACV,IAAIiH,KAAK,CAACqE,YAAN,KAAuB,CAAvB,IAA4B,OAAOpD,gBAAP,KAA4B,QAA5D,EAAsE;cACpEjB,KAAK,CAACgB,mBAAN,CAA0BC,gBAA1B,EAA4CC,eAA5C;YACD;UACF;;UAED9L,MAAM,CAACC,EAAD,CAAN;QACD,CAnBD;MAoBD,CA3BD;;MA6BA2K,KAAK,CAAC0J,QAAN,GAAiB,UAAUrU,EAAV,EAAc;QAC7B2K,KAAK,CAACoB,gBAAN,CAAuB;UACrBrI,MAAM,EAAE;QADa,CAAvB,EAEG1D,EAFH;MAGD,CAJD;;MAMA2K,KAAK,CAAC2J,SAAN,GAAkB,UAAUtU,EAAV,EAAc;QAC9B2K,KAAK,CAACoB,gBAAN,CAAuB;UACrBrI,MAAM,EAAE;QADa,CAAvB,EAEG1D,EAFH;MAGD,CAJD;;MAMA2K,KAAK,CAAC4J,YAAN,GAAqBnT,QAAQ,CAAC,YAAY;QACxC,IAAIyD,KAAK,GAAG8F,KAAK,CAAC3F,QAAN,EAAZ;;QAEA,IAAIqH,IAAI,GAAG1B,KAAK,CAACO,KAAN,CAAYrG,KAAK,CAAC+G,gBAAlB,CAAX;;QAEA,IAAIjI,WAAW,GAAGgH,KAAK,CAACqE,YAAN,EAAlB;;QAEA,IAAI/G,MAAM,GAAG0C,KAAK,CAACtG,KAAN,CAAYb,oBAAZ,CAAiCvE,QAAQ,CAAC;UACrDqN,YAAY,EAAE3B,KAAK,CAACtG,KAAN,CAAYiI,YAD2B;UAErD1I,mBAAmB,EAAE+G,KAAK,CAAC/G,mBAF0B;UAGrDD,WAAW,EAAEA,WAHwC;UAIrD6Q,eAAe,EAAEnI;QAJoC,CAAD,EAKnDxH,KALmD,CAAzC,CAAb;;QAOA8F,KAAK,CAAC/G,mBAAN,GAA4BD,WAA5B;QACAqE,SAAS,CAACC,MAAD,EAAS0C,KAAK,CAACtG,KAAN,CAAYkN,WAAZ,CAAwBtK,QAAjC,CAAT;MACD,CAhB4B,EAgB1B,GAhB0B,CAA7B,CA/pByB,CAirBzB;MACA;MACA;;MACA,IAAIwN,WAAW,GAAG9J,KAAK,CAACtG,KAAxB;MAAA,IACIyH,uBAAuB,GAAG2I,WAAW,CAAC3I,uBAD1C;MAAA,IAEI4I,qBAAqB,GAAGD,WAAW,CAACE,uBAFxC;MAAA,IAGIC,iBAAiB,GAAGF,qBAAqB,KAAK,KAAK,CAA/B,GAAmC5I,uBAAnC,GAA6D4I,qBAHrF;MAAA,IAIIvI,aAAa,GAAGsI,WAAW,CAACtI,aAJhC;MAAA,IAKI0I,qBAAqB,GAAGJ,WAAW,CAACK,aALxC;MAAA,IAMIC,OAAO,GAAGF,qBAAqB,KAAK,KAAK,CAA/B,GAAmC1I,aAAnC,GAAmD0I,qBANjE;MAAA,IAOIG,qBAAqB,GAAGP,WAAW,CAACQ,iBAPxC;MAAA,IAQIC,WAAW,GAAGF,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,EAAnC,GAAwCA,qBAR1D;MAAA,IASIG,qBAAqB,GAAGV,WAAW,CAACW,mBATxC;MAAA,IAUIC,aAAa,GAAGF,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,IAAnC,GAA0CA,qBAV9D;;MAYA,IAAIG,MAAM,GAAG3K,KAAK,CAAC3F,QAAN,CAAe;QAC1B4G,gBAAgB,EAAEgJ,iBADQ;QAE1BlR,MAAM,EAAEqR,OAFkB;QAG1B7I,UAAU,EAAEgJ,WAHc;QAI1BjJ,YAAY,EAAEoJ;MAJY,CAAf,CAAb;;MAOA,IAAIC,MAAM,CAACrJ,YAAP,IAAuB,IAAvB,IAA+BtB,KAAK,CAACtG,KAAN,CAAY4Q,iBAAZ,KAAkC1P,SAArE,EAAgF;QAC9E+P,MAAM,CAACpJ,UAAP,GAAoBvB,KAAK,CAACtG,KAAN,CAAYiI,YAAZ,CAAyBgJ,MAAM,CAACrJ,YAAhC,CAApB;MACD;;MAEDtB,KAAK,CAAC9F,KAAN,GAAcyQ,MAAd;MACA,OAAO3K,KAAP;IACD;;IAED,IAAI4K,MAAM,GAAG/K,SAAS,CAAC3E,SAAvB;IAEA;AACJ;AACA;;IACI0P,MAAM,CAACC,qBAAP,GAA+B,SAASA,qBAAT,GAAiC;MAC9D,KAAKrK,UAAL,CAAgB1K,OAAhB,CAAwB,UAAUmK,EAAV,EAAc;QACpCnJ,YAAY,CAACmJ,EAAD,CAAZ;MACD,CAFD;MAGA,KAAKO,UAAL,GAAkB,EAAlB;IACD;IACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAdI;;IAiBAoK,MAAM,CAACvQ,QAAP,GAAkB,SAASyQ,UAAT,CAAoBC,YAApB,EAAkC;MAClD,IAAIA,YAAY,KAAK,KAAK,CAA1B,EAA6B;QAC3BA,YAAY,GAAG,KAAK7Q,KAApB;MACD;;MAED,OAAOG,QAAQ,CAAC0Q,YAAD,EAAe,KAAKrR,KAApB,CAAf;IACD,CAND;;IAQAkR,MAAM,CAACvG,YAAP,GAAsB,SAASA,YAAT,GAAwB;MAC5C;MACA;MACA;MACA;MACA,IAAI7I,SAAS,GAAG,KAAK+E,KAAL,CAAWrJ,MAA3B;;MAEA,IAAI,KAAKsE,SAAL,IAAkB,IAAtB,EAA4B;QAC1BA,SAAS,GAAG,KAAKA,SAAjB;MACD,CAFD,MAEO,IAAI,KAAK9B,KAAL,CAAW8B,SAAX,KAAyBZ,SAA7B,EAAwC;QAC7CY,SAAS,GAAG,KAAK9B,KAAL,CAAW8B,SAAvB;MACD;;MAED,OAAOA,SAAP;IACD,CAdD;;IAgBAoP,MAAM,CAACnP,oBAAP,GAA8B,SAASA,oBAAT,CAA8BQ,KAA9B,EAAqC;MACjE,OAAO,KAAKvC,KAAL,CAAWkN,WAAX,CAAuBtK,QAAvB,CAAgCoB,cAAhC,CAA+C,KAAK2C,SAAL,CAAepE,KAAf,CAA/C,CAAP;IACD,CAFD;;IAIA2O,MAAM,CAACI,6BAAP,GAAuC,SAASA,6BAAT,GAAyC;MAC9E;MACA;QACE,IAAIxV,IAAI,GAAG,KAAKiG,oBAAL,CAA0B,KAAKpB,QAAL,GAAgB4G,gBAA1C,CAAX;QACA,KAAKvH,KAAL,CAAWnE,cAAX,CAA0BC,IAA1B,EAAgC,KAAK2S,SAArC;MACD;IACF,CAND;;IAQAyC,MAAM,CAACxG,oBAAP,GAA8B,SAASA,oBAAT,CAA8BF,MAA9B,EAAsChD,eAAtC,EAAuD;MACnF,IAAI+J,MAAM,GAAG,IAAb;;MAEA,IAAIzP,SAAS,GAAG,KAAK6I,YAAL,EAAhB;;MAEA,IAAI6G,eAAe,GAAG,KAAK7Q,QAAL,EAAtB;MAAA,IACI4G,gBAAgB,GAAGiK,eAAe,CAACjK,gBADvC;;MAGA,IAAIzF,SAAS,GAAG,CAAhB,EAAmB;QACjB,IAAI+I,oBAAoB,GAAGlJ,oBAAoB,CAAC6I,MAAD,EAASjD,gBAAT,EAA2BzF,SAA3B,EAAsC,UAAUS,KAAV,EAAiB;UACpG,OAAOgP,MAAM,CAACxP,oBAAP,CAA4BQ,KAA5B,CAAP;QACD,CAF8C,CAA/C;QAGA,KAAK+E,mBAAL,CAAyBuD,oBAAzB,EAA+CrD,eAA/C;MACD;IACF,CAdD;;IAgBA0J,MAAM,CAACvI,kBAAP,GAA4B,SAASA,kBAAT,GAA8B;MACxD,IAAI8I,eAAe,GAAG,KAAK9Q,QAAL,EAAtB;MAAA,IACI4G,gBAAgB,GAAGkK,eAAe,CAAClK,gBADvC;MAAA,IAEIM,UAAU,GAAG4J,eAAe,CAAC5J,UAFjC;MAAA,IAGID,YAAY,GAAG6J,eAAe,CAAC7J,YAHnC;MAAA,IAIIvI,MAAM,GAAGoS,eAAe,CAACpS,MAJ7B;;MAMA,IAAI4I,YAAY,GAAG,KAAKjI,KAAL,CAAWiI,YAA9B;MACA,IAAI1B,EAAE,GAAG,KAAKA,EAAd;MACA,IAAIiD,YAAY,GAAG,KAAKA,YAAxB;MAAA,IACI0C,oBAAoB,GAAG,KAAKA,oBADhC;MAAA,IAEIoB,aAAa,GAAG,KAAKA,aAFzB;MAAA,IAGIoB,YAAY,GAAG,KAAKA,YAHxB;MAAA,IAIIlB,aAAa,GAAG,KAAKA,aAJzB;MAAA,IAKI0B,YAAY,GAAG,KAAKA,YALxB;MAAA,IAMIc,QAAQ,GAAG,KAAKA,QANpB;MAAA,IAOIC,SAAS,GAAG,KAAKA,SAPrB;MAAA,IAQIxE,UAAU,GAAG,KAAKA,UARtB;MAAA,IASI1D,UAAU,GAAG,KAAKA,UATtB;MAAA,IAUIG,iBAAiB,GAAG,KAAKA,iBAV7B;MAAA,IAWIE,qBAAqB,GAAG,KAAKA,qBAXjC;MAAA,IAYId,mBAAmB,GAAG,KAAKA,mBAZ/B;MAAA,IAaIK,cAAc,GAAG,KAAKA,cAb1B;MAAA,IAcIiI,UAAU,GAAG,KAAKA,UAdtB;MAAA,IAeItE,KAAK,GAAG,KAAKA,KAfjB;MAAA,IAgBInE,YAAY,GAAG,KAAKA,YAhBxB;MAAA,IAiBIE,cAAc,GAAG,KAAKA,cAjB1B;MAAA,IAkBIuB,QAAQ,GAAG,KAAKlB,gBAlBpB;MAmBA,OAAO;QACL;QACA8B,YAAY,EAAEA,YAFT;QAGL0C,oBAAoB,EAAEA,oBAHjB;QAILoB,aAAa,EAAEA,aAJV;QAKLoB,YAAY,EAAEA,YALT;QAMLlB,aAAa,EAAEA,aANV;QAOL0B,YAAY,EAAEA,YAPT;QAQL;QACA5D,KAAK,EAAEA,KATF;QAUL0E,QAAQ,EAAEA,QAVL;QAWLC,SAAS,EAAEA,SAXN;QAYLxE,UAAU,EAAEA,UAZP;QAaL1D,UAAU,EAAEA,UAbP;QAcLG,iBAAiB,EAAEA,iBAdd;QAeLE,qBAAqB,EAAEA,qBAflB;QAgBLd,mBAAmB,EAAEA,mBAhBhB;QAiBLK,cAAc,EAAEA,cAjBX;QAkBLiI,UAAU,EAAEA,UAlBP;QAmBLzI,YAAY,EAAEA,YAnBT;QAoBLE,cAAc,EAAEA,cApBX;QAqBLuB,QAAQ,EAAEA,QArBL;QAsBL;QACAX,YAAY,EAAEA,YAvBT;QAwBL;QACA1B,EAAE,EAAEA,EAzBC;QA0BL;QACAgB,gBAAgB,EAAEA,gBA3Bb;QA4BLM,UAAU,EAAEA,UA5BP;QA6BLxI,MAAM,EAAEA,MA7BH;QA8BLuI,YAAY,EAAEA;MA9BT,CAAP;IAgCD,CA5DD,CA4DE;IA5DF;;IA+DAsJ,MAAM,CAACQ,iBAAP,GAA2B,SAASA,iBAAT,GAA6B;MACtD,IAAIC,MAAM,GAAG,IAAb;MAEA;;;MACA,IAAIxO,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IAAyC,CAAC,KAA1C,IAAmD,KAAKqL,YAAL,CAAkBzE,MAArE,IAA+E,CAAC,KAAKyE,YAAL,CAAkB1E,gBAAtG,EAAwH;QACtH4H,mCAAmC,CAAC,KAAKnD,SAAN,EAAiB,KAAKC,YAAtB,CAAnC;MACD;MACD;;;MAGA;QACE;QACA;QACA;QACA;QACA;QACA,IAAIa,WAAW,GAAG,YAAY;UAC5BoC,MAAM,CAACtE,WAAP,GAAqB,IAArB;QACD,CAFD;;QAIA,IAAIwE,SAAS,GAAG,UAAU3T,KAAV,EAAiB;UAC/ByT,MAAM,CAACtE,WAAP,GAAqB,KAArB,CAD+B,CACH;UAC5B;;UAEA,IAAIyE,sBAAsB,GAAGrP,qBAAqB,CAACvE,KAAK,CAACwE,MAAP,EAAe,CAACiP,MAAM,CAACpI,SAAR,EAAmBoI,MAAM,CAAClD,SAA1B,CAAf,EAAqDkD,MAAM,CAAC3R,KAAP,CAAakN,WAAb,CAAyBtK,QAA9E,CAAlD;;UAEA,IAAI,CAACkP,sBAAD,IAA2BH,MAAM,CAAChR,QAAP,GAAkBtB,MAAjD,EAAyD;YACvDsS,MAAM,CAACrG,KAAP,CAAa;cACXxL,IAAI,EAAEkF;YADK,CAAb,EAEG,YAAY;cACb,OAAO2M,MAAM,CAAC3R,KAAP,CAAa+R,YAAb,CAA0BJ,MAAM,CAAChJ,kBAAP,EAA1B,CAAP;YACD,CAJD;UAKD;QACF,CAbD,CAVF,CAuBK;QACH;QACA;QACA;QACA;QACA;;;QAGA,IAAIqJ,YAAY,GAAG,YAAY;UAC7BL,MAAM,CAACM,WAAP,GAAqB,KAArB;QACD,CAFD;;QAIA,IAAIC,WAAW,GAAG,YAAY;UAC5BP,MAAM,CAACM,WAAP,GAAqB,IAArB;QACD,CAFD;;QAIA,IAAIE,UAAU,GAAG,UAAUjU,KAAV,EAAiB;UAChC,IAAI4T,sBAAsB,GAAGrP,qBAAqB,CAACvE,KAAK,CAACwE,MAAP,EAAe,CAACiP,MAAM,CAACpI,SAAR,EAAmBoI,MAAM,CAAClD,SAA1B,CAAf,EAAqDkD,MAAM,CAAC3R,KAAP,CAAakN,WAAb,CAAyBtK,QAA9E,EAAwF,KAAxF,CAAlD;;UAEA,IAAI,CAAC+O,MAAM,CAACM,WAAR,IAAuB,CAACH,sBAAxB,IAAkDH,MAAM,CAAChR,QAAP,GAAkBtB,MAAxE,EAAgF;YAC9EsS,MAAM,CAACrG,KAAP,CAAa;cACXxL,IAAI,EAAEiG;YADK,CAAb,EAEG,YAAY;cACb,OAAO4L,MAAM,CAAC3R,KAAP,CAAa+R,YAAb,CAA0BJ,MAAM,CAAChJ,kBAAP,EAA1B,CAAP;YACD,CAJD;UAKD;QACF,CAVD;;QAYA,IAAIuE,WAAW,GAAG,KAAKlN,KAAL,CAAWkN,WAA7B;QACAA,WAAW,CAACkF,gBAAZ,CAA6B,WAA7B,EAA0C7C,WAA1C;QACArC,WAAW,CAACkF,gBAAZ,CAA6B,SAA7B,EAAwCP,SAAxC;QACA3E,WAAW,CAACkF,gBAAZ,CAA6B,YAA7B,EAA2CJ,YAA3C;QACA9E,WAAW,CAACkF,gBAAZ,CAA6B,WAA7B,EAA0CF,WAA1C;QACAhF,WAAW,CAACkF,gBAAZ,CAA6B,UAA7B,EAAyCD,UAAzC;;QAEA,KAAKE,OAAL,GAAe,YAAY;UACzBV,MAAM,CAACR,qBAAP;;UAEAQ,MAAM,CAACzB,YAAP,CAAoB/S,MAApB;;UAEA+P,WAAW,CAACoF,mBAAZ,CAAgC,WAAhC,EAA6C/C,WAA7C;UACArC,WAAW,CAACoF,mBAAZ,CAAgC,SAAhC,EAA2CT,SAA3C;UACA3E,WAAW,CAACoF,mBAAZ,CAAgC,YAAhC,EAA8CN,YAA9C;UACA9E,WAAW,CAACoF,mBAAZ,CAAgC,WAAhC,EAA6CJ,WAA7C;UACAhF,WAAW,CAACoF,mBAAZ,CAAgC,UAAhC,EAA4CH,UAA5C;QACD,CAVD;MAWD;IACF,CAhFD;;IAkFAjB,MAAM,CAACqB,YAAP,GAAsB,SAASA,YAAT,CAAsBxR,SAAtB,EAAiCkC,SAAjC,EAA4C;MAChE,IAAIuP,MAAM,GAAG,KAAKxS,KAAL,CAAWuH,gBAAX,KAAgCrG,SAAhC,GAA4C,KAAKP,QAAL,EAA5C,GAA8D,KAAKX,KAAhF;MAAA,IACIyS,uBAAuB,GAAGD,MAAM,CAACjL,gBADrC;;MAGA,IAAImL,MAAM,GAAGzP,SAAS,CAACsE,gBAAV,KAA+BrG,SAA/B,GAA2CH,SAA3C,GAAuDkC,SAApE;MAAA,IACI0P,oBAAoB,GAAGD,MAAM,CAACnL,gBADlC;;MAGA,IAAIqL,cAAc,GAAGH,uBAAuB,IAAI,KAAK9R,QAAL,GAAgBtB,MAA3C,IAAqD,CAAC0B,SAAS,CAAC1B,MAArF;MACA,OAAOuT,cAAc,IAAIH,uBAAuB,KAAKE,oBAArD;IACD,CATD;;IAWAzB,MAAM,CAAC2B,kBAAP,GAA4B,SAASA,kBAAT,CAA4B5P,SAA5B,EAAuClC,SAAvC,EAAkD;MAC5E,IAAIoC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;QACzCL,2BAA2B,CAAC,KAAKxC,KAAN,EAAayC,SAAb,EAAwB,KAAKjD,KAA7B,CAA3B;QACA;;QAEA,IAAK,KAAK0O,YAAL,CAAkBzE,MAAlB,IAA4B,CAAC,KAAKyE,YAAL,CAAkB1E,gBAApD,EAAsE;UACpE4H,mCAAmC,CAAC,KAAKnD,SAAN,EAAiB,KAAKC,YAAtB,CAAnC;QACD;MACF;;MAED,IAAIzN,gBAAgB,CAAC,KAAKjB,KAAN,EAAa,cAAb,CAAhB,IAAgD,KAAKA,KAAL,CAAW8S,mBAAX,CAA+B7P,SAAS,CAAC2E,YAAzC,EAAuD,KAAK5H,KAAL,CAAW4H,YAAlE,CAApD,EAAqI;QACnI,KAAKF,gBAAL,CAAsB;UACpB5H,IAAI,EAAEgG,iCADc;UAEpB+B,UAAU,EAAE,KAAK7H,KAAL,CAAWiI,YAAX,CAAwB,KAAKjI,KAAL,CAAW4H,YAAnC;QAFQ,CAAtB;MAID;;MAED,IAAI,CAAC,KAAK+H,cAAN,IAAwB,KAAK4C,YAAL,CAAkBxR,SAAlB,EAA6BkC,SAA7B,CAA5B,EAAqE;QACnE,KAAKqO,6BAAL;MACD;MACD;;;MAGA,KAAKpB,YAAL;IACD,CAxBD;;IA0BAgB,MAAM,CAAC6B,oBAAP,GAA8B,SAASA,oBAAT,GAAgC;MAC5D,KAAKV,OAAL,GAD4D,CAC5C;IACjB,CAFD;;IAIAnB,MAAM,CAAC8B,MAAP,GAAgB,SAASA,MAAT,GAAkB;MAChC,IAAIC,QAAQ,GAAGzT,WAAW,CAAC,KAAKQ,KAAL,CAAWiT,QAAZ,EAAsBrX,IAAtB,CAA1B,CADgC,CACuB;MACvD;MACA;;MAEA,KAAKgU,UAAL,GALgC,CAKb;MACnB;MACA;MACA;;MAEA,KAAKpG,YAAL,CAAkBS,MAAlB,GAA2B,KAA3B;MACA,KAAKT,YAAL,CAAkBK,MAAlB,GAA2B3I,SAA3B;MACA,KAAKsI,YAAL,CAAkBQ,gBAAlB,GAAqC9I,SAArC,CAZgC,CAYgB;;MAEhD,KAAKwN,YAAL,CAAkBzE,MAAlB,GAA2B,KAA3B;MACA,KAAKyE,YAAL,CAAkB7E,MAAlB,GAA2B3I,SAA3B;MACA,KAAKwN,YAAL,CAAkB1E,gBAAlB,GAAqC9I,SAArC,CAhBgC,CAgBgB;;MAEhD,KAAKoM,aAAL,CAAmBrD,MAAnB,GAA4B,KAA5B,CAlBgC,CAkBG;;MAEnC,KAAKuD,aAAL,CAAmBvD,MAAnB,GAA4B,KAA5B;MACA,IAAIpK,OAAO,GAAGL,WAAW,CAACyT,QAAQ,CAAC,KAAKtK,kBAAL,EAAD,CAAT,CAAzB;;MAEA,IAAI,CAAC9I,OAAL,EAAc;QACZ,OAAO,IAAP;MACD;;MAED,IAAI,KAAK2J,YAAL,CAAkBS,MAAlB,IAA4B,KAAKjK,KAAL,CAAWgK,gBAA3C,EAA6D;QAC3D,IAAI7G,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IAAyC,CAAC,KAAKmG,YAAL,CAAkBQ,gBAA5D,IAAgF,CAAC,KAAKhK,KAAL,CAAWgK,gBAAhG,EAAkH;UAChHkJ,mCAAmC,CAACrT,OAAD,EAAU,KAAK2J,YAAf,CAAnC;QACD;;QAED,OAAO3J,OAAP;MACD,CAND,MAMO,IAAID,YAAY,CAACC,OAAD,CAAhB,EAA2B;QAChC;QACA;QACA,OAAO7E,YAAY,CAAC6E,OAAD,EAAU,KAAK2J,YAAL,CAAkBzJ,eAAe,CAACF,OAAD,CAAjC,CAAV,CAAnB;MACD;MACD;;;MAGA,IAAIsD,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;QACzC;QACA;QACA,MAAM,IAAI8P,KAAJ,CAAU,sFAAV,CAAN;MACD;MACD;;;MAGA,OAAOjS,SAAP;IACD,CAlDD;;IAoDA,OAAOiF,SAAP;EACD,CA3gCD,CA2gCElL,SA3gCF,CAFA;;EA+gCAkL,SAAS,CAACiN,YAAV,GAAyB;IACvB3L,uBAAuB,EAAE,IADF;IAEvBK,aAAa,EAAE,KAFQ;IAGvB3I,oBAAoB,EAAEA,oBAHC;IAIvB8I,YAAY,EAAE,SAASA,YAAT,CAAsBhB,CAAtB,EAAyB;MACrC,IAAIA,CAAC,IAAI,IAAT,EAAe;QACb,OAAO,EAAP;MACD;;MAED,IAAI9D,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IAAyC/B,aAAa,CAAC2F,CAAD,CAAtD,IAA6D,CAACA,CAAC,CAACzI,cAAF,CAAiB,UAAjB,CAAlE,EAAgG;QAC9F;QACA4B,OAAO,CAACiT,IAAR,CAAa,4MAAb,EAA2N,6BAA3N,EAA0PpM,CAA1P;MACD;;MAED,OAAOhI,MAAM,CAACgI,CAAD,CAAb;IACD,CAfsB;IAgBvBiC,aAAa,EAAEtN,IAhBQ;IAiBvB8M,kBAAkB,EAAE9M,IAjBG;IAkBvByN,YAAY,EAAEzN,IAlBS;IAmBvBwN,QAAQ,EAAExN,IAnBa;IAoBvBuN,QAAQ,EAAEvN,IApBa;IAqBvBmW,YAAY,EAAEnW,IArBS;IAsBvBkX,mBAAmB,EAAE,SAASA,mBAAT,CAA6BQ,QAA7B,EAAuCtL,IAAvC,EAA6C;MAChE,OAAOsL,QAAQ,KAAKtL,IAApB;IACD,CAxBsB;IAyBvBkF,WAAW,EAAE,OAAOqG,MAAP,KAAkB;IAC/B;IADa,EAEX,EAFW,GAENA,MA3BgB;IA4BvBzK,YAAY,EAAE,SAASA,YAAT,CAAsBtI,KAAtB,EAA6B6H,UAA7B,EAAyC;MACrD,OAAOA,UAAP;IACD,CA9BsB;IA+BvB2B,gBAAgB,EAAE,KA/BK;IAgCvBnO,cAAc,EAAEA;EAhCO,CAAzB;EAkCAsK,SAAS,CAACH,gBAAV,GAA6BA,gBAA7B;EACA,OAAOG,SAAP;AACD,CApjCD,EAFA;;AAwjCAhD,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC8C,SAAS,CAACqN,SAAV,GAAsB;EAC5DP,QAAQ,EAAElY,SAAS,CAAC0Y,IADwC;EAE5DhM,uBAAuB,EAAE1M,SAAS,CAAC2Y,MAFyB;EAG5D5L,aAAa,EAAE/M,SAAS,CAAC4Y,IAHmC;EAI5DrD,uBAAuB,EAAEvV,SAAS,CAAC2Y,MAJyB;EAK5D3C,mBAAmB,EAAEhW,SAAS,CAAC6Y,GAL6B;EAM5DhD,iBAAiB,EAAE7V,SAAS,CAAC8Y,MAN+B;EAO5DpD,aAAa,EAAE1V,SAAS,CAAC4Y,IAPmC;EAQ5DxU,oBAAoB,EAAEpE,SAAS,CAAC0Y,IAR4B;EAS5DxL,YAAY,EAAElN,SAAS,CAAC0Y,IAToC;EAU5DrK,QAAQ,EAAErO,SAAS,CAAC0Y,IAVwC;EAW5DtK,QAAQ,EAAEpO,SAAS,CAAC0Y,IAXwC;EAY5DvK,aAAa,EAAEnO,SAAS,CAAC0Y,IAZmC;EAa5D/K,kBAAkB,EAAE3N,SAAS,CAAC0Y,IAb8B;EAc5DpK,YAAY,EAAEtO,SAAS,CAAC0Y,IAdoC;EAe5D1B,YAAY,EAAEhX,SAAS,CAAC0Y,IAfoC;EAgB5DX,mBAAmB,EAAE/X,SAAS,CAAC0Y,IAhB6B;EAiB5D3K,YAAY,EAAE/N,SAAS,CAAC0Y,IAjBoC;EAkB5D3R,SAAS,EAAE/G,SAAS,CAAC2Y,MAlBuC;EAmB5DnN,EAAE,EAAExL,SAAS,CAAC8Y,MAnB8C;EAoB5D3G,WAAW,EAAEnS,SAAS,CAAC+Y,KAAV,CAAgB;IAC3B1B,gBAAgB,EAAErX,SAAS,CAAC0Y,IADD;IAE3BnB,mBAAmB,EAAEvX,SAAS,CAAC0Y,IAFJ;IAG3B7Q,QAAQ,EAAE7H,SAAS,CAAC+Y,KAAV,CAAgB;MACxB9P,cAAc,EAAEjJ,SAAS,CAAC0Y,IADF;MAExB1Q,aAAa,EAAEhI,SAAS,CAAC6Y,GAFD;MAGxB/O,IAAI,EAAE9J,SAAS,CAAC6Y;IAHQ,CAAhB;EAHiB,CAAhB,CApB+C;EA6B5D5J,gBAAgB,EAAEjP,SAAS,CAAC4Y,IA7BgC;EA8B5D9X,cAAc,EAAEd,SAAS,CAAC0Y,IA9BkC;EA+B5D;EACA;;EAEA;EACA7L,YAAY,EAAE7M,SAAS,CAAC6Y,GAnCoC;EAoC5DvU,MAAM,EAAEtE,SAAS,CAAC4Y,IApC0C;EAqC5D9L,UAAU,EAAE9M,SAAS,CAAC8Y,MArCsC;EAsC5DtM,gBAAgB,EAAExM,SAAS,CAAC2Y,MAtCgC;EAuC5DjN,OAAO,EAAE1L,SAAS,CAAC8Y,MAvCyC;EAwC5DnN,OAAO,EAAE3L,SAAS,CAAC8Y,MAxCyC;EAyC5DrN,MAAM,EAAEzL,SAAS,CAAC8Y,MAzC0C;EA0C5DlN,SAAS,EAAE5L,SAAS,CAAC0Y;EACrB;;AA3C4D,CAA9D,GA6CI,KAAK,CA7CT;;AA+CA,SAAS7B,mCAAT,CAA6C9V,IAA7C,EAAmDiY,MAAnD,EAA2D;EACzD,IAAIlK,MAAM,GAAGkK,MAAM,CAAClK,MAApB;;EAEA,IAAI,CAAC/N,IAAL,EAAW;IACT;IACAsE,OAAO,CAACC,KAAR,CAAc,+BAA+BwJ,MAA/B,GAAwC,sEAAtD;EACD;AACF;;AAED,SAASqJ,mCAAT,CAA6CrT,OAA7C,EAAsDmU,MAAtD,EAA8D;EAC5D,IAAInK,MAAM,GAAGmK,MAAM,CAACnK,MAApB;EACA,IAAIoK,eAAe,GAAGpK,MAAM,KAAK,KAAjC;EACA,IAAIqK,WAAW,GAAG,CAACtU,YAAY,CAACC,OAAD,CAA/B;;EAEA,IAAIqU,WAAW,IAAI,CAACD,eAAhB,IAAmC,CAAC1Y,YAAY,CAACsE,OAAD,CAApD,EAA+D;IAC7D;IACAO,OAAO,CAACC,KAAR,CAAc,sFAAd;EACD,CAHD,MAGO,IAAI,CAAC6T,WAAD,IAAgBD,eAApB,EAAqC;IAC1C;IACA7T,OAAO,CAACC,KAAR,CAAc,6GAA6GwJ,MAA7G,GAAsH,IAApI;EACD;;EAED,IAAI,CAACtO,YAAY,CAACsE,OAAD,CAAb,IAA0B,CAACE,eAAe,CAACF,OAAD,CAAf,CAAyBgK,MAAzB,CAA/B,EAAiE;IAC/D;IACAzJ,OAAO,CAACC,KAAR,CAAc,8CAA8CwJ,MAA9C,GAAuD,8CAArE;EACD;AACF;;AAED,IAAIsK,0BAA0B,GAAG;EAC/B5M,gBAAgB,EAAE,CAAC,CADY;EAE/BlI,MAAM,EAAE,KAFuB;EAG/BuI,YAAY,EAAE,IAHiB;EAI/BC,UAAU,EAAE;AAJmB,CAAjC;;AAOA,SAASuM,iBAAT,CAA2BC,MAA3B,EAAmC7T,KAAnC,EAA0C8T,QAA1C,EAAoD;EAClD,IAAItU,KAAK,GAAGqU,MAAM,CAACrU,KAAnB;EAAA,IACIF,IAAI,GAAGuU,MAAM,CAACvU,IADlB;EAEA,IAAIyU,OAAO,GAAG,EAAd;EACA3T,MAAM,CAACC,IAAP,CAAYL,KAAZ,EAAmBpE,OAAnB,CAA2B,UAAU4E,GAAV,EAAe;IACxCwT,qBAAqB,CAACxT,GAAD,EAAMhB,KAAN,EAAaQ,KAAb,EAAoB8T,QAApB,CAArB;;IAEA,IAAIA,QAAQ,CAACtT,GAAD,CAAR,KAAkBR,KAAK,CAACQ,GAAD,CAA3B,EAAkC;MAChCuT,OAAO,CAACvT,GAAD,CAAP,GAAesT,QAAQ,CAACtT,GAAD,CAAvB;IACD;EACF,CAND;;EAQA,IAAIhB,KAAK,CAACkJ,aAAN,IAAuBtI,MAAM,CAACC,IAAP,CAAY0T,OAAZ,EAAqB/W,MAAhD,EAAwD;IACtDwC,KAAK,CAACkJ,aAAN,CAAoBtO,QAAQ,CAAC;MAC3BkF,IAAI,EAAEA;IADqB,CAAD,EAEzByU,OAFyB,CAA5B;EAGD;AACF;;AAED,SAASC,qBAAT,CAA+BxT,GAA/B,EAAoChB,KAApC,EAA2CQ,KAA3C,EAAkD8T,QAAlD,EAA4D;EAC1D,IAAIG,OAAO,GAAG,OAAOC,gBAAgB,CAAC1T,GAAD,CAAvB,GAA+B,QAA7C;;EAEA,IAAIhB,KAAK,CAACyU,OAAD,CAAL,IAAkBH,QAAQ,CAACtT,GAAD,CAAR,KAAkBE,SAApC,IAAiDoT,QAAQ,CAACtT,GAAD,CAAR,KAAkBR,KAAK,CAACQ,GAAD,CAA5E,EAAmF;IACjFhB,KAAK,CAACyU,OAAD,CAAL,CAAeH,QAAf;EACD;AACF;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASxL,YAAT,CAAsB6L,CAAtB,EAAyBC,CAAzB,EAA4B;EAC1B,OAAOA,CAAC,CAACL,OAAT;AACD;AACD;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASM,uBAAT,CAAiCC,mBAAjC,EAAsD;EACpD,IAAIlN,YAAY,GAAGkN,mBAAmB,CAAClN,YAAvC;EAAA,IACImN,iBAAiB,GAAGD,mBAAmB,CAAC7M,YAD5C;EAEA,OAAOL,YAAY,GAAGmN,iBAAiB,CAACnN,YAAD,CAAjB,GAAkC,qBAArC,GAA6D,EAAhF;AACD;AACD;AACA;AACA;;;AAGA,IAAIoN,gBAAgB,GAAGjY,QAAQ,CAAC,UAAUkY,cAAV,EAA0BrS,QAA1B,EAAoC;EAClEe,SAAS,CAACsR,cAAc,EAAf,EAAmBrS,QAAnB,CAAT;AACD,CAF8B,EAE5B,GAF4B,CAA/B;;AAGA,SAASsS,aAAT,CAAuB7Y,IAAvB,EAA6B;EAC3B,IAAIkK,EAAE,GAAGlK,IAAI,CAACkK,EAAd;EAAA,IACIE,OAAO,GAAGpK,IAAI,CAACoK,OADnB;EAAA,IAEID,MAAM,GAAGnK,IAAI,CAACmK,MAFlB;EAAA,IAGIG,SAAS,GAAGtK,IAAI,CAACsK,SAHrB;EAAA,IAIIwO,cAAc,GAAG9Y,IAAI,CAAC8Y,cAJ1B;EAKA,IAAIC,QAAQ,GAAG7O,EAAE,KAAKrF,SAAP,GAAmB,eAAelC,UAAU,EAA5C,GAAiDuH,EAAhE;EACA,OAAO;IACLE,OAAO,EAAEA,OAAO,IAAI2O,QAAQ,GAAG,QAD1B;IAEL5O,MAAM,EAAEA,MAAM,IAAI4O,QAAQ,GAAG,OAFxB;IAGLzO,SAAS,EAAEA,SAAS,IAAI,UAAUpE,KAAV,EAAiB;MACvC,OAAO6S,QAAQ,GAAG,QAAX,GAAsB7S,KAA7B;IACD,CALI;IAML4S,cAAc,EAAEA,cAAc,IAAIC,QAAQ,GAAG;EANxC,CAAP;AAQD;;AACD,SAASC,YAAT,CAAsB9S,KAAtB,EAA6ByF,IAA7B,EAAmCnB,KAAnC,EAA0C;EACxC,IAAItE,KAAK,KAAKrB,SAAd,EAAyB;IACvB,OAAOqB,KAAP;EACD;;EAED,IAAIsE,KAAK,CAACrJ,MAAN,KAAiB,CAArB,EAAwB;IACtB,OAAO,CAAC,CAAR;EACD;;EAED,OAAOqJ,KAAK,CAACxF,OAAN,CAAc2G,IAAd,CAAP;AACD;;AAED,SAASC,YAAT,CAAsBD,IAAtB,EAA4B;EAC1B,OAAOA,IAAI,GAAG/I,MAAM,CAAC+I,IAAD,CAAT,GAAkB,EAA7B;AACD;;AAED,SAASsN,qBAAT,CAA+BC,MAA/B,EAAuC/B,SAAvC,EAAkD;EAChD;EACA,OAAO,UAAUgC,OAAV,EAAmB;IACxB,IAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;MACtBA,OAAO,GAAG,EAAV;IACD;;IAED5U,MAAM,CAACC,IAAP,CAAY2S,SAAZ,EAAuBpX,OAAvB,CAA+B,UAAU4E,GAAV,EAAe;MAC5CjG,SAAS,CAAC0a,cAAV,CAAyBjC,SAAzB,EAAoCgC,OAApC,EAA6CxU,GAA7C,EAAkDuU,MAAM,CAACG,IAAzD;IACD,CAFD;EAGD,CARD;AASD;;AACD,SAASC,sBAAT,CAAgC3U,GAAhC,EAAqC;EACnC,OAAO,UAAU4U,IAAV,CAAe5U,GAAf,CAAP;AACD;;AACD,SAAS0T,gBAAT,CAA0Bb,MAA1B,EAAkC;EAChC,OAAO,KAAKA,MAAM,CAACgC,KAAP,CAAa,CAAb,EAAgB,CAAhB,EAAmBC,WAAnB,EAAL,GAAwCjC,MAAM,CAACgC,KAAP,CAAa,CAAb,CAA/C;AACD;;AACD,SAASE,YAAT,CAAsBC,GAAtB,EAA2B;EACzB,IAAIlX,GAAG,GAAG5D,MAAM,CAAC8a,GAAD,CAAhB,CADyB,CACF;EACvB;EACA;EACA;EACA;;EAEAlX,GAAG,CAACC,OAAJ,GAAciX,GAAd;EACA,OAAOlX,GAAP;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAASmX,kBAAT,CAA4BC,OAA5B,EAAqCC,YAArC,EAAmDnW,KAAnD,EAA0D;EACxD,IAAIoW,YAAY,GAAGlb,MAAM,EAAzB;EACA,IAAImb,SAAS,GAAGnb,MAAM,EAAtB;EACA,IAAIob,eAAe,GAAGlb,WAAW,CAAC,UAAUoF,KAAV,EAAiB6T,MAAjB,EAAyB;IACzDgC,SAAS,CAACtX,OAAV,GAAoBsV,MAApB;IACA7T,KAAK,GAAGG,QAAQ,CAACH,KAAD,EAAQ6T,MAAM,CAACrU,KAAf,CAAhB;IACA,IAAIuU,OAAO,GAAG2B,OAAO,CAAC1V,KAAD,EAAQ6T,MAAR,CAArB;IACA,IAAIC,QAAQ,GAAGD,MAAM,CAACrU,KAAP,CAAa8I,YAAb,CAA0BtI,KAA1B,EAAiC5F,QAAQ,CAAC,EAAD,EAAKyZ,MAAL,EAAa;MACnEE,OAAO,EAAEA;IAD0D,CAAb,CAAzC,CAAf;IAGA,OAAOD,QAAP;EACD,CARgC,EAQ9B,CAAC4B,OAAD,CAR8B,CAAjC;;EAUA,IAAIK,WAAW,GAAGlb,UAAU,CAACib,eAAD,EAAkBH,YAAlB,CAA5B;EAAA,IACI3V,KAAK,GAAG+V,WAAW,CAAC,CAAD,CADvB;EAAA,IAEIC,QAAQ,GAAGD,WAAW,CAAC,CAAD,CAF1B;;EAIA,IAAIE,QAAQ,GAAGV,YAAY,CAAC/V,KAAD,CAA3B;EACA,IAAI0W,iBAAiB,GAAGtb,WAAW,CAAC,UAAUiZ,MAAV,EAAkB;IACpD,OAAOmC,QAAQ,CAAC5b,QAAQ,CAAC;MACvBoF,KAAK,EAAEyW,QAAQ,CAAC1X;IADO,CAAD,EAErBsV,MAFqB,CAAT,CAAf;EAGD,CAJkC,EAIhC,CAACoC,QAAD,CAJgC,CAAnC;EAKA,IAAIpC,MAAM,GAAGgC,SAAS,CAACtX,OAAvB;EACA5D,SAAS,CAAC,YAAY;IACpB,IAAIkZ,MAAM,IAAI+B,YAAY,CAACrX,OAAvB,IAAkCqX,YAAY,CAACrX,OAAb,KAAyByB,KAA/D,EAAsE;MACpE4T,iBAAiB,CAACC,MAAD,EAAS1T,QAAQ,CAACyV,YAAY,CAACrX,OAAd,EAAuBsV,MAAM,CAACrU,KAA9B,CAAjB,EAAuDQ,KAAvD,CAAjB;IACD;;IAED4V,YAAY,CAACrX,OAAb,GAAuByB,KAAvB;EACD,CANQ,EAMN,CAACA,KAAD,EAAQR,KAAR,EAAeqU,MAAf,CANM,CAAT;EAOA,OAAO,CAAC7T,KAAD,EAAQkW,iBAAR,CAAP;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAASC,oBAAT,CAA8BT,OAA9B,EAAuCC,YAAvC,EAAqDnW,KAArD,EAA4D;EAC1D,IAAI4W,mBAAmB,GAAGX,kBAAkB,CAACC,OAAD,EAAUC,YAAV,EAAwBnW,KAAxB,CAA5C;EAAA,IACIQ,KAAK,GAAGoW,mBAAmB,CAAC,CAAD,CAD/B;EAAA,IAEIJ,QAAQ,GAAGI,mBAAmB,CAAC,CAAD,CAFlC;;EAIA,OAAO,CAACjW,QAAQ,CAACH,KAAD,EAAQR,KAAR,CAAT,EAAyBwW,QAAzB,CAAP;AACD;;AACD,IAAIpD,YAAY,GAAG;EACjBnL,YAAY,EAAEA,YADG;EAEjBa,YAAY,EAAEA,YAFG;EAGjB+L,uBAAuB,EAAEA,uBAHR;EAIjBhZ,cAAc,EAAEA,cAJC;EAKjBgb,kBAAkB,EAAE,KALH;EAMjB3J,WAAW,EAAE,OAAOqG,MAAP,KAAkB;EAC/B;EADa,EAEX,EAFW,GAENA;AARU,CAAnB;;AAUA,SAASuD,eAAT,CAAyB9W,KAAzB,EAAgCuD,OAAhC,EAAyCwT,kBAAzC,EAA6D;EAC3D,IAAIA,kBAAkB,KAAK,KAAK,CAAhC,EAAmC;IACjCA,kBAAkB,GAAG5C,0BAArB;EACD;;EAED,IAAI6C,cAAc,GAAG,YAAYtC,gBAAgB,CAACnR,OAAD,CAAjD;;EAEA,IAAIyT,cAAc,IAAIhX,KAAtB,EAA6B;IAC3B,OAAOA,KAAK,CAACgX,cAAD,CAAZ;EACD;;EAED,OAAOD,kBAAkB,CAACxT,OAAD,CAAzB;AACD;;AACD,SAAS0T,eAAT,CAAyBjX,KAAzB,EAAgCuD,OAAhC,EAAyCwT,kBAAzC,EAA6D;EAC3D,IAAIA,kBAAkB,KAAK,KAAK,CAAhC,EAAmC;IACjCA,kBAAkB,GAAG5C,0BAArB;EACD;;EAED,IAAI5Q,OAAO,IAAIvD,KAAf,EAAsB;IACpB,OAAOA,KAAK,CAACuD,OAAD,CAAZ;EACD;;EAED,IAAI2T,cAAc,GAAG,YAAYxC,gBAAgB,CAACnR,OAAD,CAAjD;;EAEA,IAAI2T,cAAc,IAAIlX,KAAtB,EAA6B;IAC3B,OAAOA,KAAK,CAACkX,cAAD,CAAZ;EACD;;EAED,OAAOJ,eAAe,CAAC9W,KAAD,EAAQuD,OAAR,EAAiBwT,kBAAjB,CAAtB;AACD;;AACD,SAASI,eAAT,CAAyBnX,KAAzB,EAAgC;EAC9B,IAAI4H,YAAY,GAAGqP,eAAe,CAACjX,KAAD,EAAQ,cAAR,CAAlC;EACA,IAAIX,MAAM,GAAG4X,eAAe,CAACjX,KAAD,EAAQ,QAAR,CAA5B;EACA,IAAIuH,gBAAgB,GAAG0P,eAAe,CAACjX,KAAD,EAAQ,kBAAR,CAAtC;EACA,IAAI6H,UAAU,GAAGoP,eAAe,CAACjX,KAAD,EAAQ,YAAR,CAAhC;EACA,OAAO;IACLuH,gBAAgB,EAAEA,gBAAgB,GAAG,CAAnB,IAAwBK,YAAxB,IAAwCvI,MAAxC,GAAiDW,KAAK,CAAC6G,KAAN,CAAYxF,OAAZ,CAAoBuG,YAApB,CAAjD,GAAqFL,gBADlG;IAELlI,MAAM,EAAEA,MAFH;IAGLuI,YAAY,EAAEA,YAHT;IAILC,UAAU,EAAEA;EAJP,CAAP;AAMD;;AACD,SAASuP,yBAAT,CAAmCpX,KAAnC,EAA0CQ,KAA1C,EAAiD6W,MAAjD,EAAyDtV,oBAAzD,EAA+E;EAC7E,IAAI8E,KAAK,GAAG7G,KAAK,CAAC6G,KAAlB;EAAA,IACIyJ,uBAAuB,GAAGtQ,KAAK,CAACsQ,uBADpC;EAAA,IAEI7I,uBAAuB,GAAGzH,KAAK,CAACyH,uBAFpC;EAGA,IAAIG,YAAY,GAAGpH,KAAK,CAACoH,YAAzB;EAAA,IACIL,gBAAgB,GAAG/G,KAAK,CAAC+G,gBAD7B;;EAGA,IAAIV,KAAK,CAACrJ,MAAN,KAAiB,CAArB,EAAwB;IACtB,OAAO,CAAC,CAAR;EACD,CAT4E,CAS3E;;;EAGF,IAAI8S,uBAAuB,KAAKpP,SAA5B,IAAyCqG,gBAAgB,KAAK+I,uBAAlE,EAA2F;IACzF,OAAOA,uBAAP;EACD;;EAED,IAAI7I,uBAAuB,KAAKvG,SAAhC,EAA2C;IACzC,OAAOuG,uBAAP;EACD;;EAED,IAAIG,YAAJ,EAAkB;IAChB,IAAIyP,MAAM,KAAK,CAAf,EAAkB;MAChB,OAAOxQ,KAAK,CAACxF,OAAN,CAAcuG,YAAd,CAAP;IACD;;IAED,OAAOjG,oBAAoB,CAAC0V,MAAD,EAASxQ,KAAK,CAACxF,OAAN,CAAcuG,YAAd,CAAT,EAAsCf,KAAK,CAACrJ,MAA5C,EAAoDuE,oBAApD,EAA0E,KAA1E,CAA3B;EACD;;EAED,IAAIsV,MAAM,KAAK,CAAf,EAAkB;IAChB,OAAO,CAAC,CAAR;EACD;;EAED,OAAOA,MAAM,GAAG,CAAT,GAAaxQ,KAAK,CAACrJ,MAAN,GAAe,CAA5B,GAAgC,CAAvC;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAAS8Z,uBAAT,CAAiCjY,MAAjC,EAAyCkY,oBAAzC,EAA+DrK,WAA/D,EAA4EsK,UAA5E,EAAwF;EACtF,IAAIC,wBAAwB,GAAGvc,MAAM,CAAC;IACpCmS,WAAW,EAAE,KADuB;IAEpC4E,WAAW,EAAE;EAFuB,CAAD,CAArC;EAIA9W,SAAS,CAAC,YAAY;IACpB;IACA;IACA,IAAIoU,WAAW,GAAG,YAAY;MAC5BkI,wBAAwB,CAAC1Y,OAAzB,CAAiCsO,WAAjC,GAA+C,IAA/C;IACD,CAFD;;IAIA,IAAIwE,SAAS,GAAG,UAAU3T,KAAV,EAAiB;MAC/BuZ,wBAAwB,CAAC1Y,OAAzB,CAAiCsO,WAAjC,GAA+C,KAA/C;;MAEA,IAAIhO,MAAM,IAAI,CAACoD,qBAAqB,CAACvE,KAAK,CAACwE,MAAP,EAAe6U,oBAAoB,CAACG,GAArB,CAAyB,UAAU5Y,GAAV,EAAe;QACzF,OAAOA,GAAG,CAACC,OAAX;MACD,CAFkD,CAAf,EAEhCmO,WAAW,CAACtK,QAFoB,CAApC,EAE2B;QACzB4U,UAAU;MACX;IACF,CARD;;IAUA,IAAIxF,YAAY,GAAG,YAAY;MAC7ByF,wBAAwB,CAAC1Y,OAAzB,CAAiCkT,WAAjC,GAA+C,KAA/C;IACD,CAFD;;IAIA,IAAIC,WAAW,GAAG,YAAY;MAC5BuF,wBAAwB,CAAC1Y,OAAzB,CAAiCkT,WAAjC,GAA+C,IAA/C;IACD,CAFD;;IAIA,IAAIE,UAAU,GAAG,UAAUjU,KAAV,EAAiB;MAChC,IAAImB,MAAM,IAAI,CAACoY,wBAAwB,CAAC1Y,OAAzB,CAAiCkT,WAA5C,IAA2D,CAACxP,qBAAqB,CAACvE,KAAK,CAACwE,MAAP,EAAe6U,oBAAoB,CAACG,GAArB,CAAyB,UAAU5Y,GAAV,EAAe;QAC1I,OAAOA,GAAG,CAACC,OAAX;MACD,CAFmG,CAAf,EAEjFmO,WAAW,CAACtK,QAFqE,EAE3D,KAF2D,CAArF,EAEkC;QAChC4U,UAAU;MACX;IACF,CAND;;IAQAtK,WAAW,CAACkF,gBAAZ,CAA6B,WAA7B,EAA0C7C,WAA1C;IACArC,WAAW,CAACkF,gBAAZ,CAA6B,SAA7B,EAAwCP,SAAxC;IACA3E,WAAW,CAACkF,gBAAZ,CAA6B,YAA7B,EAA2CJ,YAA3C;IACA9E,WAAW,CAACkF,gBAAZ,CAA6B,WAA7B,EAA0CF,WAA1C;IACAhF,WAAW,CAACkF,gBAAZ,CAA6B,UAA7B,EAAyCD,UAAzC;IACA,OAAO,YAAY;MACjBjF,WAAW,CAACoF,mBAAZ,CAAgC,WAAhC,EAA6C/C,WAA7C;MACArC,WAAW,CAACoF,mBAAZ,CAAgC,SAAhC,EAA2CT,SAA3C;MACA3E,WAAW,CAACoF,mBAAZ,CAAgC,YAAhC,EAA8CN,YAA9C;MACA9E,WAAW,CAACoF,mBAAZ,CAAgC,WAAhC,EAA6CJ,WAA7C;MACAhF,WAAW,CAACoF,mBAAZ,CAAgC,UAAhC,EAA4CH,UAA5C;IACD,CAND,CAtCoB,CA4CjB;EACJ,CA7CQ,EA6CN,CAAC9S,MAAD,EAAS6N,WAAT,CA7CM,CAAT;EA8CA,OAAOuK,wBAAP;AACD;AACD;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAASE,2BAAT,GAAuC;EACrC,IAAIC,eAAe,GAAGzU,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA/C;EACA,IAAIwU,iBAAiB,GAAG3c,MAAM,CAAC,IAAD,CAA9B;;EAEA,KAAK,IAAIoC,IAAI,GAAGC,SAAS,CAACC,MAArB,EAA6Bsa,QAAQ,GAAG,IAAIpa,KAAJ,CAAUJ,IAAV,CAAxC,EAAyDK,IAAI,GAAG,CAArE,EAAwEA,IAAI,GAAGL,IAA/E,EAAqFK,IAAI,EAAzF,EAA6F;IAC3Fma,QAAQ,CAACna,IAAD,CAAR,GAAiBJ,SAAS,CAACI,IAAD,CAA1B;EACD;;EAED,IAAIoa,oBAAoB,GAAG7c,MAAM,CAAC4c,QAAQ,CAAChX,MAAT,CAAgB,UAAUkX,GAAV,EAAezU,OAAf,EAAwB;IACxEyU,GAAG,CAACzU,OAAD,CAAH,GAAe,EAAf;IACA,OAAOyU,GAAP;EACD,CAHiC,EAG/B,EAH+B,CAAD,CAAjC;EAIA7c,SAAS,CAAC,YAAY;IACpB,IAAI,CAACyc,eAAL,EAAsB;MACpB;IACD;;IAEDhX,MAAM,CAACC,IAAP,CAAYkX,oBAAoB,CAAChZ,OAAjC,EAA0C3C,OAA1C,CAAkD,UAAUmH,OAAV,EAAmB;MACnE,IAAI0U,YAAY,GAAGF,oBAAoB,CAAChZ,OAArB,CAA6BwE,OAA7B,CAAnB;;MAEA,IAAIsU,iBAAiB,CAAC9Y,OAAtB,EAA+B;QAC7B,IAAI,CAAC6B,MAAM,CAACC,IAAP,CAAYoX,YAAZ,EAA0Bza,MAA/B,EAAuC;UACrC;UACA4C,OAAO,CAACC,KAAR,CAAc,uCAAuCkD,OAAvC,GAAiD,+CAA/D;UACA;QACD;MACF;;MAED,IAAIyG,gBAAgB,GAAGiO,YAAY,CAACjO,gBAApC;MAAA,IACIH,MAAM,GAAGoO,YAAY,CAACpO,MAD1B;MAAA,IAEIqO,UAAU,GAAGD,YAAY,CAACC,UAF9B;;MAIA,IAAI,CAAC,CAACA,UAAD,IAAe,CAACA,UAAU,CAACnZ,OAA5B,KAAwC,CAACiL,gBAA7C,EAA+D;QAC7D;QACA5J,OAAO,CAACC,KAAR,CAAc,+BAA+BwJ,MAA/B,GAAwC,UAAxC,GAAqDtG,OAArD,GAA+D,6CAA7E;MACD;IACF,CAnBD;IAoBAsU,iBAAiB,CAAC9Y,OAAlB,GAA4B,KAA5B;EACD,CA1BQ,CAAT;EA2BA,IAAIoZ,qBAAqB,GAAG/c,WAAW,CAAC,UAAUmI,OAAV,EAAmByG,gBAAnB,EAAqCH,MAArC,EAA6CqO,UAA7C,EAAyD;IAC/F,IAAI/U,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;MACzC0U,oBAAoB,CAAChZ,OAArB,CAA6BwE,OAA7B,IAAwC;QACtCyG,gBAAgB,EAAEA,gBADoB;QAEtCH,MAAM,EAAEA,MAF8B;QAGtCqO,UAAU,EAAEA;MAH0B,CAAxC;IAKD;EACF,CARsC,EAQpC,EARoC,CAAvC;EASA,OAAOC,qBAAP;AACD;;AAED,SAASC,0BAAT,CAAoCC,SAApC,EAA+C9Q,gBAA/C,EAAiEV,KAAjE,EAAwEyR,iBAAxE,EAA2FvW,oBAA3F,EAAiH;EAC/G,IAAIwW,qBAAqB,GAAG1R,KAAK,CAAC6Q,GAAN,CAAU,UAAU1P,IAAV,EAAgB;IACpD,OAAOsQ,iBAAiB,CAACtQ,IAAD,CAAjB,CAAwBwQ,WAAxB,EAAP;EACD,CAF2B,CAA5B;EAGA,IAAIC,mBAAmB,GAAGJ,SAAS,CAACG,WAAV,EAA1B;;EAEA,IAAIE,OAAO,GAAG,UAAUC,UAAV,EAAsBpW,KAAtB,EAA6B;IACzC,IAAI1C,OAAO,GAAGkC,oBAAoB,CAACQ,KAAD,CAAlC;IACA,OAAOoW,UAAU,CAACC,UAAX,CAAsBH,mBAAtB,KAA8C,EAAE5Y,OAAO,IAAIA,OAAO,CAACyC,YAAR,CAAqB,UAArB,CAAb,CAArD;EACD,CAHD;;EAKA,KAAK,IAAIC,KAAK,GAAGgF,gBAAgB,GAAG,CAApC,EAAuChF,KAAK,GAAGgW,qBAAqB,CAAC/a,MAArE,EAA6E+E,KAAK,EAAlF,EAAsF;IACpF,IAAIoW,UAAU,GAAGJ,qBAAqB,CAAChW,KAAD,CAAtC;;IAEA,IAAImW,OAAO,CAACC,UAAD,EAAapW,KAAb,CAAX,EAAgC;MAC9B,OAAOA,KAAP;IACD;EACF;;EAED,KAAK,IAAIC,MAAM,GAAG,CAAlB,EAAqBA,MAAM,GAAG+E,gBAA9B,EAAgD/E,MAAM,EAAtD,EAA0D;IACxD,IAAIqW,WAAW,GAAGN,qBAAqB,CAAC/V,MAAD,CAAvC;;IAEA,IAAIkW,OAAO,CAACG,WAAD,EAAcrW,MAAd,CAAX,EAAkC;MAChC,OAAOA,MAAP;IACD;EACF;;EAED,OAAO+E,gBAAP;AACD;;AAED,IAAIiM,SAAS,GAAG;EACd3M,KAAK,EAAE9L,SAAS,CAAC+d,KAAV,CAAgBC,UADT;EAEd9Q,YAAY,EAAElN,SAAS,CAAC0Y,IAFV;EAGdtU,oBAAoB,EAAEpE,SAAS,CAAC0Y,IAHlB;EAIdoB,uBAAuB,EAAE9Z,SAAS,CAAC0Y,IAJrB;EAKdoD,kBAAkB,EAAE9b,SAAS,CAAC4Y,IALhB;EAMdpM,gBAAgB,EAAExM,SAAS,CAAC2Y,MANd;EAOdjM,uBAAuB,EAAE1M,SAAS,CAAC2Y,MAPrB;EAQdpD,uBAAuB,EAAEvV,SAAS,CAAC2Y,MARrB;EASdrU,MAAM,EAAEtE,SAAS,CAAC4Y,IATJ;EAUd7L,aAAa,EAAE/M,SAAS,CAAC4Y,IAVX;EAWdlD,aAAa,EAAE1V,SAAS,CAAC4Y,IAXX;EAYd/L,YAAY,EAAE7M,SAAS,CAAC6Y,GAZV;EAad7C,mBAAmB,EAAEhW,SAAS,CAAC6Y,GAbjB;EAcdoF,mBAAmB,EAAEje,SAAS,CAAC6Y,GAdjB;EAedrN,EAAE,EAAExL,SAAS,CAAC8Y,MAfA;EAgBdpN,OAAO,EAAE1L,SAAS,CAAC8Y,MAhBL;EAiBdrN,MAAM,EAAEzL,SAAS,CAAC8Y,MAjBJ;EAkBdlN,SAAS,EAAE5L,SAAS,CAAC0Y,IAlBP;EAmBd0B,cAAc,EAAEpa,SAAS,CAAC8Y,MAnBZ;EAoBd/K,YAAY,EAAE/N,SAAS,CAAC0Y,IApBV;EAqBdwF,oBAAoB,EAAEle,SAAS,CAAC0Y,IArBlB;EAsBdyF,wBAAwB,EAAEne,SAAS,CAAC0Y,IAtBtB;EAuBdvK,aAAa,EAAEnO,SAAS,CAAC0Y,IAvBX;EAwBd0F,cAAc,EAAEpe,SAAS,CAAC0Y,IAxBZ;EAyBdvG,WAAW,EAAEnS,SAAS,CAAC+Y,KAAV,CAAgB;IAC3B1B,gBAAgB,EAAErX,SAAS,CAAC0Y,IADD;IAE3BnB,mBAAmB,EAAEvX,SAAS,CAAC0Y,IAFJ;IAG3B7Q,QAAQ,EAAE7H,SAAS,CAAC+Y,KAAV,CAAgB;MACxB9P,cAAc,EAAEjJ,SAAS,CAAC0Y,IADF;MAExB1Q,aAAa,EAAEhI,SAAS,CAAC6Y,GAFD;MAGxB/O,IAAI,EAAE9J,SAAS,CAAC6Y;IAHQ,CAAhB;EAHiB,CAAhB;AAzBC,CAAhB;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASwF,sBAAT,CAAgC/c,IAAhC,EAAsC;EACpC,IAAIgD,MAAM,GAAGhD,IAAI,CAACgD,MAAlB;EAAA,IACIC,WAAW,GAAGjD,IAAI,CAACiD,WADvB;EAAA,IAEIC,mBAAmB,GAAGlD,IAAI,CAACkD,mBAF/B;;EAIA,IAAI,CAACF,MAAL,EAAa;IACX,OAAO,EAAP;EACD;;EAED,IAAI,CAACC,WAAL,EAAkB;IAChB,OAAO,2BAAP;EACD;;EAED,IAAIA,WAAW,KAAKC,mBAApB,EAAyC;IACvC,OAAOD,WAAW,GAAG,SAAd,IAA2BA,WAAW,KAAK,CAAhB,GAAoB,KAApB,GAA4B,OAAvD,IAAkE,8FAAzE;EACD;;EAED,OAAO,EAAP;AACD;;AAED,IAAI+Z,cAAc,GAAGze,QAAQ,CAAC,EAAD,EAAKwY,YAAL,EAAmB;EAC9CjU,oBAAoB,EAAEia;AADwB,CAAnB,CAA7B;;AAIA,IAAIE,oBAAoB,GAAGnW,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,6BAAxC,GAAwE,CAAnG;AACA,IAAIkW,kBAAkB,GAAGpW,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,2BAAxC,GAAsE,CAA/F;AACA,IAAImW,iBAAiB,GAAGrW,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,yBAAxC,GAAoE,CAA5F;AACA,IAAIoW,eAAe,GAAGtW,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,uBAAxC,GAAkE,CAAxF;AACA,IAAIqW,cAAc,GAAGvW,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,sBAAxC,GAAiE,CAAtF;AACA,IAAIsW,gBAAgB,GAAGxW,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,wBAAxC,GAAmE,CAA1F;AACA,IAAIuW,sBAAsB,GAAGzW,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,+BAAxC,GAA0E,CAAvG;AACA,IAAIwW,oBAAoB,GAAG1W,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,4BAAxC,GAAuE,CAAlG;AACA,IAAIyW,QAAQ,GAAG3W,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,eAAxC,GAA0D,CAAzE;AACA,IAAI0W,cAAc,GAAG5W,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,sBAAxC,GAAiE,CAAtF;AACA,IAAI2W,aAAa,GAAG7W,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,qBAAxC,GAAgE,EAApF;AACA,IAAI4W,SAAS,GAAG9W,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,gBAAxC,GAA2D,EAA3E;AACA,IAAI6W,iBAAiB,GAAG/W,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,wBAAxC,GAAmE,EAA3F;AACA,IAAI8W,4BAA4B,GAAGhX,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,qCAAxC,GAAgF,EAAnH;AACA,IAAI+W,0BAA0B,GAAGjX,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,mCAAxC,GAA8E,EAA/G;AACA,IAAIgX,4BAA4B,GAAGlX,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,oCAAxC,GAA+E,EAAlH;AACA,IAAIiX,kBAAkB,GAAGnX,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,0BAAxC,GAAqE,EAA9F;AACA,IAAIkX,gBAAgB,GAAGpX,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,wBAAxC,GAAmE,EAA1F;AACA,IAAImX,iBAAiB,GAAGrX,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,yBAAxC,GAAoE,EAA5F;AACA,IAAIoX,2BAA2B,GAAGtX,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,oCAAxC,GAA+E,EAAjH;AACA,IAAIqX,kBAAkB,GAAGvX,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,0BAAxC,GAAqE,EAA9F;AACA,IAAIsX,qBAAqB,GAAGxX,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,8BAAxC,GAAyE,EAArG;AACA,IAAIuX,aAAa,GAAGzX,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,oBAAxC,GAA+D,EAAnF;AAEA,IAAIwX,kBAAkB,GAAG,aAAaja,MAAM,CAACqF,MAAP,CAAc;EAClDC,SAAS,EAAE,IADuC;EAElDoT,oBAAoB,EAAEA,oBAF4B;EAGlDC,kBAAkB,EAAEA,kBAH8B;EAIlDC,iBAAiB,EAAEA,iBAJ+B;EAKlDC,eAAe,EAAEA,eALiC;EAMlDC,cAAc,EAAEA,cANkC;EAOlDC,gBAAgB,EAAEA,gBAPgC;EAQlDC,sBAAsB,EAAEA,sBAR0B;EASlDC,oBAAoB,EAAEA,oBAT4B;EAUlDC,QAAQ,EAAEA,QAVwC;EAWlDC,cAAc,EAAEA,cAXkC;EAYlDC,aAAa,EAAEA,aAZmC;EAalDC,SAAS,EAAEA,SAbuC;EAclDC,iBAAiB,EAAEA,iBAd+B;EAelDC,4BAA4B,EAAEA,4BAfoB;EAgBlDC,0BAA0B,EAAEA,0BAhBsB;EAiBlDC,4BAA4B,EAAEA,4BAjBoB;EAkBlDC,kBAAkB,EAAEA,kBAlB8B;EAmBlDC,gBAAgB,EAAEA,gBAnBgC;EAoBlDC,iBAAiB,EAAEA,iBApB+B;EAqBlDC,2BAA2B,EAAEA,2BArBqB;EAsBlDC,kBAAkB,EAAEA,kBAtB8B;EAuBlDC,qBAAqB,EAAEA,qBAvB2B;EAwBlDC,aAAa,EAAEA;AAxBmC,CAAd,CAAtC;AA2BA;;AAEA,SAASE,sBAAT,CAAgCta,KAAhC,EAAuC6T,MAAvC,EAA+C;EAC7C,IAAIvU,IAAI,GAAGuU,MAAM,CAACvU,IAAlB;EAAA,IACIE,KAAK,GAAGqU,MAAM,CAACrU,KADnB;EAAA,IAEIyK,QAAQ,GAAG4J,MAAM,CAAC5J,QAFtB;EAGA,IAAI8J,OAAJ;;EAEA,QAAQzU,IAAR;IACE,KAAKka,aAAL;MACEzF,OAAO,GAAG;QACRhN,gBAAgB,EAAE8M,MAAM,CAAC9R;MADjB,CAAV;MAGA;;IAEF,KAAK0X,SAAL;MACE1F,OAAO,GAAG;QACRlV,MAAM,EAAEyX,eAAe,CAAC9W,KAAD,EAAQ,QAAR,CADf;QAERuH,gBAAgB,EAAEuP,eAAe,CAAC9W,KAAD,EAAQ,kBAAR,CAFzB;QAGR4H,YAAY,EAAE5H,KAAK,CAAC6G,KAAN,CAAYwN,MAAM,CAAC9R,KAAnB;MAHN,CAAV;MAKA;;IAEF,KAAK8X,4BAAL;MACE;QACE,IAAIU,aAAa,GAAG1G,MAAM,CAACrT,GAA3B;QACA,IAAI6G,UAAU,GAAG,KAAKrH,KAAK,CAACqH,UAAX,GAAwBkT,aAAzC;QACA,IAAI5S,SAAS,GAAGiQ,0BAA0B,CAACvQ,UAAD,EAAarH,KAAK,CAACoH,YAAN,GAAqB5H,KAAK,CAAC6G,KAAN,CAAYxF,OAAZ,CAAoBb,KAAK,CAACoH,YAA1B,CAArB,GAA+D,CAAC,CAA7E,EAAgF5H,KAAK,CAAC6G,KAAtF,EAA6F7G,KAAK,CAACiI,YAAnG,EAAiHoM,MAAM,CAACtS,oBAAxH,CAA1C;QACAwS,OAAO,GAAG3Z,QAAQ,CAAC;UACjBiN,UAAU,EAAEA;QADK,CAAD,EAEfM,SAAS,IAAI,CAAb,IAAkB;UACnBP,YAAY,EAAE5H,KAAK,CAAC6G,KAAN,CAAYsB,SAAZ;QADK,CAFH,CAAlB;MAKD;MACD;;IAEF,KAAKgS,4BAAL;MACE5F,OAAO,GAAG;QACRhN,gBAAgB,EAAE6P,yBAAyB,CAACpX,KAAD,EAAQQ,KAAR,EAAe,CAAf,EAAkB6T,MAAM,CAACtS,oBAAzB,CADnC;QAER1C,MAAM,EAAE;MAFA,CAAV;MAIA;;IAEF,KAAK+a,0BAAL;MACE7F,OAAO,GAAG;QACRhN,gBAAgB,EAAE6P,yBAAyB,CAACpX,KAAD,EAAQQ,KAAR,EAAe,CAAC,CAAhB,EAAmB6T,MAAM,CAACtS,oBAA1B,CADnC;QAER1C,MAAM,EAAE;MAFA,CAAV;MAIA;;IAEF,KAAKsa,gBAAL;IACA,KAAKC,sBAAL;MACErF,OAAO,GAAG3Z,QAAQ,CAAC;QACjByE,MAAM,EAAEyX,eAAe,CAAC9W,KAAD,EAAQ,QAAR,CADN;QAEjBuH,gBAAgB,EAAEuP,eAAe,CAAC9W,KAAD,EAAQ,kBAAR;MAFhB,CAAD,EAGfQ,KAAK,CAAC+G,gBAAN,IAA0B,CAA1B,IAA+B;QAChCK,YAAY,EAAE5H,KAAK,CAAC6G,KAAN,CAAYrG,KAAK,CAAC+G,gBAAlB;MADkB,CAHhB,CAAlB;MAMA;;IAEF,KAAKkS,eAAL;MACElF,OAAO,GAAG;QACRhN,gBAAgB,EAAEnF,uBAAuB,CAAC,CAAD,EAAI,CAAJ,EAAOpC,KAAK,CAAC6G,KAAN,CAAYrJ,MAAnB,EAA2B6W,MAAM,CAACtS,oBAAlC,EAAwD,KAAxD;MADjC,CAAV;MAGA;;IAEF,KAAK2X,cAAL;MACEnF,OAAO,GAAG;QACRhN,gBAAgB,EAAEnF,uBAAuB,CAAC,CAAC,CAAF,EAAKpC,KAAK,CAAC6G,KAAN,CAAYrJ,MAAZ,GAAqB,CAA1B,EAA6BwC,KAAK,CAAC6G,KAAN,CAAYrJ,MAAzC,EAAiD6W,MAAM,CAACtS,oBAAxD,EAA8E,KAA9E;MADjC,CAAV;MAGA;;IAEF,KAAKyX,iBAAL;MACEjF,OAAO,GAAG;QACRlV,MAAM,EAAE,KADA;QAERkI,gBAAgB,EAAE,CAAC;MAFX,CAAV;MAIA;;IAEF,KAAKuS,QAAL;MACEvF,OAAO,GAAG;QACRlV,MAAM,EAAE,KADA;QAERkI,gBAAgB,EAAE,CAAC;MAFX,CAAV;MAIA;;IAEF,KAAKsS,oBAAL;MACE;QACE,IAAImB,cAAc,GAAG3G,MAAM,CAACrT,GAA5B;;QAEA,IAAI6P,WAAW,GAAG,KAAKrQ,KAAK,CAACqH,UAAX,GAAwBmT,cAA1C;;QAEA,IAAIzT,gBAAgB,GAAG6Q,0BAA0B,CAACvH,WAAD,EAAcrQ,KAAK,CAAC+G,gBAApB,EAAsCvH,KAAK,CAAC6G,KAA5C,EAAmD7G,KAAK,CAACiI,YAAzD,EAAuEoM,MAAM,CAACtS,oBAA9E,CAAjD;QACAwS,OAAO,GAAG3Z,QAAQ,CAAC;UACjBiN,UAAU,EAAEgJ;QADK,CAAD,EAEftJ,gBAAgB,IAAI,CAApB,IAAyB;UAC1BA,gBAAgB,EAAEA;QADQ,CAFV,CAAlB;MAKD;MACD;;IAEF,KAAK+R,oBAAL;MACE/E,OAAO,GAAG;QACRhN,gBAAgB,EAAE5F,oBAAoB,CAAC8I,QAAQ,GAAG,CAAH,GAAO,CAAhB,EAAmBjK,KAAK,CAAC+G,gBAAzB,EAA2CvH,KAAK,CAAC6G,KAAN,CAAYrJ,MAAvD,EAA+D6W,MAAM,CAACtS,oBAAtE,EAA4F/B,KAAK,CAAC6W,kBAAlG;MAD9B,CAAV;MAGA;;IAEF,KAAK0C,kBAAL;MACEhF,OAAO,GAAG;QACRhN,gBAAgB,EAAE5F,oBAAoB,CAAC8I,QAAQ,GAAG,CAAC,CAAJ,GAAQ,CAAC,CAAlB,EAAqBjK,KAAK,CAAC+G,gBAA3B,EAA6CvH,KAAK,CAAC6G,KAAN,CAAYrJ,MAAzD,EAAiE6W,MAAM,CAACtS,oBAAxE,EAA8F/B,KAAK,CAAC6W,kBAApG;MAD9B,CAAV;MAGA;;IAEF,KAAKkD,cAAL;MACExF,OAAO,GAAG;QACRhN,gBAAgB,EAAE,CAAC;MADX,CAAV;MAGA;;IAEF,KAAK2S,iBAAL;IACA,KAAKI,kBAAL;MACE/F,OAAO,GAAG;QACRlV,MAAM,EAAE,CAACmB,KAAK,CAACnB,MADP;QAERkI,gBAAgB,EAAE/G,KAAK,CAACnB,MAAN,GAAe,CAAC,CAAhB,GAAoB+X,yBAAyB,CAACpX,KAAD,EAAQQ,KAAR,EAAe,CAAf;MAFvD,CAAV;MAIA;;IAEF,KAAK+Z,gBAAL;MACEhG,OAAO,GAAG;QACRlV,MAAM,EAAE,IADA;QAERkI,gBAAgB,EAAE6P,yBAAyB,CAACpX,KAAD,EAAQQ,KAAR,EAAe,CAAf;MAFnC,CAAV;MAIA;;IAEF,KAAKga,iBAAL;MACEjG,OAAO,GAAG;QACRlV,MAAM,EAAE;MADA,CAAV;MAGA;;IAEF,KAAKob,2BAAL;MACElG,OAAO,GAAG;QACRhN,gBAAgB,EAAE8M,MAAM,CAAC9M;MADjB,CAAV;MAGA;;IAEF,KAAKmT,kBAAL;MACEnG,OAAO,GAAG;QACR3M,YAAY,EAAEyM,MAAM,CAACzM;MADb,CAAV;MAGA;;IAEF,KAAK+S,qBAAL;MACEpG,OAAO,GAAG;QACR1M,UAAU,EAAEwM,MAAM,CAACxM;MADX,CAAV;MAGA;;IAEF,KAAK+S,aAAL;MACErG,OAAO,GAAG;QACRhN,gBAAgB,EAAEuP,eAAe,CAAC9W,KAAD,EAAQ,kBAAR,CADzB;QAERX,MAAM,EAAEyX,eAAe,CAAC9W,KAAD,EAAQ,QAAR,CAFf;QAGR4H,YAAY,EAAEkP,eAAe,CAAC9W,KAAD,EAAQ,cAAR,CAHrB;QAIR6H,UAAU,EAAEiP,eAAe,CAAC9W,KAAD,EAAQ,YAAR;MAJnB,CAAV;MAMA;;IAEF;MACE,MAAM,IAAImT,KAAJ,CAAU,4CAAV,CAAN;EAhKJ;;EAmKA,OAAOvY,QAAQ,CAAC,EAAD,EAAK4F,KAAL,EAAY+T,OAAZ,CAAf;AACD;AACD;;;AAEA,IAAI0G,iBAAiB,GAAG9X,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB;AACxB;AACA,IAFwB,GAEjBiS,qBAAqB,CAAC4F,SAAD,EAAY1H,SAAZ,CAF5B;AAGA0H,SAAS,CAAClV,gBAAV,GAA6B6U,kBAA7B;;AAEA,SAASK,SAAT,CAAmBC,SAAnB,EAA8B;EAC5B,IAAIA,SAAS,KAAK,KAAK,CAAvB,EAA0B;IACxBA,SAAS,GAAG,EAAZ;EACD;EAED;;;EACA,IAAIhY,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;IACzC4X,iBAAiB,CAACE,SAAD,CAAjB;EACD,CAR2B,CAQ1B;;;EAGF,IAAInb,KAAK,GAAGpF,QAAQ,CAAC,EAAD,EAAKye,cAAL,EAAqB8B,SAArB,CAApB;;EAEA,IAAItU,KAAK,GAAG7G,KAAK,CAAC6G,KAAlB;EAAA,IACIhL,cAAc,GAAGmE,KAAK,CAACnE,cAD3B;EAAA,IAEIqR,WAAW,GAAGlN,KAAK,CAACkN,WAFxB;EAAA,IAGIuD,aAAa,GAAGzQ,KAAK,CAACyQ,aAH1B;EAAA,IAII3I,aAAa,GAAG9H,KAAK,CAAC8H,aAJ1B;EAAA,IAKIG,YAAY,GAAGjI,KAAK,CAACiI,YALzB;EAAA,IAMI4M,uBAAuB,GAAG7U,KAAK,CAAC6U,uBANpC;EAAA,IAOI1V,oBAAoB,GAAGa,KAAK,CAACb,oBAPjC,CAb4B,CAoB2B;;EAEvD,IAAIgX,YAAY,GAAGgB,eAAe,CAACnX,KAAD,CAAlC;;EAEA,IAAIob,qBAAqB,GAAGzE,oBAAoB,CAACmE,sBAAD,EAAyB3E,YAAzB,EAAuCnW,KAAvC,CAAhD;EAAA,IACIQ,KAAK,GAAG4a,qBAAqB,CAAC,CAAD,CADjC;EAAA,IAEI5E,QAAQ,GAAG4E,qBAAqB,CAAC,CAAD,CAFpC;;EAIA,IAAI/b,MAAM,GAAGmB,KAAK,CAACnB,MAAnB;EAAA,IACIkI,gBAAgB,GAAG/G,KAAK,CAAC+G,gBAD7B;EAAA,IAEIK,YAAY,GAAGpH,KAAK,CAACoH,YAFzB;EAAA,IAGIC,UAAU,GAAGrH,KAAK,CAACqH,UAHvB,CA5B4B,CA+BO;;EAEnC,IAAIwT,eAAe,GAAGngB,MAAM,CAAC,IAAD,CAA5B;EACA,IAAIsT,OAAO,GAAGtT,MAAM,CAAC,IAAD,CAApB;EACA,IAAIogB,QAAQ,GAAGpgB,MAAM,EAArB;EACAogB,QAAQ,CAACvc,OAAT,GAAmB,EAAnB,CApC4B,CAoCL;;EAEvB,IAAIwc,eAAe,GAAGrgB,MAAM,CAAC,IAAD,CAA5B,CAtC4B,CAsCQ;;EAEpC,IAAIsgB,aAAa,GAAGtgB,MAAM,CAAC,IAAD,CAA1B,CAxC4B,CAwCM;;EAElC,IAAIugB,eAAe,GAAGvgB,MAAM,CAAC,IAAD,CAA5B,CA1C4B,CA0CQ;;EAEpC,IAAIwgB,aAAa,GAAGxgB,MAAM,CAACga,aAAa,CAAClV,KAAD,CAAd,CAA1B,CA5C4B,CA4CsB;;EAElD,IAAI2b,sBAAsB,GAAGzgB,MAAM,EAAnC;EACA,IAAI2c,iBAAiB,GAAG3c,MAAM,CAAC,IAAD,CAA9B,CA/C4B,CA+CU;;EAEtC,IAAI0gB,YAAY,GAAG1gB,MAAM,CAAC8E,KAAD,CAAzB,CAjD4B,CAiDM;;EAElC,IAAI6b,MAAM,GAAG9F,YAAY,CAAC;IACxBvV,KAAK,EAAEA,KADiB;IAExBR,KAAK,EAAEA;EAFiB,CAAD,CAAzB,CAnD4B,CAsDxB;;EAEJ,IAAI+B,oBAAoB,GAAG,UAAUQ,KAAV,EAAiB;IAC1C,OAAO+Y,QAAQ,CAACvc,OAAT,CAAiB2c,aAAa,CAAC3c,OAAd,CAAsB4H,SAAtB,CAAgCpE,KAAhC,CAAjB,CAAP;EACD,CAFD,CAxD4B,CA0DzB;EACH;;;EAGApH,SAAS,CAAC,YAAY;IACpB,IAAI0c,iBAAiB,CAAC9Y,OAAtB,EAA+B;MAC7B;IACD;;IAED,IAAIQ,mBAAmB,GAAGoc,sBAAsB,CAAC5c,OAAjD;IACAiW,gBAAgB,CAAC,YAAY;MAC3B,OAAO7V,oBAAoB,CAAC;QAC1BE,MAAM,EAAEA,MADkB;QAE1BkI,gBAAgB,EAAEA,gBAFQ;QAG1BK,YAAY,EAAEA,YAHY;QAI1BC,UAAU,EAAEA,UAJc;QAK1BsI,eAAe,EAAEtJ,KAAK,CAACU,gBAAD,CALI;QAM1BjI,WAAW,EAAEuH,KAAK,CAACrJ,MANO;QAO1ByK,YAAY,EAAEA,YAPY;QAQ1B1I,mBAAmB,EAAEA;MARK,CAAD,CAA3B;IAUD,CAXe,EAWb2N,WAAW,CAACtK,QAXC,CAAhB,CANoB,CAiBM;EAC3B,CAlBQ,EAkBN,CAACvD,MAAD,EAASkI,gBAAT,EAA2BM,UAA3B,EAAuChB,KAAvC,CAlBM,CAAT,CA9D4B,CAgFuB;;EAEnD1L,SAAS,CAAC,YAAY;IACpB,IAAI0c,iBAAiB,CAAC9Y,OAAtB,EAA+B;MAC7B;IACD;;IAED,IAAIQ,mBAAmB,GAAGoc,sBAAsB,CAAC5c,OAAjD;IACAiW,gBAAgB,CAAC,YAAY;MAC3B,OAAOH,uBAAuB,CAAC;QAC7BxV,MAAM,EAAEA,MADqB;QAE7BkI,gBAAgB,EAAEA,gBAFW;QAG7BK,YAAY,EAAEA,YAHe;QAI7BC,UAAU,EAAEA,UAJiB;QAK7BsI,eAAe,EAAEtJ,KAAK,CAACU,gBAAD,CALO;QAM7BjI,WAAW,EAAEuH,KAAK,CAACrJ,MANU;QAO7ByK,YAAY,EAAEA,YAPe;QAQ7B1I,mBAAmB,EAAEA;MARQ,CAAD,CAA9B;IAUD,CAXe,EAWb2N,WAAW,CAACtK,QAXC,CAAhB,CANoB,CAiBM;EAC3B,CAlBQ,EAkBN,CAACgF,YAAD,CAlBM,CAAT,CAlF4B,CAoGR;;EAEpBzM,SAAS,CAAC,YAAY;IACpB;IACA,IAAI0c,iBAAiB,CAAC9Y,OAAtB,EAA+B;MAC7B0c,eAAe,CAAC1c,OAAhB,GAA0BhC,QAAQ,CAAC,UAAU+e,aAAV,EAAyB;QAC1DA,aAAa,CAAC;UACZhc,IAAI,EAAE6a,qBADM;UAEZ9S,UAAU,EAAE;QAFA,CAAD,CAAb;MAID,CALiC,EAK/B,GAL+B,CAAlC;IAMD;;IAED,IAAI,CAACA,UAAL,EAAiB;MACf;IACD;;IAED4T,eAAe,CAAC1c,OAAhB,CAAwByX,QAAxB,EAfoB,CAee;EACpC,CAhBQ,EAgBN,CAAC3O,UAAD,CAhBM,CAAT;EAiBA;;EAEA1M,SAAS,CAAC,YAAY;IACpB;IACA,IAAI0c,iBAAiB,CAAC9Y,OAAtB,EAA+B;MAC7B;MACA,IAAI,CAAC0R,aAAa,IAAI3I,aAAjB,IAAkCzI,MAAnC,KAA8CmP,OAAO,CAACzP,OAA1D,EAAmE;QACjEyP,OAAO,CAACzP,OAAR,CAAgBoO,KAAhB;MACD;;MAED;IACD,CATmB,CASlB;;;IAGF,IAAI9N,MAAJ,EAAY;MACV;MACA,IAAImP,OAAO,CAACzP,OAAZ,EAAqB;QACnByP,OAAO,CAACzP,OAAR,CAAgBoO,KAAhB;MACD;;MAED;IACD,CAnBmB,CAmBlB;;;IAGF,IAAID,WAAW,CAACtK,QAAZ,CAAqBG,aAArB,KAAuCyL,OAAO,CAACzP,OAAnD,EAA4D;MAC1D;MACA,IAAIsc,eAAe,CAACtc,OAApB,EAA6B;QAC3Byc,aAAa,CAACzc,OAAd,GAAwB,KAAxB;QACAsc,eAAe,CAACtc,OAAhB,CAAwBoO,KAAxB;MACD;IACF,CA5BmB,CA4BlB;;EAEH,CA9BQ,EA8BN,CAAC9N,MAAD,CA9BM,CAAT,CAzH4B,CAuJd;;EAEdlE,SAAS,CAAC,YAAY;IACpB,IAAIoM,gBAAgB,GAAG,CAAnB,IAAwB,CAAClI,MAAzB,IAAmC,CAACuB,MAAM,CAACC,IAAP,CAAYya,QAAQ,CAACvc,OAArB,EAA8BvB,MAAtE,EAA8E;MAC5E;IACD;;IAED,IAAI+d,eAAe,CAACxc,OAAhB,KAA4B,KAAhC,EAAuC;MACrCwc,eAAe,CAACxc,OAAhB,GAA0B,IAA1B;IACD,CAFD,MAEO;MACLlD,cAAc,CAACkG,oBAAoB,CAACwF,gBAAD,CAArB,EAAyCiH,OAAO,CAACzP,OAAjD,CAAd;IACD,CATmB,CASlB;;EAEH,CAXQ,EAWN,CAACwI,gBAAD,CAXM,CAAT;EAYApM,SAAS,CAAC,YAAY;IACpB,IAAI0c,iBAAiB,CAAC9Y,OAAtB,EAA+B;MAC7B;IACD;;IAED4c,sBAAsB,CAAC5c,OAAvB,GAAiC8H,KAAK,CAACrJ,MAAvC;EACD,CANQ,CAAT;EAOArC,SAAS,CAAC,YAAY;IACpB,IAAI0c,iBAAiB,CAAC9Y,OAAtB,EAA+B;MAC7B;IACD;;IAEDiE,2BAA2B,CAACxC,KAAD,EAAQob,YAAY,CAAC7c,OAArB,EAA8BiB,KAA9B,CAA3B;IACA4b,YAAY,CAAC7c,OAAb,GAAuBiB,KAAvB;EACD,CAPQ,EAON,CAACQ,KAAD,EAAQR,KAAR,CAPM,CAAT,CA5K4B,CAmLR;;EAEpB,IAAIyX,wBAAwB,GAAGH,uBAAuB,CAACjY,MAAD,EAAS,CAACmP,OAAD,EAAU6M,eAAV,CAAT,EAAqCnO,WAArC,EAAkD,YAAY;IAClHsJ,QAAQ,CAAC;MACP1W,IAAI,EAAEga;IADC,CAAD,CAAR;EAGD,CAJqD,CAAtD;EAKA,IAAI3B,qBAAqB,GAAGR,2BAA2B,CAAC,cAAD,EAAiB,sBAAjB,CAAvD,CA1L4B,CA0LqE;;EAEjGxc,SAAS,CAAC,YAAY;IACpB0c,iBAAiB,CAAC9Y,OAAlB,GAA4B,KAA5B;EACD,CAFQ,EAEN,EAFM,CAAT,CA5L4B,CA8LpB;;EAER,IAAIgd,2BAA2B,GAAGzgB,OAAO,CAAC,YAAY;IACpD,OAAO;MACL+O,SAAS,EAAE,SAASA,SAAT,CAAmBnM,KAAnB,EAA0B;QACnCA,KAAK,CAACqM,cAAN;QACAiM,QAAQ,CAAC;UACP1W,IAAI,EAAEqa,4BADC;UAEPpY,oBAAoB,EAAEA,oBAFf;UAGP0I,QAAQ,EAAEvM,KAAK,CAACuM;QAHT,CAAD,CAAR;MAKD,CARI;MASLK,OAAO,EAAE,SAASA,OAAT,CAAiB5M,KAAjB,EAAwB;QAC/BA,KAAK,CAACqM,cAAN;QACAiM,QAAQ,CAAC;UACP1W,IAAI,EAAEsa,0BADC;UAEPrY,oBAAoB,EAAEA,oBAFf;UAGP0I,QAAQ,EAAEvM,KAAK,CAACuM;QAHT,CAAD,CAAR;MAKD;IAhBI,CAAP;EAkBD,CAnBwC,EAmBtC,CAAC+L,QAAD,CAnBsC,CAAzC;EAoBA,IAAIwF,mBAAmB,GAAG1gB,OAAO,CAAC,YAAY;IAC5C,OAAO;MACL+O,SAAS,EAAE,SAASA,SAAT,CAAmBnM,KAAnB,EAA0B;QACnCA,KAAK,CAACqM,cAAN;QACAiM,QAAQ,CAAC;UACP1W,IAAI,EAAEwZ,oBADC;UAEPvX,oBAAoB,EAAEA,oBAFf;UAGP0I,QAAQ,EAAEvM,KAAK,CAACuM;QAHT,CAAD,CAAR;MAKD,CARI;MASLK,OAAO,EAAE,SAASA,OAAT,CAAiB5M,KAAjB,EAAwB;QAC/BA,KAAK,CAACqM,cAAN;QACAiM,QAAQ,CAAC;UACP1W,IAAI,EAAEyZ,kBADC;UAEPxX,oBAAoB,EAAEA,oBAFf;UAGP0I,QAAQ,EAAEvM,KAAK,CAACuM;QAHT,CAAD,CAAR;MAKD,CAhBI;MAiBLkB,IAAI,EAAE,SAASA,IAAT,CAAczN,KAAd,EAAqB;QACzBA,KAAK,CAACqM,cAAN;QACAiM,QAAQ,CAAC;UACP1W,IAAI,EAAE2Z,eADC;UAEP1X,oBAAoB,EAAEA;QAFf,CAAD,CAAR;MAID,CAvBI;MAwBLgK,GAAG,EAAE,SAASA,GAAT,CAAa7N,KAAb,EAAoB;QACvBA,KAAK,CAACqM,cAAN;QACAiM,QAAQ,CAAC;UACP1W,IAAI,EAAE4Z,cADC;UAEP3X,oBAAoB,EAAEA;QAFf,CAAD,CAAR;MAID,CA9BI;MA+BLsJ,MAAM,EAAE,SAASA,MAAT,GAAkB;QACxBmL,QAAQ,CAAC;UACP1W,IAAI,EAAE0Z;QADC,CAAD,CAAR;MAGD,CAnCI;MAoCLvO,KAAK,EAAE,SAASA,KAAT,CAAe/M,KAAf,EAAsB;QAC3BA,KAAK,CAACqM,cAAN;QACAiM,QAAQ,CAAC;UACP1W,IAAI,EAAE6Z;QADC,CAAD,CAAR;MAGD,CAzCI;MA0CL,KAAK,SAASnO,CAAT,CAAWtN,KAAX,EAAkB;QACrBA,KAAK,CAACqM,cAAN;QACAiM,QAAQ,CAAC;UACP1W,IAAI,EAAE8Z;QADC,CAAD,CAAR;MAGD;IA/CI,CAAP;EAiDD,CAlDgC,EAkD9B,CAACpD,QAAD,CAlD8B,CAAjC,CApN4B,CAsQZ;;EAEhB,IAAI/K,UAAU,GAAGrQ,WAAW,CAAC,YAAY;IACvCob,QAAQ,CAAC;MACP1W,IAAI,EAAEwa;IADC,CAAD,CAAR;EAGD,CAJ2B,EAIzB,CAAC9D,QAAD,CAJyB,CAA5B;EAKA,IAAIvG,SAAS,GAAG7U,WAAW,CAAC,YAAY;IACtCob,QAAQ,CAAC;MACP1W,IAAI,EAAE0a;IADC,CAAD,CAAR;EAGD,CAJ0B,EAIxB,CAAChE,QAAD,CAJwB,CAA3B;EAKA,IAAIxG,QAAQ,GAAG5U,WAAW,CAAC,YAAY;IACrCob,QAAQ,CAAC;MACP1W,IAAI,EAAEya;IADC,CAAD,CAAR;EAGD,CAJyB,EAIvB,CAAC/D,QAAD,CAJuB,CAA1B;EAKA,IAAIlP,mBAAmB,GAAGlM,WAAW,CAAC,UAAU0Q,mBAAV,EAA+B;IACnE0K,QAAQ,CAAC;MACP1W,IAAI,EAAE2a,2BADC;MAEPlT,gBAAgB,EAAEuE;IAFX,CAAD,CAAR;EAID,CALoC,EAKlC,CAAC0K,QAAD,CALkC,CAArC;EAMA,IAAIzO,UAAU,GAAG3M,WAAW,CAAC,UAAU6gB,eAAV,EAA2B;IACtDzF,QAAQ,CAAC;MACP1W,IAAI,EAAE4a,kBADC;MAEP9S,YAAY,EAAEqU;IAFP,CAAD,CAAR;EAID,CAL2B,EAKzB,CAACzF,QAAD,CALyB,CAA5B;EAMA,IAAIlL,KAAK,GAAGlQ,WAAW,CAAC,YAAY;IAClCob,QAAQ,CAAC;MACP1W,IAAI,EAAE8a;IADC,CAAD,CAAR;EAGD,CAJsB,EAIpB,CAACpE,QAAD,CAJoB,CAAvB;EAKA,IAAI0F,aAAa,GAAG9gB,WAAW,CAAC,UAAU+gB,aAAV,EAAyB;IACvD3F,QAAQ,CAAC;MACP1W,IAAI,EAAE6a,qBADC;MAEP9S,UAAU,EAAEsU;IAFL,CAAD,CAAR;EAID,CAL8B,EAK5B,CAAC3F,QAAD,CAL4B,CAA/B,CAxS4B,CA6SZ;;EAEhB,IAAIlJ,aAAa,GAAGlS,WAAW,CAAC,UAAUghB,UAAV,EAAsB;IACpD,OAAOxhB,QAAQ,CAAC;MACd2L,EAAE,EAAEmV,aAAa,CAAC3c,OAAd,CAAsB0H,OADZ;MAEd8G,OAAO,EAAEmO,aAAa,CAAC3c,OAAd,CAAsBoW;IAFjB,CAAD,EAGZiH,UAHY,CAAf;EAID,CAL8B,EAK5B,EAL4B,CAA/B;EAMA,IAAI1N,YAAY,GAAGtT,WAAW,CAAC,UAAUqO,KAAV,EAAiBC,MAAjB,EAAyB;IACtD,IAAIC,SAAJ;;IAEA,IAAItN,IAAI,GAAGoN,KAAK,KAAK,KAAK,CAAf,GAAmB,EAAnB,GAAwBA,KAAnC;IAAA,IACI4S,YAAY,GAAGhgB,IAAI,CAACggB,YADxB;IAAA,IAEIzS,WAAW,GAAGvN,IAAI,CAACwN,MAFvB;IAAA,IAGIA,MAAM,GAAGD,WAAW,KAAK,KAAK,CAArB,GAAyB,KAAzB,GAAiCA,WAH9C;IAAA,IAII2C,SAAS,GAAGlQ,IAAI,CAACkQ,SAJrB;IAAA,IAKIE,MAAM,GAAGpQ,IAAI,CAACoQ,MALlB;IAAA,IAMI3N,GAAG,GAAGzC,IAAI,CAACyC,GANf;IAAA,IAOIgL,IAAI,GAAGnP,6BAA6B,CAAC0B,IAAD,EAAO,CAAC,cAAD,EAAiB,QAAjB,EAA2B,WAA3B,EAAwC,QAAxC,EAAkD,KAAlD,CAAP,CAPxC;;IASA,IAAI+C,KAAK,GAAGsK,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACIK,qBAAqB,GAAG3K,KAAK,CAAC4K,gBADlC;IAAA,IAEIA,gBAAgB,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAFlE;;IAIA,IAAIuS,WAAW,GAAGT,MAAM,CAAC9c,OAAP,CAAeyB,KAAjC;IACA2X,qBAAqB,CAAC,cAAD,EAAiBnO,gBAAjB,EAAmCH,MAAnC,EAA2C2E,OAA3C,CAArB;IACA,OAAO5T,QAAQ,EAAE+O,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAACE,MAAD,CAAT,GAAoBnL,UAAU,CAACI,GAAD,EAAM,UAAU/C,QAAV,EAAoB;MACvFyS,OAAO,CAACzP,OAAR,GAAkBhD,QAAlB;IACD,CAF8D,CAA9C,EAEb4N,SAAS,CAACpD,EAAV,GAAemV,aAAa,CAAC3c,OAAd,CAAsByH,MAFxB,EAEgCmD,SAAS,CAACQ,IAAV,GAAiB,SAFjD,EAE4DR,SAAS,CAAC,iBAAD,CAAT,GAA+B+R,aAAa,CAAC3c,OAAd,CAAsB0H,OAFjH,EAE0HkD,SAAS,CAAC4S,QAAV,GAAqB,CAAC,CAFhJ,EAEmJ5S,SAFrJ,GAEiK2S,WAAW,CAACjd,MAAZ,IAAsBid,WAAW,CAAC/U,gBAAZ,GAA+B,CAAC,CAAtD,IAA2D;MACzO,yBAAyBmU,aAAa,CAAC3c,OAAd,CAAsB4H,SAAtB,CAAgC2V,WAAW,CAAC/U,gBAA5C;IADgN,CAF5N,EAIZ;MACD8U,YAAY,EAAEve,oBAAoB,CAACue,YAAD,EAAe,SAASG,oBAAT,GAAgC;QAC/EhG,QAAQ,CAAC;UACP1W,IAAI,EAAEia;QADC,CAAD,CAAR;MAGD,CAJiC,CADjC;MAMDxN,SAAS,EAAEzO,oBAAoB,CAACyO,SAAD,EAAY,SAASkQ,iBAAT,CAA2Bve,KAA3B,EAAkC;QAC3E,IAAI8C,GAAG,GAAGG,iBAAiB,CAACjD,KAAD,CAA3B;;QAEA,IAAI8C,GAAG,IAAIgb,mBAAmB,CAAChb,GAAD,CAA9B,EAAqC;UACnCgb,mBAAmB,CAAChb,GAAD,CAAnB,CAAyB9C,KAAzB;QACD,CAFD,MAEO,IAAIyX,sBAAsB,CAAC3U,GAAD,CAA1B,EAAiC;UACtCwV,QAAQ,CAAC;YACP1W,IAAI,EAAE+Z,oBADC;YAEP7Y,GAAG,EAAEA,GAFE;YAGPe,oBAAoB,EAAEA;UAHf,CAAD,CAAR;QAKD;MACF,CAZ8B,CAN9B;MAmBD0K,MAAM,EAAE3O,oBAAoB,CAAC2O,MAAD,EAAS,SAASiQ,cAAT,GAA0B;QAC7D;QACA,IAAIlB,aAAa,CAACzc,OAAd,KAA0B,KAA9B,EAAqC;UACnCyc,aAAa,CAACzc,OAAd,GAAwB,IAAxB;UACA;QACD;;QAED,IAAI4d,UAAU,GAAG,CAAClF,wBAAwB,CAAC1Y,OAAzB,CAAiCsO,WAAnD;QACA;;QAEA,IAAIsP,UAAJ,EAAgB;UACdnG,QAAQ,CAAC;YACP1W,IAAI,EAAEga;UADC,CAAD,CAAR;QAGD;MACF,CAf2B;IAnB3B,CAJY,EAuCZhQ,IAvCY,CAAf;EAwCD,CA1D6B,EA0D3B,CAAC0M,QAAD,EAAWqF,MAAX,EAAmBG,mBAAnB,EAAwCvE,wBAAxC,EAAkEU,qBAAlE,CA1D2B,CAA9B;EA2DA,IAAIjM,oBAAoB,GAAG9Q,WAAW,CAAC,UAAU+Q,MAAV,EAAkBsB,MAAlB,EAA0B;IAC/D,IAAIoB,SAAJ;;IAEA,IAAIzC,KAAK,GAAGD,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACIE,OAAO,GAAGD,KAAK,CAACC,OADpB;IAAA,IAEIE,SAAS,GAAGH,KAAK,CAACG,SAFtB;IAAA,IAGIqQ,YAAY,GAAGxQ,KAAK,CAACvC,MAHzB;IAAA,IAIIA,MAAM,GAAG+S,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAJ/C;IAAA,IAKI9d,GAAG,GAAGsN,KAAK,CAACtN,GALhB;IAAA,IAMIgL,IAAI,GAAGnP,6BAA6B,CAACyR,KAAD,EAAQ,CAAC,SAAD,EAAY,WAAZ,EAAyB,QAAzB,EAAmC,KAAnC,CAAR,CANxC;;IAQA,IAAIsB,KAAK,GAAGD,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACIoP,qBAAqB,GAAGnP,KAAK,CAAC1D,gBADlC;IAAA,IAEIA,gBAAgB,GAAG6S,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAFlE;;IAIA,IAAIC,uBAAuB,GAAG,YAAY;MACxCtG,QAAQ,CAAC;QACP1W,IAAI,EAAEoa;MADC,CAAD,CAAR;IAGD,CAJD;;IAMA,IAAI6C,yBAAyB,GAAG,UAAU7e,KAAV,EAAiB;MAC/C,IAAI8C,GAAG,GAAGG,iBAAiB,CAACjD,KAAD,CAA3B;;MAEA,IAAI8C,GAAG,IAAI+a,2BAA2B,CAAC/a,GAAD,CAAtC,EAA6C;QAC3C+a,2BAA2B,CAAC/a,GAAD,CAA3B,CAAiC9C,KAAjC;MACD,CAFD,MAEO,IAAIyX,sBAAsB,CAAC3U,GAAD,CAA1B,EAAiC;QACtCwV,QAAQ,CAAC;UACP1W,IAAI,EAAEua,4BADC;UAEPrZ,GAAG,EAAEA,GAFE;UAGPe,oBAAoB,EAAEA;QAHf,CAAD,CAAR;MAKD;IACF,CAZD;;IAcA,IAAIib,WAAW,GAAGpiB,QAAQ,EAAEiU,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAAChF,MAAD,CAAT,GAAoBnL,UAAU,CAACI,GAAD,EAAM,UAAUme,gBAAV,EAA4B;MAC1G5B,eAAe,CAACtc,OAAhB,GAA0Bke,gBAA1B;IACD,CAFyE,CAA9C,EAExBpO,SAAS,CAACtI,EAAV,GAAemV,aAAa,CAAC3c,OAAd,CAAsBoW,cAFb,EAE6BtG,SAAS,CAAC,eAAD,CAAT,GAA6B,SAF1D,EAEqEA,SAAS,CAAC,eAAD,CAAT,GAA6BgN,MAAM,CAAC9c,OAAP,CAAeyB,KAAf,CAAqBnB,MAFvH,EAE+HwP,SAAS,CAAC,iBAAD,CAAT,GAA+B6M,aAAa,CAAC3c,OAAd,CAAsB0H,OAAtB,GAAgC,GAAhC,GAAsCiV,aAAa,CAAC3c,OAAd,CAAsBoW,cAF1N,EAE0OtG,SAF5O,GAEwP/E,IAFxP,CAA1B;;IAIA,IAAI,CAACA,IAAI,CAACmD,QAAV,EAAoB;MAClB+P,WAAW,CAAC3Q,OAAZ,GAAsBvO,oBAAoB,CAACuO,OAAD,EAAUyQ,uBAAV,CAA1C;MACAE,WAAW,CAACzQ,SAAZ,GAAwBzO,oBAAoB,CAACyO,SAAD,EAAYwQ,yBAAZ,CAA5C;IACD;;IAED5E,qBAAqB,CAAC,sBAAD,EAAyBnO,gBAAzB,EAA2CH,MAA3C,EAAmDwR,eAAnD,CAArB;IACA,OAAO2B,WAAP;EACD,CA9CqC,EA8CnC,CAACxG,QAAD,EAAWqF,MAAX,EAAmBE,2BAAnB,EAAgD5D,qBAAhD,CA9CmC,CAAtC;EA+CA,IAAIjJ,YAAY,GAAG9T,WAAW,CAAC,UAAUuT,MAAV,EAAkB;IAC/C,IAAIuO,SAAJ;;IAEA,IAAIpO,KAAK,GAAGH,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACI3G,IAAI,GAAG8G,KAAK,CAAC9G,IADjB;IAAA,IAEIzF,KAAK,GAAGuM,KAAK,CAACvM,KAFlB;IAAA,IAGI+M,WAAW,GAAGR,KAAK,CAACQ,WAHxB;IAAA,IAIIjD,OAAO,GAAGyC,KAAK,CAACzC,OAJpB;IAAA,IAKI0C,YAAY,GAAGD,KAAK,CAACjF,MALzB;IAAA,IAMIA,MAAM,GAAGkF,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAN/C;IAAA,IAOIjQ,GAAG,GAAGgQ,KAAK,CAAChQ,GAPhB;IAAA,IAQIgL,IAAI,GAAGnP,6BAA6B,CAACmU,KAAD,EAAQ,CAAC,MAAD,EAAS,OAAT,EAAkB,aAAlB,EAAiC,SAAjC,EAA4C,QAA5C,EAAsD,KAAtD,CAAR,CARxC;;IAUA,IAAIqO,eAAe,GAAGtB,MAAM,CAAC9c,OAA7B;IAAA,IACIud,WAAW,GAAGa,eAAe,CAAC3c,KADlC;IAAA,IAEI4c,WAAW,GAAGD,eAAe,CAACnd,KAFlC;;IAIA,IAAIqd,mBAAmB,GAAG,YAAY;MACpC,IAAI9a,KAAK,KAAK+Z,WAAW,CAAC/U,gBAA1B,EAA4C;QAC1C;MACD;;MAEDgU,eAAe,CAACxc,OAAhB,GAA0B,KAA1B;MACAyX,QAAQ,CAAC;QACP1W,IAAI,EAAEka,aADC;QAEPzX,KAAK,EAAEA;MAFA,CAAD,CAAR;IAID,CAVD;;IAYA,IAAI+a,eAAe,GAAG,YAAY;MAChC9G,QAAQ,CAAC;QACP1W,IAAI,EAAEma,SADC;QAEP1X,KAAK,EAAEA;MAFA,CAAD,CAAR;IAID,CALD;;IAOA,IAAI4F,SAAS,GAAGkN,YAAY,CAAC9S,KAAD,EAAQyF,IAAR,EAAcoV,WAAW,CAACvW,KAA1B,CAA5B;;IAEA,IAAIsB,SAAS,GAAG,CAAhB,EAAmB;MACjB,MAAM,IAAIgL,KAAJ,CAAU,iDAAV,CAAN;IACD;;IAED,IAAIoK,SAAS,GAAG3iB,QAAQ,EAAEsiB,SAAS,GAAG;MACpC/S,IAAI,EAAE,QAD8B;MAEpC,iBAAiB,MAAMhC,SAAS,KAAKmU,WAAW,CAAC/U,gBAAhC,CAFmB;MAGpChB,EAAE,EAAEmV,aAAa,CAAC3c,OAAd,CAAsB4H,SAAtB,CAAgCwB,SAAhC;IAHgC,CAAZ,EAIvB+U,SAAS,CAACrT,MAAD,CAAT,GAAoBnL,UAAU,CAACI,GAAD,EAAM,UAAUsM,QAAV,EAAoB;MACzD,IAAIA,QAAJ,EAAc;QACZkQ,QAAQ,CAACvc,OAAT,CAAiB2c,aAAa,CAAC3c,OAAd,CAAsB4H,SAAtB,CAAgCwB,SAAhC,CAAjB,IAA+DiD,QAA/D;MACD;IACF,CAJgC,CAJP,EAQtB8R,SARoB,GAQRpT,IARQ,CAAxB;;IAUA,IAAI,CAACA,IAAI,CAACmD,QAAV,EAAoB;MAClBsQ,SAAS,CAACjO,WAAV,GAAwBxR,oBAAoB,CAACwR,WAAD,EAAc+N,mBAAd,CAA5C;MACAE,SAAS,CAAClR,OAAV,GAAoBvO,oBAAoB,CAACuO,OAAD,EAAUiR,eAAV,CAAxC;IACD;;IAED,OAAOC,SAAP;EACD,CA1D6B,EA0D3B,CAAC/G,QAAD,EAAWqF,MAAX,CA1D2B,CAA9B;EA2DA,OAAO;IACL;IACA3P,oBAAoB,EAAEA,oBAFjB;IAGLoB,aAAa,EAAEA,aAHV;IAILoB,YAAY,EAAEA,YAJT;IAKLQ,YAAY,EAAEA,YALT;IAML;IACAzD,UAAU,EAAEA,UAPP;IAQLuE,QAAQ,EAAEA,QARL;IASLC,SAAS,EAAEA,SATN;IAUL3I,mBAAmB,EAAEA,mBAVhB;IAWLS,UAAU,EAAEA,UAXP;IAYLuD,KAAK,EAAEA,KAZF;IAaL4Q,aAAa,EAAEA,aAbV;IAcL;IACA3U,gBAAgB,EAAEA,gBAfb;IAgBLlI,MAAM,EAAEA,MAhBH;IAiBLuI,YAAY,EAAEA,YAjBT;IAkBLC,UAAU,EAAEA;EAlBP,CAAP;AAoBD;;AAED,IAAI2V,qBAAqB,GAAGra,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,8BAAxC,GAAyE,CAArG;AACA,IAAIoa,mBAAmB,GAAGta,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,4BAAxC,GAAuE,CAAjG;AACA,IAAIqa,kBAAkB,GAAGva,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,0BAAxC,GAAqE,CAA9F;AACA,IAAIsa,gBAAgB,GAAGxa,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,wBAAxC,GAAmE,CAA1F;AACA,IAAIua,eAAe,GAAGza,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,uBAAxC,GAAkE,CAAxF;AACA,IAAIwa,iBAAiB,GAAG1a,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,yBAAxC,GAAoE,CAA5F;AACA,IAAIya,WAAW,GAAG3a,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,kBAAxC,GAA6D,CAA/E;AACA,IAAI0a,SAAS,GAAG5a,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,gBAAxC,GAA2D,CAA3E;AACA,IAAI2a,gBAAgB,GAAG7a,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,sBAAxC,GAAiE,CAAxF;AACA,IAAI4a,eAAe,GAAG9a,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,qBAAxC,GAAgE,CAAtF;AACA,IAAI6a,WAAW,GAAG/a,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,gBAAxC,GAA2D,EAA7E;AACA,IAAI8a,mBAAmB,GAAGhb,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,wBAAxC,GAAmE,EAA7F;AACA,IAAI+a,oBAAoB,GAAGjb,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,0BAAxC,GAAqE,EAAhG;AACA,IAAIgb,kBAAkB,GAAGlb,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,wBAAxC,GAAmE,EAA5F;AACA,IAAIib,mBAAmB,GAAGnb,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,yBAAxC,GAAoE,EAA9F;AACA,IAAIkb,6BAA6B,GAAGpb,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,oCAAxC,GAA+E,EAAnH;AACA,IAAImb,oBAAoB,GAAGrb,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,0BAAxC,GAAqE,EAAhG;AACA,IAAIob,uBAAuB,GAAGtb,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,8BAAxC,GAAyE,EAAvG;AACA,IAAIqb,eAAe,GAAGvb,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,oBAAxC,GAA+D,EAArF;AACA,IAAIsb,iCAAiC,GAAGxb,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,2CAAxC,GAAsF,EAA9H;AAEA,IAAIub,kBAAkB,GAAG,aAAahe,MAAM,CAACqF,MAAP,CAAc;EAClDC,SAAS,EAAE,IADuC;EAElDsX,qBAAqB,EAAEA,qBAF2B;EAGlDC,mBAAmB,EAAEA,mBAH6B;EAIlDC,kBAAkB,EAAEA,kBAJ8B;EAKlDC,gBAAgB,EAAEA,gBALgC;EAMlDC,eAAe,EAAEA,eANiC;EAOlDC,iBAAiB,EAAEA,iBAP+B;EAQlDC,WAAW,EAAEA,WARqC;EASlDC,SAAS,EAAEA,SATuC;EAUlDhE,cAAc,EAAEiE,gBAVkC;EAWlDhE,aAAa,EAAEiE,eAXmC;EAYlDhE,SAAS,EAAEiE,WAZuC;EAalDhE,iBAAiB,EAAEiE,mBAb+B;EAclD7D,kBAAkB,EAAE8D,oBAd8B;EAelD7D,gBAAgB,EAAE8D,kBAfgC;EAgBlD7D,iBAAiB,EAAE8D,mBAhB+B;EAiBlD7D,2BAA2B,EAAE8D,6BAjBqB;EAkBlD7D,kBAAkB,EAAE8D,oBAlB8B;EAmBlD7D,qBAAqB,EAAE8D,uBAnB2B;EAoBlD7D,aAAa,EAAE8D,eApBmC;EAqBlDC,iCAAiC,EAAEA;AArBe,CAAd,CAAtC;;AAwBA,SAASE,eAAT,CAAyBxiB,IAAzB,EAA+B;EAC7B,IAAIkK,EAAE,GAAGlK,IAAI,CAACkK,EAAd;EAAA,IACIG,OAAO,GAAGrK,IAAI,CAACqK,OADnB;EAAA,IAEIoD,IAAI,GAAGnP,6BAA6B,CAAC0B,IAAD,EAAO,CAAC,IAAD,EAAO,SAAP,CAAP,CAFxC;;EAIA,IAAI+Y,QAAQ,GAAG7O,EAAE,KAAKrF,SAAP,GAAmB,eAAelC,UAAU,EAA5C,GAAiDuH,EAAhE;EACA,OAAO3L,QAAQ,CAAC;IACd8L,OAAO,EAAEA,OAAO,IAAI0O,QAAQ,GAAG;EADjB,CAAD,EAEZF,aAAa,CAACta,QAAQ,CAAC;IACxB2L,EAAE,EAAEA;EADoB,CAAD,EAEtBuD,IAFsB,CAAT,CAFD,CAAf;AAKD;;AACD,SAASgV,iBAAT,CAA2B9e,KAA3B,EAAkC;EAChC,IAAImW,YAAY,GAAGgB,eAAe,CAACnX,KAAD,CAAlC;EACA,IAAI4H,YAAY,GAAGuO,YAAY,CAACvO,YAAhC;EACA,IAAIC,UAAU,GAAGsO,YAAY,CAACtO,UAA9B;;EAEA,IAAIA,UAAU,KAAK,EAAf,IAAqBD,YAArB,IAAqC5H,KAAK,CAAC+e,iBAAN,KAA4B7d,SAAjE,IAA8ElB,KAAK,CAAC4Q,iBAAN,KAA4B1P,SAA1G,IAAuHlB,KAAK,CAAC6H,UAAN,KAAqB3G,SAAhJ,EAA2J;IACzJ2G,UAAU,GAAG7H,KAAK,CAACiI,YAAN,CAAmBL,YAAnB,CAAb;EACD;;EAED,OAAOhN,QAAQ,CAAC,EAAD,EAAKub,YAAL,EAAmB;IAChCtO,UAAU,EAAEA;EADoB,CAAnB,CAAf;AAGD;;AACD,IAAImX,WAAW,GAAG;EAChBnY,KAAK,EAAE9L,SAAS,CAAC+d,KAAV,CAAgBC,UADP;EAEhB9Q,YAAY,EAAElN,SAAS,CAAC0Y,IAFR;EAGhBtU,oBAAoB,EAAEpE,SAAS,CAAC0Y,IAHhB;EAIhBoB,uBAAuB,EAAE9Z,SAAS,CAAC0Y,IAJnB;EAKhBoD,kBAAkB,EAAE9b,SAAS,CAAC4Y,IALd;EAMhBpM,gBAAgB,EAAExM,SAAS,CAAC2Y,MANZ;EAOhBjM,uBAAuB,EAAE1M,SAAS,CAAC2Y,MAPnB;EAQhBpD,uBAAuB,EAAEvV,SAAS,CAAC2Y,MARnB;EAShBrU,MAAM,EAAEtE,SAAS,CAAC4Y,IATF;EAUhB7L,aAAa,EAAE/M,SAAS,CAAC4Y,IAVT;EAWhBlD,aAAa,EAAE1V,SAAS,CAAC4Y,IAXT;EAYhB/L,YAAY,EAAE7M,SAAS,CAAC6Y,GAZR;EAahB7C,mBAAmB,EAAEhW,SAAS,CAAC6Y,GAbf;EAchBoF,mBAAmB,EAAEje,SAAS,CAAC6Y,GAdf;EAehB/L,UAAU,EAAE9M,SAAS,CAAC8Y,MAfN;EAgBhBkL,iBAAiB,EAAEhkB,SAAS,CAAC8Y,MAhBb;EAiBhBjD,iBAAiB,EAAE7V,SAAS,CAAC8Y,MAjBb;EAkBhBtN,EAAE,EAAExL,SAAS,CAAC8Y,MAlBE;EAmBhBpN,OAAO,EAAE1L,SAAS,CAAC8Y,MAnBH;EAoBhBrN,MAAM,EAAEzL,SAAS,CAAC8Y,MApBF;EAqBhBlN,SAAS,EAAE5L,SAAS,CAAC0Y,IArBL;EAsBhB/M,OAAO,EAAE3L,SAAS,CAAC8Y,MAtBH;EAuBhBsB,cAAc,EAAEpa,SAAS,CAAC8Y,MAvBV;EAwBhB/K,YAAY,EAAE/N,SAAS,CAAC0Y,IAxBR;EAyBhBwF,oBAAoB,EAAEle,SAAS,CAAC0Y,IAzBhB;EA0BhByF,wBAAwB,EAAEne,SAAS,CAAC0Y,IA1BpB;EA2BhBvK,aAAa,EAAEnO,SAAS,CAAC0Y,IA3BT;EA4BhB0F,cAAc,EAAEpe,SAAS,CAAC0Y,IA5BV;EA6BhB/K,kBAAkB,EAAE3N,SAAS,CAAC0Y,IA7Bd;EA8BhBvG,WAAW,EAAEnS,SAAS,CAAC+Y,KAAV,CAAgB;IAC3B1B,gBAAgB,EAAErX,SAAS,CAAC0Y,IADD;IAE3BnB,mBAAmB,EAAEvX,SAAS,CAAC0Y,IAFJ;IAG3B7Q,QAAQ,EAAE7H,SAAS,CAAC+Y,KAAV,CAAgB;MACxB9P,cAAc,EAAEjJ,SAAS,CAAC0Y,IADF;MAExB1Q,aAAa,EAAEhI,SAAS,CAAC6Y,GAFD;MAGxB/O,IAAI,EAAE9J,SAAS,CAAC6Y;IAHQ,CAAhB;EAHiB,CAAhB;AA9BG,CAAlB;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASqL,sBAAT,CAAgC/I,OAAhC,EAAyCC,YAAzC,EAAuDnW,KAAvD,EAA8D;EAC5D,IAAIkf,uBAAuB,GAAGhkB,MAAM,EAApC;;EAEA,IAAI0b,mBAAmB,GAAGX,kBAAkB,CAACC,OAAD,EAAUC,YAAV,EAAwBnW,KAAxB,CAA5C;EAAA,IACIQ,KAAK,GAAGoW,mBAAmB,CAAC,CAAD,CAD/B;EAAA,IAEIJ,QAAQ,GAAGI,mBAAmB,CAAC,CAAD,CAFlC,CAH4D,CAKrB;;;EAGvCzb,SAAS,CAAC,YAAY;IACpB,IAAI8F,gBAAgB,CAACjB,KAAD,EAAQ,cAAR,CAApB,EAA6C;MAC3C,IAAIkf,uBAAuB,CAACngB,OAAxB,KAAoCiB,KAAK,CAAC4H,YAA9C,EAA4D;QAC1D4O,QAAQ,CAAC;UACP1W,IAAI,EAAE6e,iCADC;UAEP9W,UAAU,EAAE7H,KAAK,CAACiI,YAAN,CAAmBjI,KAAK,CAAC4H,YAAzB;QAFL,CAAD,CAAR;MAID;;MAEDsX,uBAAuB,CAACngB,OAAxB,GAAkCyB,KAAK,CAACoH,YAAN,KAAuBsX,uBAAuB,CAACngB,OAA/C,GAAyDiB,KAAK,CAAC4H,YAA/D,GAA8EpH,KAAK,CAACoH,YAAtH;IACD;EACF,CAXQ,CAAT;EAYA,OAAO,CAACjH,QAAQ,CAACH,KAAD,EAAQR,KAAR,CAAT,EAAyBwW,QAAzB,CAAP;AACD;;AACD,IAAI2I,cAAc,GAAGvkB,QAAQ,CAAC,EAAD,EAAKwY,YAAL,EAAmB;EAC9CjU,oBAAoB,EAAEA,oBADwB;EAE9C0X,kBAAkB,EAAE;AAF0B,CAAnB,CAA7B;AAKA;;;AAEA,SAASuI,2BAAT,CAAqC5e,KAArC,EAA4C6T,MAA5C,EAAoD;EAClD,IAAIvU,IAAI,GAAGuU,MAAM,CAACvU,IAAlB;EAAA,IACIE,KAAK,GAAGqU,MAAM,CAACrU,KADnB;EAAA,IAEIyK,QAAQ,GAAG4J,MAAM,CAAC5J,QAFtB;EAGA,IAAI8J,OAAJ;;EAEA,QAAQzU,IAAR;IACE,KAAKme,eAAL;MACE1J,OAAO,GAAG;QACRhN,gBAAgB,EAAE8M,MAAM,CAAC9R;MADjB,CAAV;MAGA;;IAEF,KAAK2b,WAAL;MACE3J,OAAO,GAAG;QACRlV,MAAM,EAAEyX,eAAe,CAAC9W,KAAD,EAAQ,QAAR,CADf;QAERuH,gBAAgB,EAAEuP,eAAe,CAAC9W,KAAD,EAAQ,kBAAR,CAFzB;QAGR4H,YAAY,EAAE5H,KAAK,CAAC6G,KAAN,CAAYwN,MAAM,CAAC9R,KAAnB,CAHN;QAIRsF,UAAU,EAAE7H,KAAK,CAACiI,YAAN,CAAmBjI,KAAK,CAAC6G,KAAN,CAAYwN,MAAM,CAAC9R,KAAnB,CAAnB;MAJJ,CAAV;MAMA;;IAEF,KAAKib,qBAAL;MACE,IAAIhd,KAAK,CAACnB,MAAV,EAAkB;QAChBkV,OAAO,GAAG;UACRhN,gBAAgB,EAAE5F,oBAAoB,CAAC8I,QAAQ,GAAG,CAAH,GAAO,CAAhB,EAAmBjK,KAAK,CAAC+G,gBAAzB,EAA2CvH,KAAK,CAAC6G,KAAN,CAAYrJ,MAAvD,EAA+D6W,MAAM,CAACtS,oBAAtE,EAA4F/B,KAAK,CAAC6W,kBAAlG;QAD9B,CAAV;MAGD,CAJD,MAIO;QACLtC,OAAO,GAAG;UACRhN,gBAAgB,EAAE6P,yBAAyB,CAACpX,KAAD,EAAQQ,KAAR,EAAe,CAAf,EAAkB6T,MAAM,CAACtS,oBAAzB,CADnC;UAER1C,MAAM,EAAE;QAFA,CAAV;MAID;;MAED;;IAEF,KAAKoe,mBAAL;MACE,IAAIjd,KAAK,CAACnB,MAAV,EAAkB;QAChBkV,OAAO,GAAG;UACRhN,gBAAgB,EAAE5F,oBAAoB,CAAC8I,QAAQ,GAAG,CAAC,CAAJ,GAAQ,CAAC,CAAlB,EAAqBjK,KAAK,CAAC+G,gBAA3B,EAA6CvH,KAAK,CAAC6G,KAAN,CAAYrJ,MAAzD,EAAiE6W,MAAM,CAACtS,oBAAxE,EAA8F/B,KAAK,CAAC6W,kBAApG;QAD9B,CAAV;MAGD,CAJD,MAIO;QACLtC,OAAO,GAAG;UACRhN,gBAAgB,EAAE6P,yBAAyB,CAACpX,KAAD,EAAQQ,KAAR,EAAe,CAAC,CAAhB,EAAmB6T,MAAM,CAACtS,oBAA1B,CADnC;UAER1C,MAAM,EAAE;QAFA,CAAV;MAID;;MAED;;IAEF,KAAKwe,iBAAL;MACEtJ,OAAO,GAAG3Z,QAAQ,CAAC,EAAD,EAAK4F,KAAK,CAAC+G,gBAAN,IAA0B,CAA1B,IAA+B;QACpDK,YAAY,EAAE5H,KAAK,CAAC6G,KAAN,CAAYrG,KAAK,CAAC+G,gBAAlB,CADsC;QAEpDlI,MAAM,EAAEyX,eAAe,CAAC9W,KAAD,EAAQ,QAAR,CAF6B;QAGpDuH,gBAAgB,EAAEuP,eAAe,CAAC9W,KAAD,EAAQ,kBAAR,CAHmB;QAIpD6H,UAAU,EAAE7H,KAAK,CAACiI,YAAN,CAAmBjI,KAAK,CAAC6G,KAAN,CAAYrG,KAAK,CAAC+G,gBAAlB,CAAnB;MAJwC,CAApC,CAAlB;MAMA;;IAEF,KAAKmW,kBAAL;MACEnJ,OAAO,GAAG;QACRlV,MAAM,EAAE,KADA;QAERuI,YAAY,EAAE,IAFN;QAGRL,gBAAgB,EAAE,CAAC,CAHX;QAIRM,UAAU,EAAE;MAJJ,CAAV;MAMA;;IAEF,KAAK8V,gBAAL;MACEpJ,OAAO,GAAG;QACRhN,gBAAgB,EAAEnF,uBAAuB,CAAC,CAAD,EAAI,CAAJ,EAAOpC,KAAK,CAAC6G,KAAN,CAAYrJ,MAAnB,EAA2B6W,MAAM,CAACtS,oBAAlC,EAAwD,KAAxD;MADjC,CAAV;MAGA;;IAEF,KAAK6b,eAAL;MACErJ,OAAO,GAAG;QACRhN,gBAAgB,EAAEnF,uBAAuB,CAAC,CAAC,CAAF,EAAKpC,KAAK,CAAC6G,KAAN,CAAYrJ,MAAZ,GAAqB,CAA1B,EAA6BwC,KAAK,CAAC6G,KAAN,CAAYrJ,MAAzC,EAAiD6W,MAAM,CAACtS,oBAAxD,EAA8E,KAA9E;MADjC,CAAV;MAGA;;IAEF,KAAKgc,SAAL;MACExJ,OAAO,GAAG3Z,QAAQ,CAAC;QACjByE,MAAM,EAAE;MADS,CAAD,EAEfmB,KAAK,CAAC+G,gBAAN,IAA0B,CAA1B,IAA+B;QAChCK,YAAY,EAAE5H,KAAK,CAAC6G,KAAN,CAAYrG,KAAK,CAAC+G,gBAAlB,CADkB;QAEhCM,UAAU,EAAE7H,KAAK,CAACiI,YAAN,CAAmBjI,KAAK,CAAC6G,KAAN,CAAYrG,KAAK,CAAC+G,gBAAlB,CAAnB,CAFoB;QAGhCA,gBAAgB,EAAE,CAAC;MAHa,CAFhB,CAAlB;MAOA;;IAEF,KAAKuW,WAAL;MACEvJ,OAAO,GAAG;QACRlV,MAAM,EAAE,IADA;QAERkI,gBAAgB,EAAEuP,eAAe,CAAC9W,KAAD,EAAQ,kBAAR,CAFzB;QAGR6H,UAAU,EAAEwM,MAAM,CAACxM;MAHX,CAAV;MAKA;;IAEF,KAAKmW,gBAAL;MACEzJ,OAAO,GAAG;QACRhN,gBAAgB,EAAE,CAAC;MADX,CAAV;MAGA;;IAEF,KAAK4W,mBAAL;IACA,KAAKC,oBAAL;MACE7J,OAAO,GAAG;QACRlV,MAAM,EAAE,CAACmB,KAAK,CAACnB,MADP;QAERkI,gBAAgB,EAAE/G,KAAK,CAACnB,MAAN,GAAe,CAAC,CAAhB,GAAoB+X,yBAAyB,CAACpX,KAAD,EAAQQ,KAAR,EAAe,CAAf;MAFvD,CAAV;MAIA;;IAEF,KAAK6d,kBAAL;MACE9J,OAAO,GAAG;QACRlV,MAAM,EAAE,IADA;QAERkI,gBAAgB,EAAE6P,yBAAyB,CAACpX,KAAD,EAAQQ,KAAR,EAAe,CAAf;MAFnC,CAAV;MAIA;;IAEF,KAAK8d,mBAAL;MACE/J,OAAO,GAAG;QACRlV,MAAM,EAAE;MADA,CAAV;MAGA;;IAEF,KAAKkf,6BAAL;MACEhK,OAAO,GAAG;QACRhN,gBAAgB,EAAE8M,MAAM,CAAC9M;MADjB,CAAV;MAGA;;IAEF,KAAKiX,oBAAL;MACEjK,OAAO,GAAG;QACR3M,YAAY,EAAEyM,MAAM,CAACzM,YADb;QAERC,UAAU,EAAE7H,KAAK,CAACiI,YAAN,CAAmBoM,MAAM,CAACzM,YAA1B;MAFJ,CAAV;MAIA;;IAEF,KAAK+W,iCAAL;IACA,KAAKF,uBAAL;MACElK,OAAO,GAAG;QACR1M,UAAU,EAAEwM,MAAM,CAACxM;MADX,CAAV;MAGA;;IAEF,KAAK6W,eAAL;MACEnK,OAAO,GAAG;QACRhN,gBAAgB,EAAEuP,eAAe,CAAC9W,KAAD,EAAQ,kBAAR,CADzB;QAERX,MAAM,EAAEyX,eAAe,CAAC9W,KAAD,EAAQ,QAAR,CAFf;QAGR4H,YAAY,EAAEkP,eAAe,CAAC9W,KAAD,EAAQ,cAAR,CAHrB;QAIR6H,UAAU,EAAEiP,eAAe,CAAC9W,KAAD,EAAQ,YAAR;MAJnB,CAAV;MAMA;;IAEF;MACE,MAAM,IAAImT,KAAJ,CAAU,4CAAV,CAAN;EArJJ;;EAwJA,OAAOvY,QAAQ,CAAC,EAAD,EAAK4F,KAAL,EAAY+T,OAAZ,CAAf;AACD;AACD;;;AAEA,IAAI8K,mBAAmB,GAAGlc,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB;AAC1B;AACA,IAF0B,GAEnBiS,qBAAqB,CAACgK,WAAD,EAAcN,WAAd,CAF5B;AAGAM,WAAW,CAACtZ,gBAAZ,GAA+B4Y,kBAA/B;;AAEA,SAASU,WAAT,CAAqBnE,SAArB,EAAgC;EAC9B,IAAIA,SAAS,KAAK,KAAK,CAAvB,EAA0B;IACxBA,SAAS,GAAG,EAAZ;EACD;EAED;;;EACA,IAAIhY,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;IACzCgc,mBAAmB,CAAClE,SAAD,CAAnB;EACD,CAR6B,CAQ5B;;;EAGF,IAAInb,KAAK,GAAGpF,QAAQ,CAAC,EAAD,EAAKukB,cAAL,EAAqBhE,SAArB,CAApB;;EAEA,IAAI1K,aAAa,GAAGzQ,KAAK,CAACyQ,aAA1B;EAAA,IACI3I,aAAa,GAAG9H,KAAK,CAAC8H,aAD1B;EAAA,IAEIjB,KAAK,GAAG7G,KAAK,CAAC6G,KAFlB;EAAA,IAGIhL,cAAc,GAAGmE,KAAK,CAACnE,cAH3B;EAAA,IAIIqR,WAAW,GAAGlN,KAAK,CAACkN,WAJxB;EAAA,IAKI/N,oBAAoB,GAAGa,KAAK,CAACb,oBALjC;EAAA,IAMI0V,uBAAuB,GAAG7U,KAAK,CAAC6U,uBANpC;EAAA,IAOI5M,YAAY,GAAGjI,KAAK,CAACiI,YAPzB,CAb8B,CAoBS;;EAEvC,IAAIkO,YAAY,GAAG2I,iBAAiB,CAAC9e,KAAD,CAApC;;EAEA,IAAIob,qBAAqB,GAAG6D,sBAAsB,CAACG,2BAAD,EAA8BjJ,YAA9B,EAA4CnW,KAA5C,CAAlD;EAAA,IACIQ,KAAK,GAAG4a,qBAAqB,CAAC,CAAD,CADjC;EAAA,IAEI5E,QAAQ,GAAG4E,qBAAqB,CAAC,CAAD,CAFpC;;EAIA,IAAI/b,MAAM,GAAGmB,KAAK,CAACnB,MAAnB;EAAA,IACIkI,gBAAgB,GAAG/G,KAAK,CAAC+G,gBAD7B;EAAA,IAEIK,YAAY,GAAGpH,KAAK,CAACoH,YAFzB;EAAA,IAGIC,UAAU,GAAGrH,KAAK,CAACqH,UAHvB,CA5B8B,CA+BK;;EAEnC,IAAI2G,OAAO,GAAGtT,MAAM,CAAC,IAAD,CAApB;EACA,IAAIogB,QAAQ,GAAGpgB,MAAM,EAArB;EACA,IAAIqkB,QAAQ,GAAGrkB,MAAM,CAAC,IAAD,CAArB;EACA,IAAImgB,eAAe,GAAGngB,MAAM,CAAC,IAAD,CAA5B;EACA,IAAIskB,WAAW,GAAGtkB,MAAM,CAAC,IAAD,CAAxB;EACAogB,QAAQ,CAACvc,OAAT,GAAmB,EAAnB,CAtC8B,CAsCP;;EAEvB,IAAIwc,eAAe,GAAGrgB,MAAM,CAAC,IAAD,CAA5B;EACA,IAAI2c,iBAAiB,GAAG3c,MAAM,CAAC,IAAD,CAA9B,CAzC8B,CAyCQ;;EAEtC,IAAIwgB,aAAa,GAAGxgB,MAAM,CAAC2jB,eAAe,CAAC7e,KAAD,CAAhB,CAA1B,CA3C8B,CA2CsB;;EAEpD,IAAI2b,sBAAsB,GAAGzgB,MAAM,EAAnC,CA7C8B,CA6CS;;EAEvC,IAAI0gB,YAAY,GAAG1gB,MAAM,CAAC8E,KAAD,CAAzB,CA/C8B,CA+CI;;EAElC,IAAI6b,MAAM,GAAG9F,YAAY,CAAC;IACxBvV,KAAK,EAAEA,KADiB;IAExBR,KAAK,EAAEA;EAFiB,CAAD,CAAzB;;EAKA,IAAI+B,oBAAoB,GAAG,UAAUQ,KAAV,EAAiB;IAC1C,OAAO+Y,QAAQ,CAACvc,OAAT,CAAiB2c,aAAa,CAAC3c,OAAd,CAAsB4H,SAAtB,CAAgCpE,KAAhC,CAAjB,CAAP;EACD,CAFD,CAtD8B,CAwD3B;EACH;;;EAGApH,SAAS,CAAC,YAAY;IACpB,IAAI0c,iBAAiB,CAAC9Y,OAAtB,EAA+B;MAC7B;IACD;;IAED,IAAIQ,mBAAmB,GAAGoc,sBAAsB,CAAC5c,OAAjD;IACAiW,gBAAgB,CAAC,YAAY;MAC3B,OAAO7V,oBAAoB,CAAC;QAC1BE,MAAM,EAAEA,MADkB;QAE1BkI,gBAAgB,EAAEA,gBAFQ;QAG1BK,YAAY,EAAEA,YAHY;QAI1BC,UAAU,EAAEA,UAJc;QAK1BsI,eAAe,EAAEtJ,KAAK,CAACU,gBAAD,CALI;QAM1BjI,WAAW,EAAEuH,KAAK,CAACrJ,MANO;QAO1ByK,YAAY,EAAEA,YAPY;QAQ1B1I,mBAAmB,EAAEA;MARK,CAAD,CAA3B;IAUD,CAXe,EAWb2N,WAAW,CAACtK,QAXC,CAAhB,CANoB,CAiBM;EAC3B,CAlBQ,EAkBN,CAACvD,MAAD,EAASkI,gBAAT,EAA2BM,UAA3B,EAAuChB,KAAvC,CAlBM,CAAT,CA5D8B,CA8EqB;;EAEnD1L,SAAS,CAAC,YAAY;IACpB,IAAI0c,iBAAiB,CAAC9Y,OAAtB,EAA+B;MAC7B;IACD;;IAED,IAAIQ,mBAAmB,GAAGoc,sBAAsB,CAAC5c,OAAjD;IACAiW,gBAAgB,CAAC,YAAY;MAC3B,OAAOH,uBAAuB,CAAC;QAC7BxV,MAAM,EAAEA,MADqB;QAE7BkI,gBAAgB,EAAEA,gBAFW;QAG7BK,YAAY,EAAEA,YAHe;QAI7BC,UAAU,EAAEA,UAJiB;QAK7BsI,eAAe,EAAEtJ,KAAK,CAACU,gBAAD,CALO;QAM7BjI,WAAW,EAAEuH,KAAK,CAACrJ,MANU;QAO7ByK,YAAY,EAAEA,YAPe;QAQ7B1I,mBAAmB,EAAEA;MARQ,CAAD,CAA9B;IAUD,CAXe,EAWb2N,WAAW,CAACtK,QAXC,CAAhB,CANoB,CAiBM;EAC3B,CAlBQ,EAkBN,CAACgF,YAAD,CAlBM,CAAT,CAhF8B,CAkGV;;EAEpBzM,SAAS,CAAC,YAAY;IACpB,IAAIoM,gBAAgB,GAAG,CAAnB,IAAwB,CAAClI,MAAzB,IAAmC,CAACuB,MAAM,CAACC,IAAP,CAAYya,QAAQ,CAACvc,OAArB,EAA8BvB,MAAtE,EAA8E;MAC5E;IACD;;IAED,IAAI+d,eAAe,CAACxc,OAAhB,KAA4B,KAAhC,EAAuC;MACrCwc,eAAe,CAACxc,OAAhB,GAA0B,IAA1B;IACD,CAFD,MAEO;MACLlD,cAAc,CAACkG,oBAAoB,CAACwF,gBAAD,CAArB,EAAyCiH,OAAO,CAACzP,OAAjD,CAAd;IACD,CATmB,CASlB;;EAEH,CAXQ,EAWN,CAACwI,gBAAD,CAXM,CAAT,CApG8B,CA+GN;;EAExBpM,SAAS,CAAC,YAAY;IACpB;IACA,IAAI0c,iBAAiB,CAAC9Y,OAAtB,EAA+B;MAC7B;MACA,IAAI0R,aAAa,IAAI3I,aAAjB,IAAkCzI,MAAtC,EAA8C;QAC5C,IAAIkgB,QAAQ,CAACxgB,OAAb,EAAsB;UACpBwgB,QAAQ,CAACxgB,OAAT,CAAiBoO,KAAjB;QACD;MACF;IACF,CATmB,CASlB;;EAEH,CAXQ,EAWN,CAAC9N,MAAD,CAXM,CAAT;EAYAlE,SAAS,CAAC,YAAY;IACpB,IAAI0c,iBAAiB,CAAC9Y,OAAtB,EAA+B;MAC7B;IACD;;IAED4c,sBAAsB,CAAC5c,OAAvB,GAAiC8H,KAAK,CAACrJ,MAAvC;EACD,CANQ,CAAT;EAOArC,SAAS,CAAC,YAAY;IACpB,IAAI0c,iBAAiB,CAAC9Y,OAAtB,EAA+B;MAC7B;IACD;;IAEDiE,2BAA2B,CAACxC,KAAD,EAAQob,YAAY,CAAC7c,OAArB,EAA8BiB,KAA9B,CAA3B;IACA4b,YAAY,CAAC7c,OAAb,GAAuBiB,KAAvB;EACD,CAPQ,EAON,CAACQ,KAAD,EAAQR,KAAR,CAPM,CAAT,CApI8B,CA2IV;;EAEpB,IAAIyX,wBAAwB,GAAGH,uBAAuB,CAACjY,MAAD,EAAS,CAACmgB,WAAD,EAAchR,OAAd,EAAuB6M,eAAvB,CAAT,EAAkDnO,WAAlD,EAA+D,YAAY;IAC/HsJ,QAAQ,CAAC;MACP1W,IAAI,EAAEie;IADC,CAAD,CAAR;EAGD,CAJqD,CAAtD;EAKA,IAAI5F,qBAAqB,GAAGR,2BAA2B,CAAC,eAAD,EAAkB,kBAAlB,EAAsC,cAAtC,CAAvD,CAlJ8B,CAkJgF;;EAE9Gxc,SAAS,CAAC,YAAY;IACpB0c,iBAAiB,CAAC9Y,OAAlB,GAA4B,KAA5B;EACD,CAFQ,EAEN,EAFM,CAAT;EAGA;;EAEA,IAAI2M,oBAAoB,GAAGpQ,OAAO,CAAC,YAAY;IAC7C,OAAO;MACL+O,SAAS,EAAE,SAASA,SAAT,CAAmBnM,KAAnB,EAA0B;QACnCA,KAAK,CAACqM,cAAN;QACAiM,QAAQ,CAAC;UACP1W,IAAI,EAAE0d,qBADC;UAEP/S,QAAQ,EAAEvM,KAAK,CAACuM,QAFT;UAGP1I,oBAAoB,EAAEA;QAHf,CAAD,CAAR;MAKD,CARI;MASL+I,OAAO,EAAE,SAASA,OAAT,CAAiB5M,KAAjB,EAAwB;QAC/BA,KAAK,CAACqM,cAAN;QACAiM,QAAQ,CAAC;UACP1W,IAAI,EAAE2d,mBADC;UAEPhT,QAAQ,EAAEvM,KAAK,CAACuM,QAFT;UAGP1I,oBAAoB,EAAEA;QAHf,CAAD,CAAR;MAKD,CAhBI;MAiBL4J,IAAI,EAAE,SAASA,IAAT,CAAczN,KAAd,EAAqB;QACzBA,KAAK,CAACqM,cAAN;QACAiM,QAAQ,CAAC;UACP1W,IAAI,EAAE6d,gBADC;UAEP5b,oBAAoB,EAAEA;QAFf,CAAD,CAAR;MAID,CAvBI;MAwBLgK,GAAG,EAAE,SAASA,GAAT,CAAa7N,KAAb,EAAoB;QACvBA,KAAK,CAACqM,cAAN;QACAiM,QAAQ,CAAC;UACP1W,IAAI,EAAE8d,eADC;UAEP7b,oBAAoB,EAAEA;QAFf,CAAD,CAAR;MAID,CA9BI;MA+BLsJ,MAAM,EAAE,SAASA,MAAT,GAAkB;QACxBmL,QAAQ,CAAC;UACP1W,IAAI,EAAE4d;QADC,CAAD,CAAR;MAGD,CAnCI;MAoCLzS,KAAK,EAAE,SAASA,KAAT,CAAe/M,KAAf,EAAsB;QAC3B;QACA,IAAIA,KAAK,CAACgN,KAAN,KAAgB,GAApB,EAAyB;UACvB;QACD;;QAED,IAAIoR,WAAW,GAAGT,MAAM,CAAC9c,OAAP,CAAeyB,KAAjC;;QAEA,IAAI8b,WAAW,CAACjd,MAAZ,IAAsBid,WAAW,CAAC/U,gBAAZ,GAA+B,CAAC,CAA1D,EAA6D;UAC3DrJ,KAAK,CAACqM,cAAN;UACAiM,QAAQ,CAAC;YACP1W,IAAI,EAAE+d,iBADC;YAEP9b,oBAAoB,EAAEA;UAFf,CAAD,CAAR;QAID;MACF;IAnDI,CAAP;EAqDD,CAtDiC,EAsD/B,CAACyU,QAAD,EAAWqF,MAAX,CAtD+B,CAAlC,CAzJ8B,CA+MN;;EAExB,IAAIvO,aAAa,GAAGlS,WAAW,CAAC,UAAUghB,UAAV,EAAsB;IACpD,OAAOxhB,QAAQ,CAAC;MACd2L,EAAE,EAAEmV,aAAa,CAAC3c,OAAd,CAAsB0H,OADZ;MAEd8G,OAAO,EAAEmO,aAAa,CAAC3c,OAAd,CAAsB2H;IAFjB,CAAD,EAGZ0V,UAHY,CAAf;EAID,CAL8B,EAK5B,EAL4B,CAA/B;EAMA,IAAI1N,YAAY,GAAGtT,WAAW,CAAC,UAAUqO,KAAV,EAAiBC,MAAjB,EAAyB;IACtD,IAAIC,SAAJ;;IAEA,IAAItN,IAAI,GAAGoN,KAAK,KAAK,KAAK,CAAf,GAAmB,EAAnB,GAAwBA,KAAnC;IAAA,IACI4S,YAAY,GAAGhgB,IAAI,CAACggB,YADxB;IAAA,IAEIzS,WAAW,GAAGvN,IAAI,CAACwN,MAFvB;IAAA,IAGIA,MAAM,GAAGD,WAAW,KAAK,KAAK,CAArB,GAAyB,KAAzB,GAAiCA,WAH9C;IAAA,IAII9K,GAAG,GAAGzC,IAAI,CAACyC,GAJf;IAAA,IAKIgL,IAAI,GAAGnP,6BAA6B,CAAC0B,IAAD,EAAO,CAAC,cAAD,EAAiB,QAAjB,EAA2B,KAA3B,CAAP,CALxC;;IAOA,IAAI+C,KAAK,GAAGsK,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACIK,qBAAqB,GAAG3K,KAAK,CAAC4K,gBADlC;IAAA,IAEIA,gBAAgB,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAFlE;;IAIAoO,qBAAqB,CAAC,cAAD,EAAiBnO,gBAAjB,EAAmCH,MAAnC,EAA2C2E,OAA3C,CAArB;IACA,OAAO5T,QAAQ,EAAE+O,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAACE,MAAD,CAAT,GAAoBnL,UAAU,CAACI,GAAD,EAAM,UAAU/C,QAAV,EAAoB;MACvFyS,OAAO,CAACzP,OAAR,GAAkBhD,QAAlB;IACD,CAF8D,CAA9C,EAEb4N,SAAS,CAACpD,EAAV,GAAemV,aAAa,CAAC3c,OAAd,CAAsByH,MAFxB,EAEgCmD,SAAS,CAACQ,IAAV,GAAiB,SAFjD,EAE4DR,SAAS,CAAC,iBAAD,CAAT,GAA+B+R,aAAa,CAAC3c,OAAd,CAAsB0H,OAFjH,EAE0HkD,SAAS,CAAC0S,YAAV,GAAyBve,oBAAoB,CAACue,YAAD,EAAe,YAAY;MACjN7F,QAAQ,CAAC;QACP1W,IAAI,EAAEke;MADC,CAAD,CAAR;IAGD,CAJuL,CAFvK,EAMbrU,SANW,GAMCG,IAND,CAAf;EAOD,CAtB6B,EAsB3B,CAAC0M,QAAD,EAAW2B,qBAAX,CAtB2B,CAA9B;EAuBA,IAAIjJ,YAAY,GAAG9T,WAAW,CAAC,UAAU+Q,MAAV,EAAkB;IAC/C,IAAI0C,SAAJ,EAAenB,KAAf;;IAEA,IAAItB,KAAK,GAAGD,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACInE,IAAI,GAAGoE,KAAK,CAACpE,IADjB;IAAA,IAEIzF,KAAK,GAAG6J,KAAK,CAAC7J,KAFlB;IAAA,IAGIqa,YAAY,GAAGxQ,KAAK,CAACvC,MAHzB;IAAA,IAIIA,MAAM,GAAG+S,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAJ/C;IAAA,IAKI9d,GAAG,GAAGsN,KAAK,CAACtN,GALhB;IAAA,IAMIwQ,WAAW,GAAGlD,KAAK,CAACkD,WANxB;IAAA,IAOIjD,OAAO,GAAGD,KAAK,CAACC,OAPpB;IAAA,IAQIC,OAAO,GAAGF,KAAK,CAACE,OARpB;IAAA,IASIxC,IAAI,GAAGnP,6BAA6B,CAACyR,KAAD,EAAQ,CAAC,MAAD,EAAS,OAAT,EAAkB,QAAlB,EAA4B,KAA5B,EAAmC,aAAnC,EAAkD,SAAlD,EAA6D,SAA7D,CAAR,CATxC;;IAWA,IAAI+Q,eAAe,GAAGtB,MAAM,CAAC9c,OAA7B;IAAA,IACIqe,WAAW,GAAGD,eAAe,CAACnd,KADlC;IAAA,IAEIsc,WAAW,GAAGa,eAAe,CAAC3c,KAFlC;IAGA,IAAI2H,SAAS,GAAGkN,YAAY,CAAC9S,KAAD,EAAQyF,IAAR,EAAcoV,WAAW,CAACvW,KAA1B,CAA5B;;IAEA,IAAIsB,SAAS,GAAG,CAAhB,EAAmB;MACjB,MAAM,IAAIgL,KAAJ,CAAU,iDAAV,CAAN;IACD;;IAED,IAAI1D,WAAW,GAAG,SAAlB;IACA,IAAIC,kBAAkB,GAAGrD,OAAzB;IACA,OAAOzR,QAAQ,EAAEiU,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAAChF,MAAD,CAAT,GAAoBnL,UAAU,CAACI,GAAD,EAAM,UAAUsM,QAAV,EAAoB;MACvF,IAAIA,QAAJ,EAAc;QACZkQ,QAAQ,CAACvc,OAAT,CAAiB2c,aAAa,CAAC3c,OAAd,CAAsB4H,SAAtB,CAAgCwB,SAAhC,CAAjB,IAA+DiD,QAA/D;MACD;IACF,CAJ8D,CAA9C,EAIbyD,SAAS,CAAC1E,IAAV,GAAiB,QAJJ,EAIc0E,SAAS,CAAC,eAAD,CAAT,GAA6B,MAAM1G,SAAS,KAAKmU,WAAW,CAAC/U,gBAAhC,CAJ3C,EAI8FsH,SAAS,CAACtI,EAAV,GAAemV,aAAa,CAAC3c,OAAd,CAAsB4H,SAAtB,CAAgCwB,SAAhC,CAJ7G,EAIyJ0G,SAJ3J,GAIuK,CAAC/E,IAAI,CAACmD,QAAN,KAAmBS,KAAK,GAAG;MAC/M4B,WAAW,EAAExR,oBAAoB,CAACwR,WAAD,EAAc,SAAS+N,mBAAT,GAA+B;QAC5E,IAAI9a,KAAK,KAAK+Z,WAAW,CAAC/U,gBAA1B,EAA4C;UAC1C;QACD;;QAEDgU,eAAe,CAACxc,OAAhB,GAA0B,KAA1B;QACAyX,QAAQ,CAAC;UACP1W,IAAI,EAAEme,eADC;UAEP1b,KAAK,EAAEA;QAFA,CAAD,CAAR;MAID,CAVgC;IAD8K,CAAR,EAYtMmL,KAAK,CAAC+B,WAAD,CAAL,GAAqB3R,oBAAoB,CAAC4R,kBAAD,EAAqB,SAAS4N,eAAT,GAA2B;MAC1F9G,QAAQ,CAAC;QACP1W,IAAI,EAAEoe,WADC;QAEP3b,KAAK,EAAEA;MAFA,CAAD,CAAR;;MAKA,IAAIgd,QAAQ,CAACxgB,OAAb,EAAsB;QACpBwgB,QAAQ,CAACxgB,OAAT,CAAiBoO,KAAjB;MACD;IACF,CAT2C,CAZ6J,EAqBrMO,KArBkL,CAJvK,EAyBH5D,IAzBG,CAAf;EA0BD,CAnD6B,EAmD3B,CAAC0M,QAAD,EAAWqF,MAAX,CAnD2B,CAA9B;EAoDA,IAAI3P,oBAAoB,GAAG9Q,WAAW,CAAC,UAAUqS,MAAV,EAAkB;IACvD,IAAIyP,SAAJ;;IAEA,IAAIpO,KAAK,GAAGrB,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACIpB,OAAO,GAAGyC,KAAK,CAACzC,OADpB;IAAA,IAEIC,OAAO,GAAGwC,KAAK,CAACxC,OAFpB;IAAA,IAGIyC,YAAY,GAAGD,KAAK,CAACjF,MAHzB;IAAA,IAIIA,MAAM,GAAGkF,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAJ/C;IAAA,IAKIjQ,GAAG,GAAGgQ,KAAK,CAAChQ,GALhB;IAAA,IAMIgL,IAAI,GAAGnP,6BAA6B,CAACmU,KAAD,EAAQ,CAAC,SAAD,EAAY,SAAZ,EAAuB,QAAvB,EAAiC,KAAjC,CAAR,CANxC;;IAQA,IAAIgO,uBAAuB,GAAG,YAAY;MACxCtG,QAAQ,CAAC;QACP1W,IAAI,EAAEqe;MADC,CAAD,CAAR;;MAIA,IAAI,CAACtC,MAAM,CAAC9c,OAAP,CAAeyB,KAAf,CAAqBnB,MAAtB,IAAgCkgB,QAAQ,CAACxgB,OAA7C,EAAsD;QACpDwgB,QAAQ,CAACxgB,OAAT,CAAiBoO,KAAjB;MACD;IACF,CARD;;IAUA,OAAOvS,QAAQ,EAAEsiB,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAACrT,MAAD,CAAT,GAAoBnL,UAAU,CAACI,GAAD,EAAM,UAAUme,gBAAV,EAA4B;MAC/F5B,eAAe,CAACtc,OAAhB,GAA0Bke,gBAA1B;IACD,CAF8D,CAA9C,EAEbC,SAAS,CAAC3W,EAAV,GAAemV,aAAa,CAAC3c,OAAd,CAAsBoW,cAFxB,EAEwC+H,SAAS,CAACX,QAAV,GAAqB,CAAC,CAF9D,EAEiEW,SAFnE,GAE+E,CAACpT,IAAI,CAACmD,QAAN,IAAkBrS,QAAQ,CAAC,EAAD,EAAK;MAC3HyR,OAAO,EAAEvO,oBAAoB,CAACuO,OAAD,EAAUyQ,uBAAV;IAD8F,CAAL,CAFzG,EAIXhT,IAJW,CAAf;EAKD,CA1BqC,EA0BnC,CAAC0M,QAAD,EAAWqF,MAAX,CA1BmC,CAAtC;EA2BA,IAAIrO,aAAa,GAAGpS,WAAW,CAAC,UAAUuT,MAAV,EAAkBC,MAAlB,EAA0B;IACxD,IAAI6Q,SAAJ;;IAEA,IAAIzQ,KAAK,GAAGL,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACIpC,SAAS,GAAGyC,KAAK,CAACzC,SADtB;IAAA,IAEInD,QAAQ,GAAG4F,KAAK,CAAC5F,QAFrB;IAAA,IAGIuE,OAAO,GAAGqB,KAAK,CAACrB,OAHpB;IAAA,IAIIlB,MAAM,GAAGuC,KAAK,CAACvC,MAJnB;IAAA,IAKImB,YAAY,GAAGoB,KAAK,CAACpB,YALzB;IAAA,IAMI8R,YAAY,GAAG1Q,KAAK,CAACnF,MANzB;IAAA,IAOIA,MAAM,GAAG6V,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAP/C;IAAA,IAQI5gB,GAAG,GAAGkQ,KAAK,CAAClQ,GARhB;IAAA,IASIgL,IAAI,GAAGnP,6BAA6B,CAACqU,KAAD,EAAQ,CAAC,WAAD,EAAc,UAAd,EAA0B,SAA1B,EAAqC,QAArC,EAA+C,cAA/C,EAA+D,QAA/D,EAAyE,KAAzE,CAAR,CATxC;;IAWA,IAAIK,KAAK,GAAGT,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACI+Q,qBAAqB,GAAGtQ,KAAK,CAACrF,gBADlC;IAAA,IAEIA,gBAAgB,GAAG2V,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAFlE;;IAIAxH,qBAAqB,CAAC,eAAD,EAAkBnO,gBAAlB,EAAoCH,MAApC,EAA4C0V,QAA5C,CAArB;IACA,IAAIjD,WAAW,GAAGT,MAAM,CAAC9c,OAAP,CAAeyB,KAAjC;;IAEA,IAAIyN,kBAAkB,GAAG,UAAU/P,KAAV,EAAiB;MACxC,IAAI8C,GAAG,GAAGG,iBAAiB,CAACjD,KAAD,CAA3B;;MAEA,IAAI8C,GAAG,IAAI0K,oBAAoB,CAAC1K,GAAD,CAA/B,EAAsC;QACpC0K,oBAAoB,CAAC1K,GAAD,CAApB,CAA0B9C,KAA1B;MACD;IACF,CAND;;IAQA,IAAI8P,iBAAiB,GAAG,UAAU9P,KAAV,EAAiB;MACvCsY,QAAQ,CAAC;QACP1W,IAAI,EAAEge,WADC;QAEPjW,UAAU,EAAE3J,KAAK,CAACwE,MAAN,CAAa0L;MAFlB,CAAD,CAAR;IAID,CALD;;IAOA,IAAIF,eAAe,GAAG,YAAY;MAChC;MACA,IAAI,CAACuJ,wBAAwB,CAAC1Y,OAAzB,CAAiCsO,WAAtC,EAAmD;QACjDmJ,QAAQ,CAAC;UACP1W,IAAI,EAAEie;QADC,CAAD,CAAR;MAGD;IACF,CAPD;IAQA;;;IAGA,IAAIlQ,WAAW,GAAG,UAAlB;IACA,IAAIb,aAAa,GAAG,EAApB;;IAEA,IAAI,CAAClD,IAAI,CAACmD,QAAV,EAAoB;MAClB,IAAIc,cAAJ;;MAEAf,aAAa,IAAIe,cAAc,GAAG,EAAjB,EAAqBA,cAAc,CAACF,WAAD,CAAd,GAA8B/P,oBAAoB,CAACsL,QAAD,EAAWuE,OAAX,EAAoBK,iBAApB,CAAvE,EAA+GD,cAAc,CAACxB,SAAf,GAA2BzO,oBAAoB,CAACyO,SAAD,EAAY0B,kBAAZ,CAA9J,EAA+LF,cAAc,CAACtB,MAAf,GAAwB3O,oBAAoB,CAAC2O,MAAD,EAASyB,eAAT,CAA3O,EAAsQH,cAA1Q,CAAb;IACD;IACD;;;IAGA,OAAOnT,QAAQ,EAAE6kB,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAAC5V,MAAD,CAAT,GAAoBnL,UAAU,CAACI,GAAD,EAAM,UAAU8gB,SAAV,EAAqB;MACxFL,QAAQ,CAACxgB,OAAT,GAAmB6gB,SAAnB;IACD,CAF8D,CAA9C,EAEbH,SAAS,CAAClZ,EAAV,GAAemV,aAAa,CAAC3c,OAAd,CAAsB2H,OAFxB,EAEiC+Y,SAAS,CAAC,mBAAD,CAAT,GAAiC,MAFlE,EAE0EA,SAAS,CAAC,eAAD,CAAT,GAA6B/D,aAAa,CAAC3c,OAAd,CAAsByH,MAF7H,EAEqIiZ,SAFvI,GAEmJnD,WAAW,CAACjd,MAAZ,IAAsBid,WAAW,CAAC/U,gBAAZ,GAA+B,CAAC,CAAtD,IAA2D;MAC3N,yBAAyBmU,aAAa,CAAC3c,OAAd,CAAsB4H,SAAtB,CAAgC2V,WAAW,CAAC/U,gBAA5C;IADkM,CAF9M,EAIZ;MACD,mBAAmBmU,aAAa,CAAC3c,OAAd,CAAsB0H,OADxC;MAED;MACA;MACA0H,YAAY,EAAE,KAJb;MAKDC,KAAK,EAAEkO,WAAW,CAACzU;IALlB,CAJY,EAUZmF,aAVY,EAUGlD,IAVH,CAAf;EAWD,CArE8B,EAqE5B,CAAC0M,QAAD,EAAW9K,oBAAX,EAAiCmQ,MAAjC,EAAyCpE,wBAAzC,EAAmEU,qBAAnE,CArE4B,CAA/B;EAsEA,IAAI0H,gBAAgB,GAAGzkB,WAAW,CAAC,UAAU+T,MAAV,EAAkB2Q,MAAlB,EAA0B;IAC3D,IAAIC,SAAJ;;IAEA,IAAIlQ,KAAK,GAAGV,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACI6Q,YAAY,GAAGnQ,KAAK,CAAChG,MADzB;IAAA,IAEIA,MAAM,GAAGmW,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAF/C;IAAA,IAGIlhB,GAAG,GAAG+Q,KAAK,CAAC/Q,GAHhB;IAAA,IAIIgL,IAAI,GAAGnP,6BAA6B,CAACkV,KAAD,EAAQ,CAAC,QAAD,EAAW,KAAX,CAAR,CAJxC;;IAMA,IAAIC,KAAK,GAAGgQ,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACIG,qBAAqB,GAAGnQ,KAAK,CAAC9F,gBADlC;IAAA,IAEIA,gBAAgB,GAAGiW,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAFlE;;IAIA9H,qBAAqB,CAAC,kBAAD,EAAqBnO,gBAArB,EAAuCH,MAAvC,EAA+C2V,WAA/C,CAArB;IACA,OAAO5kB,QAAQ,EAAEmlB,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAAClW,MAAD,CAAT,GAAoBnL,UAAU,CAACI,GAAD,EAAM,UAAUohB,YAAV,EAAwB;MAC3FV,WAAW,CAACzgB,OAAZ,GAAsBmhB,YAAtB;IACD,CAF8D,CAA9C,EAEbH,SAAS,CAAC5V,IAAV,GAAiB,UAFJ,EAEgB4V,SAAS,CAAC,eAAD,CAAT,GAA6B,SAF7C,EAEwDA,SAAS,CAAC,WAAD,CAAT,GAAyBrE,aAAa,CAAC3c,OAAd,CAAsByH,MAFvG,EAE+GuZ,SAAS,CAAC,eAAD,CAAT,GAA6BlE,MAAM,CAAC9c,OAAP,CAAeyB,KAAf,CAAqBnB,MAFjK,EAEyK0gB,SAF3K,GAEuLjW,IAFvL,CAAf;EAGD,CAjBiC,EAiB/B,CAAC+R,MAAD,EAAS1D,qBAAT,CAjB+B,CAAlC,CAnY8B,CAoZO;;EAErC,IAAI1M,UAAU,GAAGrQ,WAAW,CAAC,YAAY;IACvCob,QAAQ,CAAC;MACP1W,IAAI,EAAEse;IADC,CAAD,CAAR;EAGD,CAJ2B,EAIzB,CAAC5H,QAAD,CAJyB,CAA5B;EAKA,IAAIvG,SAAS,GAAG7U,WAAW,CAAC,YAAY;IACtCob,QAAQ,CAAC;MACP1W,IAAI,EAAEwe;IADC,CAAD,CAAR;EAGD,CAJ0B,EAIxB,CAAC9H,QAAD,CAJwB,CAA3B;EAKA,IAAIxG,QAAQ,GAAG5U,WAAW,CAAC,YAAY;IACrCob,QAAQ,CAAC;MACP1W,IAAI,EAAEue;IADC,CAAD,CAAR;EAGD,CAJyB,EAIvB,CAAC7H,QAAD,CAJuB,CAA1B;EAKA,IAAIlP,mBAAmB,GAAGlM,WAAW,CAAC,UAAU0Q,mBAAV,EAA+B;IACnE0K,QAAQ,CAAC;MACP1W,IAAI,EAAEye,6BADC;MAEPhX,gBAAgB,EAAEuE;IAFX,CAAD,CAAR;EAID,CALoC,EAKlC,CAAC0K,QAAD,CALkC,CAArC;EAMA,IAAIzO,UAAU,GAAG3M,WAAW,CAAC,UAAU6gB,eAAV,EAA2B;IACtDzF,QAAQ,CAAC;MACP1W,IAAI,EAAE0e,oBADC;MAEP5W,YAAY,EAAEqU;IAFP,CAAD,CAAR;EAID,CAL2B,EAKzB,CAACzF,QAAD,CALyB,CAA5B;EAMA,IAAI0F,aAAa,GAAG9gB,WAAW,CAAC,UAAU+gB,aAAV,EAAyB;IACvD3F,QAAQ,CAAC;MACP1W,IAAI,EAAE2e,uBADC;MAEP5W,UAAU,EAAEsU;IAFL,CAAD,CAAR;EAID,CAL8B,EAK5B,CAAC3F,QAAD,CAL4B,CAA/B;EAMA,IAAIlL,KAAK,GAAGlQ,WAAW,CAAC,YAAY;IAClCob,QAAQ,CAAC;MACP1W,IAAI,EAAE4e;IADC,CAAD,CAAR;EAGD,CAJsB,EAIpB,CAAClI,QAAD,CAJoB,CAAvB;EAKA,OAAO;IACL;IACAtH,YAAY,EAAEA,YAFT;IAGL5B,aAAa,EAAEA,aAHV;IAILoB,YAAY,EAAEA,YAJT;IAKLlB,aAAa,EAAEA,aALV;IAMLqS,gBAAgB,EAAEA,gBANb;IAOL3T,oBAAoB,EAAEA,oBAPjB;IAQL;IACAT,UAAU,EAAEA,UATP;IAULuE,QAAQ,EAAEA,QAVL;IAWLC,SAAS,EAAEA,SAXN;IAYL3I,mBAAmB,EAAEA,mBAZhB;IAaL4U,aAAa,EAAEA,aAbV;IAcLnU,UAAU,EAAEA,UAdP;IAeLuD,KAAK,EAAEA,KAfF;IAgBL;IACA/D,gBAAgB,EAAEA,gBAjBb;IAkBLlI,MAAM,EAAEA,MAlBH;IAmBLuI,YAAY,EAAEA,YAnBT;IAoBLC,UAAU,EAAEA;EApBP,CAAP;AAsBD;;AAED,IAAIkP,kBAAkB,GAAG;EACvBoJ,WAAW,EAAE,CAAC,CADS;EAEvBC,aAAa,EAAE;AAFQ,CAAzB;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASC,iBAAT,CAA2BrgB,KAA3B,EAAkCuD,OAAlC,EAA2C;EACzC,OAAO0T,eAAe,CAACjX,KAAD,EAAQuD,OAAR,EAAiBwT,kBAAjB,CAAtB;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASuJ,iBAAT,CAA2BtgB,KAA3B,EAAkCuD,OAAlC,EAA2C;EACzC,OAAOuT,eAAe,CAAC9W,KAAD,EAAQuD,OAAR,EAAiBwT,kBAAjB,CAAtB;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAASwJ,iBAAT,CAA2BvgB,KAA3B,EAAkC;EAChC,IAAImgB,WAAW,GAAGE,iBAAiB,CAACrgB,KAAD,EAAQ,aAAR,CAAnC;EACA,IAAIogB,aAAa,GAAGC,iBAAiB,CAACrgB,KAAD,EAAQ,eAAR,CAArC;EACA,OAAO;IACLmgB,WAAW,EAAEA,WADR;IAELC,aAAa,EAAEA;EAFV,CAAP;AAID;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAASI,2BAAT,CAAqCtiB,KAArC,EAA4C;EAC1C,IAAIA,KAAK,CAACuM,QAAN,IAAkBvM,KAAK,CAACuiB,OAAxB,IAAmCviB,KAAK,CAACwiB,OAAzC,IAAoDxiB,KAAK,CAACyiB,MAA9D,EAAsE;IACpE,OAAO,KAAP;EACD;;EAED,IAAI9gB,OAAO,GAAG3B,KAAK,CAACwE,MAApB;;EAEA,IAAI7C,OAAO,YAAY+gB,gBAAnB,IAAuC;EAC3C/gB,OAAO,CAACuO,KAAR,KAAkB,EADd,MACsB;EAC1B;EACAvO,OAAO,CAACghB,cAAR,KAA2B,CAA3B,IAAgChhB,OAAO,CAACihB,YAAR,KAAyB,CAHrD,CAAJ,EAG6D;IAC3D,OAAO,KAAP;EACD;;EAED,OAAO,IAAP;AACD;AACD;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAASC,qBAAT,CAA+BjM,mBAA/B,EAAoD;EAClD,IAAIkM,mBAAmB,GAAGlM,mBAAmB,CAACkM,mBAA9C;EAAA,IACIjM,iBAAiB,GAAGD,mBAAmB,CAAC7M,YAD5C;EAEA,OAAO8M,iBAAiB,CAACiM,mBAAD,CAAjB,GAAyC,oBAAhD;AACD;;AAED,IAAIC,WAAW,GAAG;EAChBb,aAAa,EAAErlB,SAAS,CAAC+d,KADT;EAEhBoI,oBAAoB,EAAEnmB,SAAS,CAAC+d,KAFhB;EAGhBqI,oBAAoB,EAAEpmB,SAAS,CAAC+d,KAHhB;EAIhB7Q,YAAY,EAAElN,SAAS,CAAC0Y,IAJR;EAKhBsN,qBAAqB,EAAEhmB,SAAS,CAAC0Y,IALjB;EAMhB3K,YAAY,EAAE/N,SAAS,CAAC0Y,IANR;EAOhB0M,WAAW,EAAEplB,SAAS,CAAC2Y,MAPP;EAQhB0N,kBAAkB,EAAErmB,SAAS,CAAC2Y,MARd;EAShB2N,kBAAkB,EAAEtmB,SAAS,CAAC2Y,MATd;EAUhB4N,mBAAmB,EAAEvmB,SAAS,CAAC0Y,IAVf;EAWhB8N,qBAAqB,EAAExmB,SAAS,CAAC0Y,IAXjB;EAYhB+N,iBAAiB,EAAEzmB,SAAS,CAAC8Y,MAZb;EAahB4N,qBAAqB,EAAE1mB,SAAS,CAAC8Y,MAbjB;EAchB3G,WAAW,EAAEnS,SAAS,CAAC+Y,KAAV,CAAgB;IAC3B1B,gBAAgB,EAAErX,SAAS,CAAC0Y,IADD;IAE3BnB,mBAAmB,EAAEvX,SAAS,CAAC0Y,IAFJ;IAG3B7Q,QAAQ,EAAE7H,SAAS,CAAC+Y,KAAV,CAAgB;MACxB9P,cAAc,EAAEjJ,SAAS,CAAC0Y,IADF;MAExB1Q,aAAa,EAAEhI,SAAS,CAAC6Y,GAFD;MAGxB/O,IAAI,EAAE9J,SAAS,CAAC6Y;IAHQ,CAAhB;EAHiB,CAAhB;AAdG,CAAlB;AAwBA,IAAI8N,cAAc,GAAG;EACnBzZ,YAAY,EAAEmL,YAAY,CAACnL,YADR;EAEnBa,YAAY,EAAEsK,YAAY,CAACtK,YAFR;EAGnBoE,WAAW,EAAEkG,YAAY,CAAClG,WAHP;EAInB6T,qBAAqB,EAAEA,qBAJJ;EAKnBS,iBAAiB,EAAE,YALA;EAMnBC,qBAAqB,EAAE;AANJ,CAArB;AASA,IAAIE,iBAAiB,GAAGxe,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,yBAAxC,GAAoE,CAA5F;AACA,IAAIue,yBAAyB,GAAGze,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,kCAAxC,GAA6E,CAA7G;AACA,IAAIwe,4BAA4B,GAAG1e,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,qCAAxC,GAAgF,CAAnH;AACA,IAAIye,iCAAiC,GAAG3e,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,2CAAxC,GAAsF,CAA9H;AACA,IAAI0e,qCAAqC,GAAG5e,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,+CAAxC,GAA0F,CAAtI;AACA,IAAI2e,iCAAiC,GAAG7e,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,0CAAxC,GAAqF,CAA7H;AACA,IAAI4e,wBAAwB,GAAG9e,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,gCAAxC,GAA2E,CAA1G;AACA,IAAI6e,aAAa,GAAG/e,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,oBAAxC,GAA+D,CAAnF;AACA,IAAI8e,uBAAuB,GAAGhf,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,gCAAxC,GAA2E,CAAzG;AACA,IAAI+e,0BAA0B,GAAGjf,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,mCAAxC,GAA8E,CAA/G;AACA,IAAIgf,wBAAwB,GAAGlf,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,iCAAxC,GAA4E,EAA3G;AACA,IAAIif,sBAAsB,GAAGnf,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,+BAAxC,GAA0E,EAAvG;AACA,IAAIkf,eAAe,GAAGpf,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,oBAAxC,GAA+D,EAArF;AAEA,IAAImf,kBAAkB,GAAG,aAAa5hB,MAAM,CAACqF,MAAP,CAAc;EAClDC,SAAS,EAAE,IADuC;EAElDyb,iBAAiB,EAAEA,iBAF+B;EAGlDC,yBAAyB,EAAEA,yBAHuB;EAIlDC,4BAA4B,EAAEA,4BAJoB;EAKlDC,iCAAiC,EAAEA,iCALe;EAMlDC,qCAAqC,EAAEA,qCANW;EAOlDC,iCAAiC,EAAEA,iCAPe;EAQlDC,wBAAwB,EAAEA,wBARwB;EASlDC,aAAa,EAAEA,aATmC;EAUlDC,uBAAuB,EAAEA,uBAVyB;EAWlDC,0BAA0B,EAAEA,0BAXsB;EAYlDC,wBAAwB,EAAEA,wBAZwB;EAalDC,sBAAsB,EAAEA,sBAb0B;EAclD1H,aAAa,EAAE2H;AAdmC,CAAd,CAAtC;AAiBA;;AAEA,SAASE,iCAAT,CAA2CjiB,KAA3C,EAAkD6T,MAAlD,EAA0D;EACxD,IAAIvU,IAAI,GAAGuU,MAAM,CAACvU,IAAlB;EAAA,IACIyC,KAAK,GAAG8R,MAAM,CAAC9R,KADnB;EAAA,IAEIvC,KAAK,GAAGqU,MAAM,CAACrU,KAFnB;EAAA,IAGI4H,YAAY,GAAGyM,MAAM,CAACzM,YAH1B;EAIA,IAAIuY,WAAW,GAAG3f,KAAK,CAAC2f,WAAxB;EAAA,IACIC,aAAa,GAAG5f,KAAK,CAAC4f,aAD1B;EAEA,IAAI7L,OAAJ;;EAEA,QAAQzU,IAAR;IACE,KAAK6hB,iBAAL;MACEpN,OAAO,GAAG;QACR4L,WAAW,EAAE5d;MADL,CAAV;MAGA;;IAEF,KAAKwf,qCAAL;MACExN,OAAO,GAAG;QACR4L,WAAW,EAAEA,WAAW,GAAG,CAAd,GAAkB,CAAlB,GAAsB,CAAtB,GAA0BA,WAAW,GAAG;MAD7C,CAAV;MAGA;;IAEF,KAAK2B,iCAAL;MACEvN,OAAO,GAAG;QACR4L,WAAW,EAAEA,WAAW,GAAG,CAAd,IAAmBC,aAAa,CAAC5iB,MAAjC,GAA0C,CAAC,CAA3C,GAA+C2iB,WAAW,GAAG;MADlE,CAAV;MAGA;;IAEF,KAAK0B,4BAAL;IACA,KAAKD,yBAAL;MACE;QACE,IAAIc,cAAc,GAAGvC,WAArB;;QAEA,IAAIC,aAAa,CAAC5iB,MAAd,KAAyB,CAA7B,EAAgC;UAC9BklB,cAAc,GAAG,CAAC,CAAlB;QACD,CAFD,MAEO,IAAIvC,WAAW,KAAKC,aAAa,CAAC5iB,MAAd,GAAuB,CAA3C,EAA8C;UACnDklB,cAAc,GAAGtC,aAAa,CAAC5iB,MAAd,GAAuB,CAAxC;QACD;;QAED+W,OAAO,GAAG3Z,QAAQ,CAAC;UACjBwlB,aAAa,EAAE,GAAG9hB,MAAH,CAAU8hB,aAAa,CAACvK,KAAd,CAAoB,CAApB,EAAuBsK,WAAvB,CAAV,EAA+CC,aAAa,CAACvK,KAAd,CAAoBsK,WAAW,GAAG,CAAlC,CAA/C;QADE,CAAD,EAEf;UACDA,WAAW,EAAEuC;QADZ,CAFe,CAAlB;QAKA;MACD;;IAEH,KAAKV,iCAAL;MACEzN,OAAO,GAAG;QACR4L,WAAW,EAAEC,aAAa,CAAC5iB,MAAd,GAAuB;MAD5B,CAAV;MAGA;;IAEF,KAAKykB,wBAAL;MACE1N,OAAO,GAAG;QACR6L,aAAa,EAAEA,aAAa,CAACvK,KAAd,CAAoB,CAApB,EAAuBuK,aAAa,CAAC5iB,MAAd,GAAuB,CAA9C;MADP,CAAV;MAGA;;IAEF,KAAK2kB,uBAAL;MACE5N,OAAO,GAAG;QACR6L,aAAa,EAAE,GAAG9hB,MAAH,CAAU8hB,aAAV,EAAyB,CAACxY,YAAD,CAAzB;MADP,CAAV;MAGA;;IAEF,KAAKsa,aAAL;MACE3N,OAAO,GAAG;QACR4L,WAAW,EAAE,CAAC;MADN,CAAV;MAGA;;IAEF,KAAKiC,0BAAL;MACE;QACE,IAAIO,eAAe,GAAGxC,WAAtB;QACA,IAAIyC,iBAAiB,GAAGxC,aAAa,CAAC/e,OAAd,CAAsBuG,YAAtB,CAAxB;;QAEA,IAAIwY,aAAa,CAAC5iB,MAAd,KAAyB,CAA7B,EAAgC;UAC9BmlB,eAAe,GAAG,CAAC,CAAnB;QACD,CAFD,MAEO,IAAIC,iBAAiB,KAAKxC,aAAa,CAAC5iB,MAAd,GAAuB,CAAjD,EAAoD;UACzDmlB,eAAe,GAAGvC,aAAa,CAAC5iB,MAAd,GAAuB,CAAzC;QACD;;QAED+W,OAAO,GAAG3Z,QAAQ,CAAC;UACjBwlB,aAAa,EAAE,GAAG9hB,MAAH,CAAU8hB,aAAa,CAACvK,KAAd,CAAoB,CAApB,EAAuB+M,iBAAvB,CAAV,EAAqDxC,aAAa,CAACvK,KAAd,CAAoB+M,iBAAiB,GAAG,CAAxC,CAArD;QADE,CAAD,EAEf;UACDzC,WAAW,EAAEwC;QADZ,CAFe,CAAlB;QAKA;MACD;;IAEH,KAAKN,wBAAL;MACE;QACE,IAAIQ,gBAAgB,GAAGxO,MAAM,CAAC+L,aAA9B;QACA7L,OAAO,GAAG;UACR6L,aAAa,EAAEyC;QADP,CAAV;QAGA;MACD;;IAEH,KAAKP,sBAAL;MACE;QACE,IAAIQ,gBAAgB,GAAGzO,MAAM,CAAC8L,WAA9B;QACA5L,OAAO,GAAG;UACR4L,WAAW,EAAE2C;QADL,CAAV;QAGA;MACD;;IAEH,KAAKP,eAAL;MACEhO,OAAO,GAAG;QACR4L,WAAW,EAAEG,iBAAiB,CAACtgB,KAAD,EAAQ,aAAR,CADtB;QAERogB,aAAa,EAAEE,iBAAiB,CAACtgB,KAAD,EAAQ,eAAR;MAFxB,CAAV;MAIA;;IAEF;MACE,MAAM,IAAImT,KAAJ,CAAU,4CAAV,CAAN;EA3GJ;;EA8GA,OAAOvY,QAAQ,CAAC,EAAD,EAAK4F,KAAL,EAAY+T,OAAZ,CAAf;AACD;;AAEDwO,oBAAoB,CAAC/c,gBAArB,GAAwCwc,kBAAxC;;AAEA,SAASO,oBAAT,CAA8B5H,SAA9B,EAAyC;EACvC,IAAIA,SAAS,KAAK,KAAK,CAAvB,EAA0B;IACxBA,SAAS,GAAG,EAAZ;EACD,CAHsC,CAKvC;;;EACA,IAAInb,KAAK,GAAGpF,QAAQ,CAAC,EAAD,EAAK8mB,cAAL,EAAqBvG,SAArB,CAApB;;EAEA,IAAI4F,qBAAqB,GAAG/gB,KAAK,CAAC+gB,qBAAlC;EAAA,IACI9Y,YAAY,GAAGjI,KAAK,CAACiI,YADzB;EAAA,IAEIiF,WAAW,GAAGlN,KAAK,CAACkN,WAFxB;EAAA,IAGIsU,iBAAiB,GAAGxhB,KAAK,CAACwhB,iBAH9B;EAAA,IAIIC,qBAAqB,GAAGzhB,KAAK,CAACyhB,qBAJlC,CARuC,CAYkB;;EAEzD,IAAIrG,qBAAqB,GAAGzE,oBAAoB,CAAC8L,iCAAD,EAAoClC,iBAAiB,CAACvgB,KAAD,CAArD,EAA8DA,KAA9D,CAAhD;EAAA,IACIQ,KAAK,GAAG4a,qBAAqB,CAAC,CAAD,CADjC;EAAA,IAEI5E,QAAQ,GAAG4E,qBAAqB,CAAC,CAAD,CAFpC;;EAIA,IAAI+E,WAAW,GAAG3f,KAAK,CAAC2f,WAAxB;EAAA,IACIC,aAAa,GAAG5f,KAAK,CAAC4f,aAD1B,CAlBuC,CAmBE;;EAEzC,IAAIvI,iBAAiB,GAAG3c,MAAM,CAAC,IAAD,CAA9B;EACA,IAAI8nB,WAAW,GAAG9nB,MAAM,CAAC,IAAD,CAAxB;EACA,IAAI+nB,wBAAwB,GAAG/nB,MAAM,CAACklB,aAAD,CAArC;EACA,IAAI8C,gBAAgB,GAAGhoB,MAAM,EAA7B;EACAgoB,gBAAgB,CAACnkB,OAAjB,GAA2B,EAA3B,CAzBuC,CAyBR;;EAE/B,IAAI6c,YAAY,GAAG1gB,MAAM,CAAC8E,KAAD,CAAzB;EACA,IAAI6b,MAAM,GAAG9F,YAAY,CAAC;IACxBvV,KAAK,EAAEA,KADiB;IAExBR,KAAK,EAAEA;EAFiB,CAAD,CAAzB,CA5BuC,CA+BnC;;EAEJ;;EAEA7E,SAAS,CAAC,YAAY;IACpB,IAAI0c,iBAAiB,CAAC9Y,OAAtB,EAA+B;MAC7B;IACD;;IAED,IAAIqhB,aAAa,CAAC5iB,MAAd,GAAuBylB,wBAAwB,CAAClkB,OAAzB,CAAiCvB,MAA5D,EAAoE;MAClE,IAAIwjB,mBAAmB,GAAGiC,wBAAwB,CAAClkB,OAAzB,CAAiCokB,IAAjC,CAAsC,UAAUnb,IAAV,EAAgB;QAC9E,OAAOoY,aAAa,CAAC/e,OAAd,CAAsB2G,IAAtB,IAA8B,CAArC;MACD,CAFyB,CAA1B;MAGArE,SAAS,CAACod,qBAAqB,CAAC;QAC9B9Y,YAAY,EAAEA,YADgB;QAE9B3I,WAAW,EAAE8gB,aAAa,CAAC5iB,MAFG;QAG9BwjB,mBAAmB,EAAEA,mBAHS;QAI9Bb,WAAW,EAAEA,WAJiB;QAK9BiD,kBAAkB,EAAEhD,aAAa,CAACD,WAAD;MALH,CAAD,CAAtB,EAMLjT,WAAW,CAACtK,QANP,CAAT;IAOD;;IAEDqgB,wBAAwB,CAAClkB,OAAzB,GAAmCqhB,aAAnC,CAlBoB,CAkB8B;EACnD,CAnBQ,EAmBN,CAACA,aAAa,CAAC5iB,MAAf,CAnBM,CAAT,CAnCuC,CAsDX;;EAE5BrC,SAAS,CAAC,YAAY;IACpB,IAAI0c,iBAAiB,CAAC9Y,OAAtB,EAA+B;MAC7B;IACD;;IAED,IAAIohB,WAAW,KAAK,CAAC,CAAjB,IAAsB6C,WAAW,CAACjkB,OAAtC,EAA+C;MAC7CikB,WAAW,CAACjkB,OAAZ,CAAoBoO,KAApB;IACD,CAFD,MAEO,IAAI+V,gBAAgB,CAACnkB,OAAjB,CAAyBohB,WAAzB,CAAJ,EAA2C;MAChD+C,gBAAgB,CAACnkB,OAAjB,CAAyBohB,WAAzB,EAAsChT,KAAtC;IACD;EACF,CAVQ,EAUN,CAACgT,WAAD,CAVM,CAAT;EAWAhlB,SAAS,CAAC,YAAY;IACpB,IAAI0c,iBAAiB,CAAC9Y,OAAtB,EAA+B;MAC7B;IACD;;IAEDiE,2BAA2B,CAACxC,KAAD,EAAQob,YAAY,CAAC7c,OAArB,EAA8BiB,KAA9B,CAA3B;IACA4b,YAAY,CAAC7c,OAAb,GAAuBiB,KAAvB;EACD,CAPQ,EAON,CAACQ,KAAD,EAAQR,KAAR,CAPM,CAAT;EAQA,IAAImY,qBAAqB,GAAGR,2BAA2B,CAAC,kBAAD,CAAvD,CA3EuC,CA2EsC;;EAE7Exc,SAAS,CAAC,YAAY;IACpB0c,iBAAiB,CAAC9Y,OAAlB,GAA4B,KAA5B;EACD,CAFQ,EAEN,EAFM,CAAT,CA7EuC,CA+E/B;;EAER,IAAIskB,2BAA2B,GAAG/nB,OAAO,CAAC,YAAY;IACpD,IAAIe,IAAJ;;IAEA,OAAOA,IAAI,GAAG,EAAP,EAAWA,IAAI,CAAColB,qBAAD,CAAJ,GAA8B,YAAY;MAC1DjL,QAAQ,CAAC;QACP1W,IAAI,EAAEiiB;MADC,CAAD,CAAR;IAGD,CAJM,EAIJ1lB,IAAI,CAACmlB,iBAAD,CAAJ,GAA0B,YAAY;MACvChL,QAAQ,CAAC;QACP1W,IAAI,EAAEgiB;MADC,CAAD,CAAR;IAGD,CARM,EAQJzlB,IAAI,CAACinB,MAAL,GAAc,SAASA,MAAT,GAAkB;MACjC9M,QAAQ,CAAC;QACP1W,IAAI,EAAE8hB;MADC,CAAD,CAAR;IAGD,CAZM,EAYJvlB,IAAI,CAACknB,SAAL,GAAiB,SAASA,SAAT,GAAqB;MACvC/M,QAAQ,CAAC;QACP1W,IAAI,EAAE+hB;MADC,CAAD,CAAR;IAGD,CAhBM,EAgBJxlB,IAhBH;EAiBD,CApBwC,EAoBtC,CAACma,QAAD,EAAWgL,iBAAX,EAA8BC,qBAA9B,CApBsC,CAAzC;EAqBA,IAAI+B,uBAAuB,GAAGloB,OAAO,CAAC,YAAY;IAChD,IAAI8D,KAAJ;;IAEA,OAAOA,KAAK,GAAG,EAAR,EAAYA,KAAK,CAACqiB,qBAAD,CAAL,GAA+B,UAAUvjB,KAAV,EAAiB;MACjE,IAAIsiB,2BAA2B,CAACtiB,KAAD,CAA/B,EAAwC;QACtCsY,QAAQ,CAAC;UACP1W,IAAI,EAAEkiB;QADC,CAAD,CAAR;MAGD;IACF,CANM,EAMJ5iB,KAAK,CAACmkB,SAAN,GAAkB,SAASA,SAAT,CAAmBrlB,KAAnB,EAA0B;MAC7C,IAAIsiB,2BAA2B,CAACtiB,KAAD,CAA/B,EAAwC;QACtCsY,QAAQ,CAAC;UACP1W,IAAI,EAAEmiB;QADC,CAAD,CAAR;MAGD;IACF,CAZM,EAYJ7iB,KAZH;EAaD,CAhBoC,EAgBlC,CAACoX,QAAD,EAAWiL,qBAAX,CAhBkC,CAArC,CAtGuC,CAsHA;;EAEvC,IAAIgC,oBAAoB,GAAGroB,WAAW,CAAC,UAAUqO,KAAV,EAAiB;IACtD,IAAIE,SAAJ;;IAEA,IAAIyC,KAAK,GAAG3C,KAAK,KAAK,KAAK,CAAf,GAAmB,EAAnB,GAAwBA,KAApC;IAAA,IACImT,YAAY,GAAGxQ,KAAK,CAACvC,MADzB;IAAA,IAEIA,MAAM,GAAG+S,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAF/C;IAAA,IAGI9d,GAAG,GAAGsN,KAAK,CAACtN,GAHhB;IAAA,IAIIuN,OAAO,GAAGD,KAAK,CAACC,OAJpB;IAAA,IAKIE,SAAS,GAAGH,KAAK,CAACG,SALtB;IAAA,IAMI3E,YAAY,GAAGwE,KAAK,CAACxE,YANzB;IAAA,IAOIrF,KAAK,GAAG6J,KAAK,CAAC7J,KAPlB;IAAA,IAQIuH,IAAI,GAAGnP,6BAA6B,CAACyR,KAAD,EAAQ,CAAC,QAAD,EAAW,KAAX,EAAkB,SAAlB,EAA6B,WAA7B,EAA0C,cAA1C,EAA0D,OAA1D,CAAR,CARxC;;IAUA,IAAIkQ,WAAW,GAAGT,MAAM,CAAC9c,OAAP,CAAeyB,KAAjC;IACA,IAAI2H,SAAS,GAAGkN,YAAY,CAAC9S,KAAD,EAAQqF,YAAR,EAAsB0U,WAAW,CAAC8D,aAAlC,CAA5B;;IAEA,IAAIjY,SAAS,GAAG,CAAhB,EAAmB;MACjB,MAAM,IAAIgL,KAAJ,CAAU,4DAAV,CAAN;IACD;;IAED,OAAOvY,QAAQ,EAAE+O,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAACE,MAAD,CAAT,GAAoBnL,UAAU,CAACI,GAAD,EAAM,UAAU4kB,gBAAV,EAA4B;MAC/F,IAAIA,gBAAJ,EAAsB;QACpBR,gBAAgB,CAACnkB,OAAjB,CAAyBmI,IAAzB,CAA8Bwc,gBAA9B;MACD;IACF,CAJ8D,CAA9C,EAIb/Z,SAAS,CAAC4S,QAAV,GAAqBha,KAAK,KAAK+Z,WAAW,CAAC6D,WAAtB,GAAoC,CAApC,GAAwC,CAAC,CAJjD,EAIoDxW,SAAS,CAAC0C,OAAV,GAAoBvO,oBAAoB,CAACuO,OAAD,EAAU,SAASsX,uBAAT,GAAmC;MACxJnN,QAAQ,CAAC;QACP1W,IAAI,EAAE6hB,iBADC;QAEPpf,KAAK,EAAEA;MAFA,CAAD,CAAR;IAID,CAL4G,CAJ5F,EASboH,SAAS,CAAC4C,SAAV,GAAsBzO,oBAAoB,CAACyO,SAAD,EAAY,SAASqX,yBAAT,CAAmC1lB,KAAnC,EAA0C;MAClG,IAAI8C,GAAG,GAAGG,iBAAiB,CAACjD,KAAD,CAA3B;;MAEA,IAAI8C,GAAG,IAAIqiB,2BAA2B,CAACriB,GAAD,CAAtC,EAA6C;QAC3CqiB,2BAA2B,CAACriB,GAAD,CAA3B,CAAiC9C,KAAjC;MACD;IACF,CAN6C,CAT7B,EAebyL,SAfW,GAeCG,IAfD,CAAf;EAgBD,CApCqC,EAoCnC,CAAC0M,QAAD,EAAWqF,MAAX,EAAmBwH,2BAAnB,CApCmC,CAAtC;EAqCA,IAAIQ,gBAAgB,GAAGzoB,WAAW,CAAC,UAAUsO,MAAV,EAAkByC,MAAlB,EAA0B;IAC3D,IAAI0C,SAAJ;;IAEA,IAAInB,KAAK,GAAGhE,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACIoa,YAAY,GAAGpW,KAAK,CAAC7D,MADzB;IAAA,IAEIA,MAAM,GAAGia,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAF/C;IAAA,IAGIhlB,GAAG,GAAG4O,KAAK,CAAC5O,GAHhB;IAAA,IAIIyN,SAAS,GAAGmB,KAAK,CAACnB,SAJtB;IAAA,IAKIF,OAAO,GAAGqB,KAAK,CAACrB,OALpB;IAAA,IAMI0X,qBAAqB,GAAGrW,KAAK,CAACsW,gBANlC;IAAA,IAOIA,gBAAgB,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAPlE;IAAA,IAQIja,IAAI,GAAGnP,6BAA6B,CAAC+S,KAAD,EAAQ,CAAC,QAAD,EAAW,KAAX,EAAkB,WAAlB,EAA+B,SAA/B,EAA0C,kBAA1C,CAAR,CARxC;;IAUA,IAAIoB,KAAK,GAAG3C,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACI8X,qBAAqB,GAAGnV,KAAK,CAAC9E,gBADlC;IAAA,IAEIA,gBAAgB,GAAGia,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAFlE;;IAIA9L,qBAAqB,CAAC,kBAAD,EAAqBnO,gBAArB,EAAuCH,MAAvC,EAA+CmZ,WAA/C,CAArB;IACA,OAAOpoB,QAAQ,EAAEiU,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAAChF,MAAD,CAAT,GAAoBnL,UAAU,CAACI,GAAD,EAAM,UAAUolB,YAAV,EAAwB;MAC3F,IAAIA,YAAJ,EAAkB;QAChBlB,WAAW,CAACjkB,OAAZ,GAAsBmlB,YAAtB;MACD;IACF,CAJ8D,CAA9C,EAIbrV,SAJW,GAIC,CAACmV,gBAAD,IAAqB;MACnCzX,SAAS,EAAEzO,oBAAoB,CAACyO,SAAD,EAAY,SAAS4X,qBAAT,CAA+BjmB,KAA/B,EAAsC;QAC/E,IAAI8C,GAAG,GAAGG,iBAAiB,CAACjD,KAAD,CAA3B;;QAEA,IAAI8C,GAAG,IAAIwiB,uBAAuB,CAACxiB,GAAD,CAAlC,EAAyC;UACvCwiB,uBAAuB,CAACxiB,GAAD,CAAvB,CAA6B9C,KAA7B;QACD;MACF,CAN8B,CADI;MAQnCmO,OAAO,EAAEvO,oBAAoB,CAACuO,OAAD,EAAU,SAAS+X,mBAAT,GAA+B;QACpE5N,QAAQ,CAAC;UACP1W,IAAI,EAAEoiB;QADC,CAAD,CAAR;MAGD,CAJ4B;IARM,CAJtB,EAiBZpY,IAjBY,CAAf;EAkBD,CApCiC,EAoC/B,CAAC0M,QAAD,EAAWgN,uBAAX,EAAoCrL,qBAApC,CApC+B,CAAlC,CA7JuC,CAiMyB;;EAEhE,IAAIkM,eAAe,GAAGjpB,WAAW,CAAC,UAAUwM,YAAV,EAAwB;IACxD4O,QAAQ,CAAC;MACP1W,IAAI,EAAEqiB,uBADC;MAEPva,YAAY,EAAEA;IAFP,CAAD,CAAR;EAID,CALgC,EAK9B,CAAC4O,QAAD,CAL8B,CAAjC;EAMA,IAAI8N,kBAAkB,GAAGlpB,WAAW,CAAC,UAAUwM,YAAV,EAAwB;IAC3D4O,QAAQ,CAAC;MACP1W,IAAI,EAAEsiB,0BADC;MAEPxa,YAAY,EAAEA;IAFP,CAAD,CAAR;EAID,CALmC,EAKjC,CAAC4O,QAAD,CALiC,CAApC;EAMA,IAAI+N,gBAAgB,GAAGnpB,WAAW,CAAC,UAAUynB,gBAAV,EAA4B;IAC7DrM,QAAQ,CAAC;MACP1W,IAAI,EAAEuiB,wBADC;MAEPjC,aAAa,EAAEyC;IAFR,CAAD,CAAR;EAID,CALiC,EAK/B,CAACrM,QAAD,CAL+B,CAAlC;EAMA,IAAIgO,cAAc,GAAGppB,WAAW,CAAC,UAAUsnB,cAAV,EAA0B;IACzDlM,QAAQ,CAAC;MACP1W,IAAI,EAAEwiB,sBADC;MAEPnC,WAAW,EAAEuC;IAFN,CAAD,CAAR;EAID,CAL+B,EAK7B,CAAClM,QAAD,CAL6B,CAAhC;EAMA,IAAIlL,KAAK,GAAGlQ,WAAW,CAAC,YAAY;IAClCob,QAAQ,CAAC;MACP1W,IAAI,EAAEyiB;IADC,CAAD,CAAR;EAGD,CAJsB,EAIpB,CAAC/L,QAAD,CAJoB,CAAvB;EAKA,OAAO;IACLiN,oBAAoB,EAAEA,oBADjB;IAELI,gBAAgB,EAAEA,gBAFb;IAGLQ,eAAe,EAAEA,eAHZ;IAILC,kBAAkB,EAAEA,kBAJf;IAKLC,gBAAgB,EAAEA,gBALb;IAMLC,cAAc,EAAEA,cANX;IAOLlZ,KAAK,EAAEA,KAPF;IAQL8U,aAAa,EAAEA,aARV;IASLD,WAAW,EAAEA;EATR,CAAP;AAWD;;AAED,eAAeha,SAAf;AACA,SAASjH,cAAT,EAAyBogB,WAAzB,EAAsCyD,oBAAtC,EAA4D7H,SAA5D"},"metadata":{},"sourceType":"module"}